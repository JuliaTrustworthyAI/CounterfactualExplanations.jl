<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>🧐 Reference · CounterfactualExplanations.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/reference/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="CounterfactualExplanations.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">CounterfactualExplanations.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">🏠 Home</a></li><li><span class="tocitem">🫣 Tutorials</span><ul><li><a class="tocitem" href="../tutorials/">Overview</a></li><li><a class="tocitem" href="../tutorials/whistle_stop/">Whiste-Stop Tour</a></li><li><a class="tocitem" href="../tutorials/data_preprocessing/">Handling Data</a></li><li><a class="tocitem" href="../tutorials/data_catalogue/">Data Catalogue</a></li><li><a class="tocitem" href="../tutorials/models/">Handling Models</a></li><li><a class="tocitem" href="../tutorials/model_catalogue/">Model Catalogue</a></li><li><a class="tocitem" href="../tutorials/evaluation/">Evaluating Explanations</a></li><li><a class="tocitem" href="../tutorials/benchmarking/">Benchmarking Explanations</a></li></ul></li><li><span class="tocitem">🤓 Explanation</span><ul><li><a class="tocitem" href="../explanation/">Overview</a></li><li><a class="tocitem" href="../explanation/architecture/">Package Architecture</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Generators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../explanation/generators/overview/">Overview</a></li><li><a class="tocitem" href="../explanation/generators/generic/">Generic</a></li><li><a class="tocitem" href="../explanation/generators/gravitational/">Gravitational</a></li><li><a class="tocitem" href="../explanation/generators/revise/">REVISE</a></li><li><a class="tocitem" href="../explanation/generators/dice/">DiCE</a></li><li><a class="tocitem" href="../explanation/generators/clap_roar/">ClaPROAR</a></li><li><a class="tocitem" href="../explanation/generators/greedy/">Greedy</a></li></ul></li><li><a class="tocitem" href="../explanation/categorical/">Categorical Features</a></li></ul></li><li><span class="tocitem">🫡 How-To ...</span><ul><li><a class="tocitem" href="../how_to_guides/">Overview</a></li><li><a class="tocitem" href="../how_to_guides/custom_generators/">... add custom generators</a></li><li><a class="tocitem" href="../how_to_guides/custom_models/">... add custom models</a></li></ul></li><li class="is-active"><a class="tocitem" href>🧐 Reference</a><ul class="internal"><li><a class="tocitem" href="#Content"><span>Content</span></a></li><li><a class="tocitem" href="#Exported-functions"><span>Exported functions</span></a></li><li><a class="tocitem" href="#Internal-functions"><span>Internal functions</span></a></li></ul></li><li><a class="tocitem" href="../contribute/">🛠 Contribute</a></li><li><a class="tocitem" href="../assets/resources/">📚 Additional Resources</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>🧐 Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>🧐 Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/main/docs/src/reference.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h1><p>In this reference, you will find a detailed overview of the package API.</p><blockquote><p>Reference guides are technical descriptions of the machinery and how to operate it. Reference material is information-oriented.</p><p>— <a href="https://diataxis.fr/reference/">Diátaxis</a></p></blockquote><p>In other words, you come here because you want to take a very close look at the code 🧐.</p><h2 id="Content"><a class="docs-heading-anchor" href="#Content">Content</a><a id="Content-1"></a><a class="docs-heading-anchor-permalink" href="#Content" title="Permalink"></a></h2><ul><li><a href="#Reference">Reference</a></li><li class="no-marker"><ul><li><a href="#Content">Content</a></li><li><a href="#Exported-functions">Exported functions</a></li><li><a href="#Internal-functions">Internal functions</a></li></ul></li></ul><h2 id="Exported-functions"><a class="docs-heading-anchor" href="#Exported-functions">Exported functions</a><a id="Exported-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Exported-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.RawOutputArrayType" href="#CounterfactualExplanations.RawOutputArrayType"><code>CounterfactualExplanations.RawOutputArrayType</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RawOutputArrayType</code></pre><p>A type union for the allowed type for the output array <code>y</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L21-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.RawTargetType" href="#CounterfactualExplanations.RawTargetType"><code>CounterfactualExplanations.RawTargetType</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RawTargetType</code></pre><p>A type union for the allowed types for the <code>target</code> variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.flux_training_params" href="#CounterfactualExplanations.flux_training_params"><code>CounterfactualExplanations.flux_training_params</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">flux_training_params</code></pre><p>The default training parameter for <code>FluxModels</code> etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L154-L158">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.CounterfactualExplanation" href="#CounterfactualExplanations.CounterfactualExplanation"><code>CounterfactualExplanations.CounterfactualExplanation</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A struct that collects all information relevant to a specific counterfactual explanation for a single individual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L7-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.CounterfactualExplanation-Tuple{}" href="#CounterfactualExplanations.CounterfactualExplanation-Tuple{}"><code>CounterfactualExplanations.CounterfactualExplanation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function CounterfactualExplanation(;
    x::AbstractArray,
    target::RawTargetType,
    data::CounterfactualData,
    M::Models.AbstractFittedModel,
    generator::Generators.AbstractGenerator,
    T::Int = 100,
    latent_space::Union{Nothing,Bool} = nothing,
    num_counterfactuals::Int = 1,
    initialization::Symbol = :add_perturbation,
    generative_model_params::NamedTuple = (;),
)</code></pre><p>Outer method to construct a <code>CounterfactualExplanation</code> structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L26-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.EncodedOutputArrayType" href="#CounterfactualExplanations.EncodedOutputArrayType"><code>CounterfactualExplanations.EncodedOutputArrayType</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">EncodedOutputArrayType</code></pre><p>Type of encoded output array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L28-L32">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.EncodedTargetType" href="#CounterfactualExplanations.EncodedTargetType"><code>CounterfactualExplanations.EncodedTargetType</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">EncodedTargetType</code></pre><p>Type of encoded target variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.OutputEncoder" href="#CounterfactualExplanations.OutputEncoder"><code>CounterfactualExplanations.OutputEncoder</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">OutputEncoder</code></pre><p>The <code>OutputEncoder</code> takes a raw output array (<code>y</code>) and encodes it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L64-L68">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.OutputEncoder-Tuple{Union{Int64, AbstractFloat, String, Symbol}}" href="#CounterfactualExplanations.OutputEncoder-Tuple{Union{Int64, AbstractFloat, String, Symbol}}"><code>CounterfactualExplanations.OutputEncoder</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">(encoder::OutputEncoder)(ynew::RawTargetType)</code></pre><p>When called on a new value <code>ynew</code>, the <code>OutputEncoder</code> encodes it based on the initial encoding.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L107-L111">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.OutputEncoder-Tuple{}" href="#CounterfactualExplanations.OutputEncoder-Tuple{}"><code>CounterfactualExplanations.OutputEncoder</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">(encoder::OutputEncoder)()</code></pre><p>On call, the <code>OutputEncoder</code> returns the encoded output array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L74-L78">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.animate_path" href="#CounterfactualExplanations.animate_path"><code>CounterfactualExplanations.animate_path</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">animate_path(counterfactual_explanation::CounterfactualExplanation, path=tempdir(); plot_proba::Bool=false, kwargs...)</code></pre><p>Returns and animation of the counterfactual path.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs"># Search:
generator = GenericGenerator()
ce = generate_counterfactual(x, target, counterfactual_data, M, generator)

animate_path(ce)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/plotting.jl#L61-L75">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.converged-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.converged-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.converged</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">converged(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method to determine if the counterfactual search has converged. The search is considered to have converged only if the counterfactual is valid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L534-L538">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.generate_counterfactual-Tuple{AbstractArray, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractFittedModel, AbstractGenerator}" href="#CounterfactualExplanations.generate_counterfactual-Tuple{AbstractArray, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractFittedModel, AbstractGenerator}"><code>CounterfactualExplanations.generate_counterfactual</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">generate_counterfactual(
    x::Union{AbstractArray,Int}, target::RawTargetType, data::CounterfactualData, M::Models.AbstractFittedModel, generator::AbstractGenerator;
    γ::AbstractFloat=0.75, T=1000
)</code></pre><p>The core function that is used to run counterfactual search for a given factual <code>x</code>, target, counterfactual data, model and generator. Keywords can be used to specify the desired threshold for the predicted target class probability and the maximum number of iterations.</p><p><strong>Examples</strong></p><p><strong>Generic generator</strong></p><pre><code class="language-julia-repl hljs">using CounterfactualExplanations

# Data:
using CounterfactualExplanations.Data
using Random
Random.seed!(1234)
xs, ys = Data.toy_data_linear()
X = hcat(xs...)
counterfactual_data = CounterfactualData(X,ys&#39;)

# Model
using CounterfactualExplanations.Models: LogisticModel, probs 
# Logit model:
w = [1.0 1.0] # true coefficients
b = 0
M = LogisticModel(w, [b])

# Randomly selected factual:
x = select_factual(counterfactual_data,rand(1:size(X)[2]))
y = round(probs(M, x)[1])
target = round(probs(M, x)[1])==0 ? 1 : 0 

# Counterfactual search:
generator = GenericGenerator()
counterfactual = generate_counterfactual(x, target, counterfactual_data, M, generator)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generate_counterfactual.jl#L2-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.get_target_index-Tuple{Any, Any}" href="#CounterfactualExplanations.get_target_index-Tuple{Any, Any}"><code>CounterfactualExplanations.get_target_index</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_target_index(y_levels, target)</code></pre><p>Utility that returns the index of <code>target</code> in <code>y_levels</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L131-L135">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.path</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">path(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that returns the entire counterfactual path.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L560-L564">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.target_probs" href="#CounterfactualExplanations.target_probs"><code>CounterfactualExplanations.target_probs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">target_probs(
    counterfactual_explanation::CounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Returns the predicted probability of the target class for <code>x</code>. If <code>x</code> is <code>nothing</code>, the predicted probability corresponding to the counterfactual value is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L492-L499">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.terminated-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.terminated-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.terminated</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">terminated(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method to determine if the counterfactual search has terminated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L525-L529">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.total_steps-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.total_steps-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.total_steps</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">total_steps(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that returns the total number of steps of the counterfactual search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L552-L556">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.update!-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.update!-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.update!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">update!(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>An important subroutine that updates the counterfactual explanation. It takes a snapshot of the current counterfactual search state and passes it to the generator. Based on the current state the generator generates perturbations. Various constraints are then applied to the proposed vector of feature perturbations. Finally, the counterfactual search state is updated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L742-L746">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.default_measures" href="#CounterfactualExplanations.Evaluation.default_measures"><code>CounterfactualExplanations.Evaluation.default_measures</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>The default evaluation measures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/Evaluation.jl#L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.Benchmark" href="#CounterfactualExplanations.Evaluation.Benchmark"><code>CounterfactualExplanations.Evaluation.Benchmark</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A container for benchmarks of counterfactual explations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/benchmark.jl#L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.Benchmark-Tuple{}" href="#CounterfactualExplanations.Evaluation.Benchmark-Tuple{}"><code>CounterfactualExplanations.Evaluation.Benchmark</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">(bmk::Benchmark)(; agg=mean)</code></pre><p>Returns a <code>DataFrame</code> containing evaluation measures aggregated by <code>num_counterfactual</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/benchmark.jl#L11-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.benchmark-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Evaluation.benchmark</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">benchmark(
    data::CounterfactualData;
    models::Dict{Symbol,Any}=model_catalogue,
    generators::Union{Nothing,Dict{&lt;:Any,&lt;:AbstractGenerator}}=nothing,
    measure::Union{Function,Vector{Function}}=default_measures,
    n_individuals::Int=5,
    kwrgs...
)</code></pre><p>Runs the benchmarking exercise as follows:</p><ol><li>Randomly choose a <code>factual</code> and <code>target</code> label. </li><li>If no pretrained <code>models</code> are provided, it is assumed that a dictionary of callable model objects is provided (by default using the <code>model_catalogue</code>). </li><li>Each of these models is then trained on the data. </li><li>For each model separately choose <code>n_individuals</code> randomly from the non-target (<code>factual</code>) class. For each generator create a benchmark as in <a href="@ref"><code>benchmark(x::Union{AbstractArray,Base.Iterators.Zip},...)</code></a>.</li><li>Finally, concatenate the results.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/benchmark.jl#L120-L138">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.benchmark-Tuple{Union{AbstractArray, Base.Iterators.Zip}, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData}" href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{Union{AbstractArray, Base.Iterators.Zip}, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData}"><code>CounterfactualExplanations.Evaluation.benchmark</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">benchmark(
    x::Union{AbstractArray,Base.Iterators.Zip},
    target::RawTargetType,
    data::CounterfactualData;
    models::Dict{&lt;:Any, &lt;:AbstractFittedModel},
    generators::Dict{&lt;:Any, &lt;:AbstractGenerator},
    measure::Union{Function,Vector{Function}}=default_measures,
    kwrgs...
)</code></pre><p>First generates counterfactual explanations for factual <code>x</code>, the <code>target</code> and <code>data</code> using each of the provided <code>models</code> and <code>generators</code>. Then generates a <code>Benchmark</code> for the vector of counterfactual explanations as in <a href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{Vector{CounterfactualExplanation}}"><code>benchmark(counterfactual_explanations::Vector{CounterfactualExplanation})</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/benchmark.jl#L69-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.benchmark-Tuple{Vector{CounterfactualExplanation}}" href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{Vector{CounterfactualExplanation}}"><code>CounterfactualExplanations.Evaluation.benchmark</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">benchmark(
    counterfactual_explanations::Vector{CounterfactualExplanation};
    meta_data::Union{Nothing,&lt;:Vector{&lt;:Dict}}=nothing,
    measure::Union{Function,Vector{Function}}=default_measures
)</code></pre><p>Generates a <code>Benchmark</code> for a vector of counterfactual explanations. Optionally <code>meta_data</code> describing each individual counterfactual explanation can be supplied. This should be a vector of dictionaries of the same length as the vector of counterfactuals. If no <code>meta_data</code> is supplied, it will be automatically inferred. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/benchmark.jl#L46-L54">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.distance" href="#CounterfactualExplanations.Evaluation.distance"><code>CounterfactualExplanations.Evaluation.distance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">distance(counterfactual_explanation::CounterfactualExplanation, p::Real=2)</code></pre><p>Computes the distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/measures.jl#L20-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.evaluate-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.evaluate-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(
    counterfactual_explanation::CounterfactualExplanation;
    measure::Union{Function,Vector{Function}}=default_measures,
    agg::Function=mean,
    report_each::Bool=false,
    output_format::Symbol=:Vector,
    pivot_longer::Bool=true
)</code></pre><p>Just computes evaluation <code>measures</code> for the counterfactual explanation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/Evaluation.jl#L27-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.evaluate-Tuple{Vector{CounterfactualExplanation}}" href="#CounterfactualExplanations.Evaluation.evaluate-Tuple{Vector{CounterfactualExplanation}}"><code>CounterfactualExplanations.Evaluation.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(
    counterfactual_explanations::Vector{CounterfactualExplanation};
    report_meta::Bool=false,
    meta_data::Union{Nothing,&lt;:Vector{&lt;:Dict}}=nothing,
    kwargs...
)</code></pre><p>Computes evaluation <code>measures</code> for a vector of counterfactual explanations. By default, no meta data is reported. For <code>report_meta=true</code>, meta data is automatically inferred, unless this overwritted by <code>meta_data</code>. The optional <code>meta_data</code> argument should be a vector of dictionaries of the same length as the vector of counterfactual explanations. </p><p>Additional <code>kwargs...</code> can be provided (see <a href="@ref"><code>evaluate(counterfactual_explanation::CounterfactualExplanation</code></a> for details).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/Evaluation.jl#L78-L89">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.redundancy-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.redundancy-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.redundancy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">redundancy(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Computes the feature redundancy: that is, the number of features that remain unchanged from their original, factual values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/measures.jl#L60-L64">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.validity-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.validity-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.validity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">validity(counterfactual_explanation::CounterfactualExplanation; γ=0.5)</code></pre><p>Checks of the counterfactual search has been successful with respect to the probability treshold <code>γ</code>. In case multiple counterfactuals were generated, the function returns the proportion of successful counterfactuals.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/measures.jl#L4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.data_catalogue" href="#CounterfactualExplanations.Data.data_catalogue"><code>CounterfactualExplanations.Data.data_catalogue</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>A dictionary that provides an overview of the various benchmark datasets and the methods to load them.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/Data.jl#L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_blobs" href="#CounterfactualExplanations.Data.load_blobs"><code>CounterfactualExplanations.Data.load_blobs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_blobs(n=100; seed=data_seed, kwrgs...)</code></pre><p>Loads overlapping synthtetic data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/synthetic.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_california_housing" href="#CounterfactualExplanations.Data.load_california_housing"><code>CounterfactualExplanations.Data.load_california_housing</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_california_housing(n::Union{Nothing,Int}=5000)</code></pre><p>Loads and pre-processes California Housing data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/tabular.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_circles" href="#CounterfactualExplanations.Data.load_circles"><code>CounterfactualExplanations.Data.load_circles</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_circles(n=100; seed=data_seed, noise=0.15, factor=0.01)</code></pre><p>Loads synthetic circles data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/synthetic.jl#L69-L73">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_credit_default" href="#CounterfactualExplanations.Data.load_credit_default"><code>CounterfactualExplanations.Data.load_credit_default</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_credit_default(n::Union{Nothing,Int}=5000)</code></pre><p>Loads and pre-processes UCI Credit Default data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/tabular.jl#L72-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_gmsc" href="#CounterfactualExplanations.Data.load_gmsc"><code>CounterfactualExplanations.Data.load_gmsc</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_gmsc(n::Union{Nothing,Int}=5000)</code></pre><p>Loads and pre-processes Give Me Some Credit (GMSC) data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/tabular.jl#L41-L45">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_linearly_separable" href="#CounterfactualExplanations.Data.load_linearly_separable"><code>CounterfactualExplanations.Data.load_linearly_separable</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_linearly_separable(n=100; seed=data_seed)</code></pre><p>Loads linearly separable synthtetic data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/synthetic.jl#L22-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_mnist" href="#CounterfactualExplanations.Data.load_mnist"><code>CounterfactualExplanations.Data.load_mnist</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_mnist()</code></pre><p>Loads and prepares MNIST data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/vision.jl#L6-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_mnist_test-Tuple{}" href="#CounterfactualExplanations.Data.load_mnist_test-Tuple{}"><code>CounterfactualExplanations.Data.load_mnist_test</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load_mnist_test()</code></pre><p>Loads and prepares MNIST test data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/vision.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_moons" href="#CounterfactualExplanations.Data.load_moons"><code>CounterfactualExplanations.Data.load_moons</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_moons(n=100; seed=data_seed, kwrgs...)</code></pre><p>Loads synthetic moons data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/synthetic.jl#L86-L90">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_multi_class" href="#CounterfactualExplanations.Data.load_multi_class"><code>CounterfactualExplanations.Data.load_multi_class</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_multi_class(n=100; seed=data_seed)</code></pre><p>Loads multi-class synthtetic data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/synthetic.jl#L50-L54">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_overlapping" href="#CounterfactualExplanations.Data.load_overlapping"><code>CounterfactualExplanations.Data.load_overlapping</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_overlapping(n=100; seed=data_seed)</code></pre><p>Loads overlapping synthtetic data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/synthetic.jl#L36-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Data.load_synthetic_data" href="#CounterfactualExplanations.Data.load_synthetic_data"><code>CounterfactualExplanations.Data.load_synthetic_data</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_synthetic_data(n=100; seed=data_seed)</code></pre><p>Loads all synthetic datasets and wraps them in a dictionary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data/synthetic.jl#L103-L107">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.CounterfactualData-Tuple{AbstractMatrix, AbstractVecOrMat}" href="#CounterfactualExplanations.DataPreprocessing.CounterfactualData-Tuple{AbstractMatrix, AbstractVecOrMat}"><code>CounterfactualExplanations.DataPreprocessing.CounterfactualData</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">CounterfactualData(
    X::AbstractMatrix, y::AbstractMatrix;
    mutability::Union{Vector{Symbol},Nothing}=nothing,
    domain::Union{Any,Nothing}=nothing,
    features_categorical::Union{Vector{Int},Nothing}=nothing,
    features_continuous::Union{Vector{Int},Nothing}=nothing,
    standardize::Bool=false
)</code></pre><p>This outer constructor method prepares features <code>X</code> and labels <code>y</code> to be used with the package. Mutability and domain constraints can be added for the features. The function also accepts arguments that specify which features are categorical and which are continues. These arguments are currently not used. </p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">using CounterfactualExplanations.Data
x, y = toy_data_linear()
X = hcat(x...)
counterfactual_data = CounterfactualData(X,y&#39;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L80-L101">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.CounterfactualData-Tuple{Tables.MatrixTable, AbstractVecOrMat}" href="#CounterfactualExplanations.DataPreprocessing.CounterfactualData-Tuple{Tables.MatrixTable, AbstractVecOrMat}"><code>CounterfactualExplanations.DataPreprocessing.CounterfactualData</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function CounterfactualData(
    X::Tables.MatrixTable,
    y::RawOutputArrayType;
    kwrgs...
)</code></pre><p>Outer constructor method that accepts a <code>Tables.MatrixTable</code>. By default, the indices of categorical and continuous features are automatically inferred the features&#39; <code>scitype</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L161-L170">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.apply_domain_constraints-Tuple{CounterfactualData, AbstractArray}" href="#CounterfactualExplanations.DataPreprocessing.apply_domain_constraints-Tuple{CounterfactualData, AbstractArray}"><code>CounterfactualExplanations.DataPreprocessing.apply_domain_constraints</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">apply_domain_constraints(counterfactual_data::CounterfactualData, x::AbstractArray)</code></pre><p>A subroutine that is used to apply the predetermined domain constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L254-L258">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.select_factual-Tuple{CounterfactualData, Int64}" href="#CounterfactualExplanations.DataPreprocessing.select_factual-Tuple{CounterfactualData, Int64}"><code>CounterfactualExplanations.DataPreprocessing.select_factual</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">select_factual(counterfactual_data::CounterfactualData, index::Int)</code></pre><p>A convenience method that can be used to access the the feature matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L186-L190">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.transformable_features</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">transformable_features(counterfactual_data::CounterfactualData)</code></pre><p>Returns the indices of all continuous features that can be transformed. For constant features <code>ZScoreTransform</code> returns <code>NaN</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L230-L234">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.model_catalogue" href="#CounterfactualExplanations.Models.model_catalogue"><code>CounterfactualExplanations.Models.model_catalogue</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">model_catalogue</code></pre><p>A dictionary containing all trainable machine learning models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/Models.jl#L36-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractDifferentiableModel" href="#CounterfactualExplanations.Models.AbstractDifferentiableModel"><code>CounterfactualExplanations.Models.AbstractDifferentiableModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Base type for differentiable models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/differentiable.jl#L2-L4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractFittedModel" href="#CounterfactualExplanations.Models.AbstractFittedModel"><code>CounterfactualExplanations.Models.AbstractFittedModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Base type for fitted models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/Models.jl#L12-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.FluxEnsemble" href="#CounterfactualExplanations.Models.FluxEnsemble"><code>CounterfactualExplanations.Models.FluxEnsemble</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FluxEnsemble &lt;: AbstractDifferentiableJuliaModel</code></pre><p>Constructor for deep ensembles trained in <code>Flux.jl</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_ensemble.jl#L6-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.FluxModel" href="#CounterfactualExplanations.Models.FluxModel"><code>CounterfactualExplanations.Models.FluxModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FluxModel &lt;: AbstractDifferentiableJuliaModel</code></pre><p>Constructor for models trained in <code>Flux.jl</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_mlp.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.FluxModel-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Models.FluxModel-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Models.FluxModel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">FluxModel(data::CounterfactualData; kwargs...)</code></pre><p>Constructs a multi-layer perceptron (MLP).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_mlp.jl#L170-L174">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.LaplaceReduxModel" href="#CounterfactualExplanations.Models.LaplaceReduxModel"><code>CounterfactualExplanations.Models.LaplaceReduxModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LaplaceReduxModel &lt;: AbstractDifferentiableJuliaModel</code></pre><p>Constructor for <code>LaplaceRedux.jl</code> model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/laplace_redux.jl#L4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.Linear-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Models.Linear-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Models.Linear</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Linear(data::CounterfactualData; kwargs...)</code></pre><p>Constructs a model with one linear layer. If the output is binary, this corresponds to logistic regression, since model outputs are passed through the sigmoid function. If the output is multi-class, this corresponds to multinomial logistic regression, since model outputs are passed through the softmax function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_mlp.jl#L190-L194">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.fit_model" href="#CounterfactualExplanations.Models.fit_model"><code>CounterfactualExplanations.Models.fit_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fit_model(
    counterfactual_data::CounterfactualData, model::Symbol=:MLP;
    kwrgs...
)</code></pre><p>Fits one of the available default models to the <code>counterfactual_data</code>. The <code>model</code> argument can be used to specify the desired model. The available values correspond to the keys of the <a href="#CounterfactualExplanations.Models.model_catalogue"><code>model_catalogue</code></a> dictionary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/Models.jl#L44-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.logits-Tuple{AbstractFittedModel, AbstractArray}" href="#CounterfactualExplanations.Models.logits-Tuple{AbstractFittedModel, AbstractArray}"><code>CounterfactualExplanations.Models.logits</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">logits(M::AbstractFittedModel, X::AbstractArray)</code></pre><p>Generic method that is compulsory for all models. It returns the raw model predictions. In classification this is sometimes referred to as <em>logits</em>: the non-normalized predictions that are fed into a link function to produce predicted probabilities. In regression (not currently implemented) raw outputs typically correspond to final outputs. In other words, there is typically no normalization involved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/Models.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.model_evaluation-Tuple{AbstractFittedModel, CounterfactualData}" href="#CounterfactualExplanations.Models.model_evaluation-Tuple{AbstractFittedModel, CounterfactualData}"><code>CounterfactualExplanations.Models.model_evaluation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">model_evaluation(M::AbstractFittedModel, test_data::CounterfactualData)</code></pre><p>Helper function to compute F-Score for <code>AbstractFittedModel</code> on a (test) data set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/model_utils.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.predict_label-Tuple{AbstractFittedModel, CounterfactualData, AbstractArray}" href="#CounterfactualExplanations.Models.predict_label-Tuple{AbstractFittedModel, CounterfactualData, AbstractArray}"><code>CounterfactualExplanations.Models.predict_label</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">predict_label(M::AbstractFittedModel, counterfactual_data::CounterfactualData, X::AbstractArray)</code></pre><p>Returns the predicted output label for a given model <code>M</code>, data set <code>counterfactual_data</code> and input data <code>X</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/model_utils.jl#L51-L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.predict_label-Tuple{AbstractFittedModel, CounterfactualData}" href="#CounterfactualExplanations.Models.predict_label-Tuple{AbstractFittedModel, CounterfactualData}"><code>CounterfactualExplanations.Models.predict_label</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">predict_label(M::AbstractFittedModel, counterfactual_data::CounterfactualData)</code></pre><p>Returns the predicted output labels for all data points of data set <code>counterfactual_data</code> for a given model <code>M</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/model_utils.jl#L67-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.predict_proba-Tuple{AbstractFittedModel, CounterfactualData, Union{Nothing, AbstractArray}}" href="#CounterfactualExplanations.Models.predict_proba-Tuple{AbstractFittedModel, CounterfactualData, Union{Nothing, AbstractArray}}"><code>CounterfactualExplanations.Models.predict_proba</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">predict_proba(M::AbstractFittedModel, counterfactual_data::CounterfactualData, X::Union{Nothing,AbstractArray})</code></pre><p>Returns the predicted output probabilities for a given model <code>M</code>, data set <code>counterfactual_data</code> and input data <code>X</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/model_utils.jl#L27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.probs-Tuple{AbstractFittedModel, AbstractArray}" href="#CounterfactualExplanations.Models.probs-Tuple{AbstractFittedModel, AbstractArray}"><code>CounterfactualExplanations.Models.probs</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">probs(M::AbstractFittedModel, X::AbstractArray)</code></pre><p>Generic method that is compulsory for all models. It returns the normalized model predictions, so the predicted probabilities in the case of classifiation. In regression (not currently implemented) this method is redundant. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/Models.jl#L24-L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.generator_catalogue" href="#CounterfactualExplanations.Generators.generator_catalogue"><code>CounterfactualExplanations.Generators.generator_catalogue</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>A dictionary countaining the contructors of all available counterfactual generators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/Generators.jl#L75">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.AbstractGenerator" href="#CounterfactualExplanations.Generators.AbstractGenerator"><code>CounterfactualExplanations.Generators.AbstractGenerator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractGenerator</code></pre><p>An abstract type that serves as the base type for counterfactual generators. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/Generators.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.AbstractGradientBasedGenerator" href="#CounterfactualExplanations.Generators.AbstractGradientBasedGenerator"><code>CounterfactualExplanations.Generators.AbstractGradientBasedGenerator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractGradientBasedGenerator</code></pre><p>An abstract type that serves as the base type for gradient-based counterfactual generators. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L6-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.ClaPROARGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.ClaPROARGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.ClaPROARGenerator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ClaPROARGenerator(
    ;
    loss::Symbol=:logitbinarycrossentropy,
    complexity::Function=norm,
    λ::AbstractFloat=0.1,
    opt::Flux.Optimise.AbstractOptimiser=Flux.Optimise.Descent(),
    τ::AbstractFloat=1e-5
)</code></pre><p>An outer constructor method that instantiates a generic generator.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">generator = ClaPROARGenerator()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/ClapROARGenerator.jl#L23-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.DiCEGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.DiCEGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.DiCEGenerator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">DiCEGenerator(
    ;
    loss::Symbol=:logitbinarycrossentropy,
    complexity::Function=LinearAlgebra.norm,
    λ::AbstractFloat=0.1,
    opt::Flux.Optimise.AbstractOptimiser=Flux.Optimise.Descent(),
    τ::AbstractFloat=1e-5
)</code></pre><p>An outer constructor method that instantiates a generic generator.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">generator = DiCEGenerator()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/DICEGenerator.jl#L20-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.GenericGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.GenericGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.GenericGenerator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">GenericGenerator(
    ;
    loss::Symbol=:logitbinarycrossentropy,
    complexity::Function=LinearAlgebra.norm,
    λ::AbstractFloat=0.1,
    opt::Flux.Optimise.AbstractOptimiser=Flux.Optimise.Descent(),
    τ::AbstractFloat=1e-5
)</code></pre><p>An outer constructor method that instantiates a generic generator.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">generator = GenericGenerator()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/GenericGenerator.jl#L21-L37">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.GravitationalGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.GravitationalGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.GravitationalGenerator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">GravitationalGenerator(
    ;
    loss::Symbol=:logitbinarycrossentropy,
    complexity::Function=norm,
    λ::AbstractFloat=0.1,
    opt::Flux.Optimise.AbstractOptimiser=Flux.Optimise.Descent(),
    τ::AbstractFloat=1e-5
)</code></pre><p>An outer constructor method that instantiates a generic generator.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">generator = GravitationalGenerator()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/GravitationalGenerator.jl#L26-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.GreedyGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.GreedyGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.GreedyGenerator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">GreedyGenerator(;
    loss::Union{Nothing,Symbol}=nothing,
    complexity::Function=LinearAlgebra.norm,
    λ::AbstractFloat=0.0,
    decision_threshold=0.5,
    opt::Union{Nothing,Flux.Optimise.AbstractOptimiser}, # learning rate
    kwargs...
)</code></pre><p>An outer constructor method that instantiates a greedy generator.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">generator = GreedyGenerator()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/GreedyGenerator.jl#L24-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.REVISEGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.REVISEGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.REVISEGenerator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">REVISEGenerator(
    ;
    loss::Symbol=:logitbinarycrossentropy,
    complexity::Function=LinearAlgebra.norm,
    λ::AbstractFloat=0.1,
    opt::Flux.Optimise.AbstractOptimiser=Flux.Optimise.Descent(),
    τ::AbstractFloat=1e-5
)</code></pre><p>An outer constructor method that instantiates a REVISE generator.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">generator = REVISEGenerator()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/REVISEGenerator.jl#L20-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.conditions_satisified-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.conditions_satisified-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.conditions_satisified</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">conditions_satisified(generator::AbstractGradientBasedGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to check if the all conditions for convergence of the counterfactual search have been satisified for gradient-based generators. By default, gradient-based search is considered to have converged as soon as the proposed feature changes for all features are smaller than one percent of its standard deviation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L114-L118">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.generate_perturbations-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.generate_perturbations-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.generate_perturbations</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">generate_perturbations(generator::AbstractGradientBasedGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to generate feature perturbations for gradient-based generators through simple gradient descent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.generate_perturbations-Tuple{GreedyGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.generate_perturbations-Tuple{GreedyGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.generate_perturbations</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">generate_perturbations(generator::GreedyGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to generate perturbations for a greedy generator. Only the most salient feature is perturbed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/GreedyGenerator.jl#L94-L98">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.mutability_constraints-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.mutability_constraints-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.mutability_constraints</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mutability_constraints(generator::AbstractGradientBasedGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to return mutability constraints that are dependent on the current counterfactual search state. For generic gradient-based generators, no state-dependent constraints are added.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L101-L105">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.mutability_constraints-Tuple{GreedyGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.mutability_constraints-Tuple{GreedyGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.mutability_constraints</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mutability_constraints(generator::GreedyGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to return search state dependent mutability constraints for a greedy generator. Features that have been perturbed <code>n</code> times already can no longer be perturbed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/GreedyGenerator.jl#L122-L126">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.binary_focal_loss-Tuple{Any, Any}" href="#Flux.Losses.binary_focal_loss-Tuple{Any, Any}"><code>Flux.Losses.binary_focal_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">binary_focal_loss(ŷ, y; agg=mean, γ=2, ϵ=eps(ŷ))</code></pre><p>Return the <a href="https://arxiv.org/pdf/1708.02002.pdf">binary<em>focal</em>loss</a> The input, &#39;ŷ&#39;, is expected to be normalized (i.e. <a href="@ref Softmax">softmax</a> output).</p><p>For <code>γ == 0</code>, the loss is mathematically equivalent to <a href="#Flux.Losses.binarycrossentropy-Tuple{Any, Any}"><code>Losses.binarycrossentropy</code></a>.</p><p>See also: <a href="#Flux.Losses.focal_loss-Tuple{Any, Any}"><code>Losses.focal_loss</code></a> for multi-class setting</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y = [0  1  0
            1  0  1]
2×3 Matrix{Int64}:
 0  1  0
 1  0  1

julia&gt; ŷ = [0.268941  0.5  0.268941
            0.731059  0.5  0.731059]
2×3 Matrix{Float64}:
 0.268941  0.5  0.268941
 0.731059  0.5  0.731059

julia&gt; Flux.binary_focal_loss(ŷ, y) ≈ 0.0728675615927385
true</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.binarycrossentropy-Tuple{Any, Any}" href="#Flux.Losses.binarycrossentropy-Tuple{Any, Any}"><code>Flux.Losses.binarycrossentropy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">binarycrossentropy(ŷ, y; agg = mean, ϵ = eps(ŷ))</code></pre><p>Return the binary cross-entropy loss, computed as</p><pre><code class="nohighlight hljs">agg(@.(-y * log(ŷ + ϵ) - (1 - y) * log(1 - ŷ + ϵ)))</code></pre><p>Where typically, the prediction <code>ŷ</code> is given by the output of a <a href="@ref man-activations">sigmoid</a> activation. The <code>ϵ</code> term is included to avoid infinity. Using <a href="#Flux.Losses.logitbinarycrossentropy-Tuple{Any, Any}"><code>logitbinarycrossentropy</code></a> is recomended over <code>binarycrossentropy</code> for numerical stability.</p><p>Use <a href="#Flux.Losses.label_smoothing-Tuple{Union{Number, AbstractArray}, Number}"><code>label_smoothing</code></a> to smooth the <code>y</code> value as preprocessing before computing the loss.</p><p>See also: <a href="#Flux.Losses.crossentropy-Tuple{Any, Any}"><code>crossentropy</code></a>, <a href="#Flux.Losses.logitcrossentropy-Tuple{Any, Any}"><code>logitcrossentropy</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_bin = Bool[1,0,1]
3-element Vector{Bool}:
 1
 0
 1

julia&gt; y_prob = softmax(reshape(vcat(1:3, 3:5), 2, 3) .* 1f0)
2×3 Matrix{Float32}:
 0.268941  0.5  0.268941
 0.731059  0.5  0.731059

julia&gt; Flux.binarycrossentropy(y_prob[2,:], y_bin)
0.43989f0

julia&gt; all(p -&gt; 0 &lt; p &lt; 1, y_prob[2,:])  # else DomainError
true

julia&gt; y_hot = Flux.onehotbatch(y_bin, 0:1)
2×3 OneHotMatrix(::Vector{UInt32}) with eltype Bool:
 ⋅  1  ⋅
 1  ⋅  1

julia&gt; Flux.crossentropy(y_prob, y_hot)
0.43989f0</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.crossentropy-Tuple{Any, Any}" href="#Flux.Losses.crossentropy-Tuple{Any, Any}"><code>Flux.Losses.crossentropy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">crossentropy(ŷ, y; dims = 1, ϵ = eps(ŷ), agg = mean)</code></pre><p>Return the cross entropy between the given probability distributions; calculated as</p><pre><code class="nohighlight hljs">agg(-sum(y .* log.(ŷ .+ ϵ); dims))</code></pre><p>Cross entropy is typically used as a loss in multi-class classification, in which case the labels <code>y</code> are given in a one-hot format. <code>dims</code> specifies the dimension (or the dimensions) containing the class probabilities. The prediction <code>ŷ</code> is supposed to sum to one across <code>dims</code>, as would be the case with the output of a <a href="@ref Softmax">softmax</a> operation.</p><p>For numerical stability, it is recommended to use <a href="#Flux.Losses.logitcrossentropy-Tuple{Any, Any}"><code>logitcrossentropy</code></a> rather than <code>softmax</code> followed by <code>crossentropy</code> .</p><p>Use <a href="#Flux.Losses.label_smoothing-Tuple{Union{Number, AbstractArray}, Number}"><code>label_smoothing</code></a> to smooth the true labels as preprocessing before computing the loss.</p><p>See also: <a href="#Flux.Losses.logitcrossentropy-Tuple{Any, Any}"><code>logitcrossentropy</code></a>, <a href="#Flux.Losses.binarycrossentropy-Tuple{Any, Any}"><code>binarycrossentropy</code></a>, <a href="#Flux.Losses.logitbinarycrossentropy-Tuple{Any, Any}"><code>logitbinarycrossentropy</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_label = Flux.onehotbatch([0, 1, 2, 1, 0], 0:2)
3×5 OneHotMatrix(::Vector{UInt32}) with eltype Bool:
 1  ⋅  ⋅  ⋅  1
 ⋅  1  ⋅  1  ⋅
 ⋅  ⋅  1  ⋅  ⋅

julia&gt; y_model = softmax(reshape(-7:7, 3, 5) .* 1f0)
3×5 Matrix{Float32}:
 0.0900306  0.0900306  0.0900306  0.0900306  0.0900306
 0.244728   0.244728   0.244728   0.244728   0.244728
 0.665241   0.665241   0.665241   0.665241   0.665241

julia&gt; sum(y_model; dims=1)
1×5 Matrix{Float32}:
 1.0  1.0  1.0  1.0  1.0

julia&gt; Flux.crossentropy(y_model, y_label)
1.6076053f0

julia&gt; 5 * ans ≈ Flux.crossentropy(y_model, y_label; agg=sum)
true

julia&gt; y_smooth = Flux.label_smoothing(y_label, 0.15f0)
3×5 Matrix{Float32}:
 0.9   0.05  0.05  0.05  0.9
 0.05  0.9   0.05  0.9   0.05
 0.05  0.05  0.9   0.05  0.05

julia&gt; Flux.crossentropy(y_model, y_smooth)
1.5776052f0</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.dice_coeff_loss-Tuple{Any, Any}" href="#Flux.Losses.dice_coeff_loss-Tuple{Any, Any}"><code>Flux.Losses.dice_coeff_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dice_coeff_loss(ŷ, y; smooth = 1)</code></pre><p>Return a loss based on the dice coefficient. Used in the <a href="https://arxiv.org/abs/1606.04797">V-Net</a> image segmentation architecture. The dice coefficient is similar to the F1_score. Loss calculated as:</p><pre><code class="nohighlight hljs">1 - 2*sum(|ŷ .* y| + smooth) / (sum(ŷ.^2) + sum(y.^2) + smooth)</code></pre><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_pred = [1.1, 2.1, 3.1];

julia&gt; Flux.dice_coeff_loss(y_pred, 1:3)
0.000992391663909964

julia&gt; 1 - Flux.dice_coeff_loss(y_pred, 1:3)  # ~ F1 score for image segmentation
0.99900760833609</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.focal_loss-Tuple{Any, Any}" href="#Flux.Losses.focal_loss-Tuple{Any, Any}"><code>Flux.Losses.focal_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">focal_loss(ŷ, y; dims=1, agg=mean, γ=2, ϵ=eps(ŷ))</code></pre><p>Return the <a href="https://arxiv.org/pdf/1708.02002.pdf">focal_loss</a> which can be used in classification tasks with highly imbalanced classes. It down-weights well-classified examples and focuses on hard examples. The input, &#39;ŷ&#39;, is expected to be normalized (i.e. <a href="@ref Softmax">softmax</a> output).</p><p>The modulating factor, <code>γ</code>, controls the down-weighting strength. For <code>γ == 0</code>, the loss is mathematically equivalent to <a href="#Flux.Losses.crossentropy-Tuple{Any, Any}"><code>Losses.crossentropy</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y = [1  0  0  0  1
            0  1  0  1  0
            0  0  1  0  0]
3×5 Matrix{Int64}:
 1  0  0  0  1
 0  1  0  1  0
 0  0  1  0  0

julia&gt; ŷ = softmax(reshape(-7:7, 3, 5) .* 1f0)
3×5 Matrix{Float32}:
 0.0900306  0.0900306  0.0900306  0.0900306  0.0900306
 0.244728   0.244728   0.244728   0.244728   0.244728
 0.665241   0.665241   0.665241   0.665241   0.665241

julia&gt; Flux.focal_loss(ŷ, y) ≈ 1.1277571935622628
true</code></pre><p>See also: <a href="#Flux.Losses.binary_focal_loss-Tuple{Any, Any}"><code>Losses.binary_focal_loss</code></a> for binary (not one-hot) labels</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.hinge_loss-Tuple{Any, Any}" href="#Flux.Losses.hinge_loss-Tuple{Any, Any}"><code>Flux.Losses.hinge_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">hinge_loss(ŷ, y; agg = mean)</code></pre><p>Return the <a href="https://en.wikipedia.org/wiki/Hinge_loss">hinge_loss</a> given the prediction <code>ŷ</code> and true labels <code>y</code> (containing 1 or -1); calculated as</p><pre><code class="nohighlight hljs">sum(max.(0, 1 .- ŷ .* y)) / size(y, 2)</code></pre><p>Usually used with classifiers like Support Vector Machines. See also: <a href="#Flux.Losses.squared_hinge_loss-Tuple{Any, Any}"><code>squared_hinge_loss</code></a></p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_true = [1, -1, 1, 1];

julia&gt; y_pred = [0.1, 0.3, 1, 1.5];

julia&gt; Flux.hinge_loss(y_pred, y_true)
0.55

julia&gt; Flux.hinge_loss(y_pred[1], y_true[1]) != 0  # same sign but |ŷ| &lt; 1
true

julia&gt; Flux.hinge_loss(y_pred[end], y_true[end]) == 0  # same sign but |ŷ| &gt;= 1
true

julia&gt; Flux.hinge_loss(y_pred[2], y_true[2]) != 0 # opposite signs
true</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.huber_loss-Tuple{Any, Any}" href="#Flux.Losses.huber_loss-Tuple{Any, Any}"><code>Flux.Losses.huber_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">huber_loss(ŷ, y; δ = 1, agg = mean)</code></pre><p>Return the mean of the <a href="https://en.wikipedia.org/wiki/Huber_loss">Huber loss</a> given the prediction <code>ŷ</code> and true values <code>y</code>.</p><pre><code class="nohighlight hljs">             | 0.5 * |ŷ - y|^2,            for |ŷ - y| &lt;= δ
Huber loss = |
             |  δ * (|ŷ - y| - 0.5 * δ), otherwise</code></pre><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; ŷ = [1.1, 2.1, 3.1];

julia&gt; Flux.huber_loss(ŷ, 1:3)  # default δ = 1 &gt; |ŷ - y|
0.005000000000000009

julia&gt; Flux.huber_loss(ŷ, 1:3, δ=0.05)  # changes behaviour as |ŷ - y| &gt; δ
0.003750000000000005</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.kldivergence-Tuple{Any, Any}" href="#Flux.Losses.kldivergence-Tuple{Any, Any}"><code>Flux.Losses.kldivergence</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">kldivergence(ŷ, y; agg = mean, ϵ = eps(ŷ))</code></pre><p>Return the <a href="https://en.wikipedia.org/wiki/Kullback%E2%80%93Leibler_divergence">Kullback-Leibler divergence</a> between the given probability distributions.</p><p>The KL divergence is a measure of how much one probability distribution is different from the other. It is always non-negative, and zero only when both the distributions are equal.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; p1 = [1 0; 0 1]
2×2 Matrix{Int64}:
 1  0
 0  1

julia&gt; p2 = fill(0.5, 2, 2)
2×2 Matrix{Float64}:
 0.5  0.5
 0.5  0.5

julia&gt; Flux.kldivergence(p2, p1) ≈ log(2)
true

julia&gt; Flux.kldivergence(p2, p1; agg = sum) ≈ 2log(2)
true

julia&gt; Flux.kldivergence(p2, p2; ϵ = 0)  # about -2e-16 with the regulator
0.0

julia&gt; Flux.kldivergence(p1, p2; ϵ = 0)  # about 17.3 with the regulator
Inf</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.label_smoothing-Tuple{Union{Number, AbstractArray}, Number}" href="#Flux.Losses.label_smoothing-Tuple{Union{Number, AbstractArray}, Number}"><code>Flux.Losses.label_smoothing</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">label_smoothing(y::Union{Number, AbstractArray}, α; dims::Int=1)</code></pre><p>Returns smoothed labels, meaning the confidence on label values are relaxed.</p><p>When <code>y</code> is given as one-hot vector or batch of one-hot, its calculated as</p><pre><code class="nohighlight hljs">y .* (1 - α) .+ α / size(y, dims)</code></pre><p>when <code>y</code> is given as a number or batch of numbers for binary classification, its calculated as</p><pre><code class="nohighlight hljs">y .* (1 - α) .+ α / 2</code></pre><p>in which case the labels are squeezed towards <code>0.5</code>.</p><p>α is a number in interval (0, 1) called the smoothing factor. Higher the value of α larger the smoothing of <code>y</code>.</p><p><code>dims</code> denotes the one-hot dimension, unless <code>dims=0</code> which denotes the application of label smoothing to binary distributions encoded in a single number.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y = Flux.onehotbatch([1, 1, 1, 0, 1, 0], 0:1)
2×6 OneHotMatrix(::Vector{UInt32}) with eltype Bool:
 ⋅  ⋅  ⋅  1  ⋅  1
 1  1  1  ⋅  1  ⋅

julia&gt; y_smoothed = Flux.label_smoothing(y, 0.2f0)
2×6 Matrix{Float32}:
 0.1  0.1  0.1  0.9  0.1  0.9
 0.9  0.9  0.9  0.1  0.9  0.1

julia&gt; y_sim = softmax(y .* log(2f0))
2×6 Matrix{Float32}:
 0.333333  0.333333  0.333333  0.666667  0.333333  0.666667
 0.666667  0.666667  0.666667  0.333333  0.666667  0.333333

julia&gt; y_dis = vcat(y_sim[2,:]&#39;, y_sim[1,:]&#39;)
2×6 Matrix{Float32}:
 0.666667  0.666667  0.666667  0.333333  0.666667  0.333333
 0.333333  0.333333  0.333333  0.666667  0.333333  0.666667

julia&gt; Flux.crossentropy(y_sim, y) &lt; Flux.crossentropy(y_sim, y_smoothed)
true

julia&gt; Flux.crossentropy(y_dis, y) &gt; Flux.crossentropy(y_dis, y_smoothed)
true</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.logitbinarycrossentropy-Tuple{Any, Any}" href="#Flux.Losses.logitbinarycrossentropy-Tuple{Any, Any}"><code>Flux.Losses.logitbinarycrossentropy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">logitbinarycrossentropy(ŷ, y; agg = mean)</code></pre><p>Mathematically equivalent to <a href="#Flux.Losses.binarycrossentropy-Tuple{Any, Any}"><code>binarycrossentropy(σ(ŷ), y)</code></a> but is more numerically stable.</p><p>See also: <a href="#Flux.Losses.crossentropy-Tuple{Any, Any}"><code>crossentropy</code></a>, <a href="#Flux.Losses.logitcrossentropy-Tuple{Any, Any}"><code>logitcrossentropy</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_bin = Bool[1,0,1];

julia&gt; y_model = Float32[2, -1, pi]
3-element Vector{Float32}:
  2.0
 -1.0
  3.1415927

julia&gt; Flux.logitbinarycrossentropy(y_model, y_bin)
0.160832f0

julia&gt; Flux.binarycrossentropy(sigmoid.(y_model), y_bin)
0.16083185f0</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.logitcrossentropy-Tuple{Any, Any}" href="#Flux.Losses.logitcrossentropy-Tuple{Any, Any}"><code>Flux.Losses.logitcrossentropy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">logitcrossentropy(ŷ, y; dims = 1, agg = mean)</code></pre><p>Return the cross entropy calculated by</p><pre><code class="nohighlight hljs">agg(-sum(y .* logsoftmax(ŷ; dims); dims))</code></pre><p>This is mathematically equivalent to <code>crossentropy(softmax(ŷ), y)</code>, but is more numerically stable than using functions <a href="#Flux.Losses.crossentropy-Tuple{Any, Any}"><code>crossentropy</code></a> and <a href="@ref Softmax">softmax</a> separately.</p><p>See also: <a href="#Flux.Losses.binarycrossentropy-Tuple{Any, Any}"><code>binarycrossentropy</code></a>, <a href="#Flux.Losses.logitbinarycrossentropy-Tuple{Any, Any}"><code>logitbinarycrossentropy</code></a>, <a href="#Flux.Losses.label_smoothing-Tuple{Union{Number, AbstractArray}, Number}"><code>label_smoothing</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_label = Flux.onehotbatch(collect(&quot;abcabaa&quot;), &#39;a&#39;:&#39;c&#39;)
3×7 OneHotMatrix(::Vector{UInt32}) with eltype Bool:
 1  ⋅  ⋅  1  ⋅  1  1
 ⋅  1  ⋅  ⋅  1  ⋅  ⋅
 ⋅  ⋅  1  ⋅  ⋅  ⋅  ⋅

julia&gt; y_model = reshape(vcat(-9:0, 0:9, 7.5f0), 3, 7)
3×7 Matrix{Float32}:
 -9.0  -6.0  -3.0  0.0  2.0  5.0  8.0
 -8.0  -5.0  -2.0  0.0  3.0  6.0  9.0
 -7.0  -4.0  -1.0  1.0  4.0  7.0  7.5

julia&gt; Flux.logitcrossentropy(y_model, y_label)
1.5791205f0

julia&gt; Flux.crossentropy(softmax(y_model), y_label)
1.5791197f0</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.mae-Tuple{Any, Any}" href="#Flux.Losses.mae-Tuple{Any, Any}"><code>Flux.Losses.mae</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mae(ŷ, y; agg = mean)</code></pre><p>Return the loss corresponding to mean absolute error:</p><pre><code class="nohighlight hljs">agg(abs.(ŷ .- y))</code></pre><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_model = [1.1, 1.9, 3.1];

julia&gt; Flux.mae(y_model, 1:3)
0.10000000000000009</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.mse-Tuple{Any, Any}" href="#Flux.Losses.mse-Tuple{Any, Any}"><code>Flux.Losses.mse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mse(ŷ, y; agg = mean)</code></pre><p>Return the loss corresponding to mean square error:</p><pre><code class="nohighlight hljs">agg((ŷ .- y) .^ 2)</code></pre><p>See also: <a href="#Flux.Losses.mae-Tuple{Any, Any}"><code>mae</code></a>, <a href="#Flux.Losses.msle-Tuple{Any, Any}"><code>msle</code></a>, <a href="#Flux.Losses.crossentropy-Tuple{Any, Any}"><code>crossentropy</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_model = [1.1, 1.9, 3.1];

julia&gt; y_true = 1:3;

julia&gt; Flux.mse(y_model, y_true)
0.010000000000000018</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.msle-Tuple{Any, Any}" href="#Flux.Losses.msle-Tuple{Any, Any}"><code>Flux.Losses.msle</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">msle(ŷ, y; agg = mean, ϵ = eps(ŷ))</code></pre><p>The loss corresponding to mean squared logarithmic errors, calculated as</p><pre><code class="nohighlight hljs">agg((log.(ŷ .+ ϵ) .- log.(y .+ ϵ)) .^ 2)</code></pre><p>The <code>ϵ</code> term provides numerical stability. Penalizes an under-estimation more than an over-estimatation.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; Flux.msle(Float32[1.1, 2.2, 3.3], 1:3)
0.009084041f0

julia&gt; Flux.msle(Float32[0.9, 1.8, 2.7], 1:3)
0.011100831f0</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.poisson_loss-Tuple{Any, Any}" href="#Flux.Losses.poisson_loss-Tuple{Any, Any}"><code>Flux.Losses.poisson_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">poisson_loss(ŷ, y; agg = mean)</code></pre><p>Return how much the predicted distribution <code>ŷ</code> diverges from the expected Poisson distribution <code>y</code>; calculated as -</p><pre><code class="nohighlight hljs">sum(ŷ .- y .* log.(ŷ)) / size(y, 2)</code></pre><p><a href="https://peltarion.com/knowledge-center/documentation/modeling-view/build-an-ai-model/loss-functions/poisson">More information.</a>.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; y_model = [1, 3, 3];  # data should only take integral values

julia&gt; Flux.poisson_loss(y_model, 1:3)
0.5023128522198171</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.siamese_contrastive_loss-Tuple{Any, Any}" href="#Flux.Losses.siamese_contrastive_loss-Tuple{Any, Any}"><code>Flux.Losses.siamese_contrastive_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">siamese_contrastive_loss(ŷ, y; margin = 1, agg = mean)</code></pre><p>Return the <a href="http://yann.lecun.com/exdb/publis/pdf/hadsell-chopra-lecun-06.pdf">contrastive loss</a> which can be useful for training Siamese Networks. It is given by</p><pre><code class="nohighlight hljs">agg(@. (1 - y) * ŷ^2 + y * max(0, margin - ŷ)^2)</code></pre><p>Specify <code>margin</code> to set the baseline for distance at which pairs are dissimilar.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; ŷ = [0.5, 1.5, 2.5];

julia&gt; Flux.siamese_contrastive_loss(ŷ, 1:3)
-4.833333333333333

julia&gt; Flux.siamese_contrastive_loss(ŷ, 1:3, margin = 2)
-4.0</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.squared_hinge_loss-Tuple{Any, Any}" href="#Flux.Losses.squared_hinge_loss-Tuple{Any, Any}"><code>Flux.Losses.squared_hinge_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">squared_hinge_loss(ŷ, y)</code></pre><p>Return the squared hinge_loss loss given the prediction <code>ŷ</code> and true labels <code>y</code> (containing 1 or -1); calculated as</p><pre><code class="nohighlight hljs">sum((max.(0, 1 .- ŷ .* y)).^2) / size(y, 2)</code></pre><p>Usually used with classifiers like Support Vector Machines. See also: <a href="#Flux.Losses.hinge_loss-Tuple{Any, Any}"><code>hinge_loss</code></a></p><p><strong>Example</strong></p><pre><code class="language-jldoctes hljs">julia&gt; y_true = [1, -1, 1, 1];

julia&gt; y_pred = [0.1, 0.3, 1, 1.5];

julia&gt; Flux.squared_hinge_loss(y_pred, y_true)
0.625

julia&gt; Flux.squared_hinge_loss(y_pred[1], y_true[1]) != 0
true

julia&gt; Flux.squared_hinge_loss(y_pred[end], y_true[end]) == 0
true

julia&gt; Flux.squared_hinge_loss(y_pred[2], y_true[2]) != 0
true</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.tversky_loss-Tuple{Any, Any}" href="#Flux.Losses.tversky_loss-Tuple{Any, Any}"><code>Flux.Losses.tversky_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">tversky_loss(ŷ, y; β = 0.7)</code></pre><p>Return the <a href="https://arxiv.org/abs/1706.05721">Tversky loss</a>. Used with imbalanced data to give more weight to false negatives. Larger β weigh recall more than precision (by placing more emphasis on false negatives). Calculated as:</p><pre><code class="nohighlight hljs">1 - sum(|y .* ŷ| + 1) / (sum(y .* ŷ + (1 - β)*(1 .- y) .* ŷ + β*y .* (1 .- ŷ)) + 1)</code></pre></div></section></article><h2 id="Internal-functions"><a class="docs-heading-anchor" href="#Internal-functions">Internal functions</a><a id="Internal-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.FluxModelParams" href="#CounterfactualExplanations.FluxModelParams"><code>CounterfactualExplanations.FluxModelParams</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FluxModelParams</code></pre><p>Default MLP training parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L141-L145">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.PlotIngredients" href="#CounterfactualExplanations.PlotIngredients"><code>CounterfactualExplanations.PlotIngredients</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A container used for plotting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/plotting.jl#L154">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.adjust_shape!-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.adjust_shape!-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.adjust_shape!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">adjust_shape!(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that adjusts the dimensions of the counterfactual state and related fields.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L156-L160">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.adjust_shape-Tuple{CounterfactualExplanation, AbstractArray}" href="#CounterfactualExplanations.adjust_shape-Tuple{CounterfactualExplanation, AbstractArray}"><code>CounterfactualExplanations.adjust_shape</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">adjust_shape(
    counterfactual_explanation::CounterfactualExplanation, 
    x::AbstractArray
)</code></pre><p>A convenience method that adjusts the dimensions of <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L129-L136">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.apply_domain_constraints!-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.apply_domain_constraints!-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.apply_domain_constraints!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">apply_domain_constraints!(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Wrapper function that applies underlying domain constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L666-L670">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.apply_mutability-Tuple{CounterfactualExplanation, AbstractArray}" href="#CounterfactualExplanations.apply_mutability-Tuple{CounterfactualExplanation, AbstractArray}"><code>CounterfactualExplanations.apply_mutability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">apply_mutability(
    counterfactual_explanation::CounterfactualExplanation,
    Δs′::AbstractArray,
)</code></pre><p>A subroutine that applies mutability constraints to the proposed vector of feature perturbations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L631-L638">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.counterfactual-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">counterfactual(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that returns the counterfactual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L460-L464">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.counterfactual_label-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual_label-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual_label</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">counterfactual_label(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that returns the predicted label of the counterfactual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L476-L480">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.counterfactual_label_path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual_label_path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual_label_path</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">counterfactual_label_path(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Returns the counterfactual labels for each step of the search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L589-L593">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.counterfactual_probability-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual_probability-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual_probability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">counterfactual_probability(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that computes the class probabilities of the counterfactual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L468-L472">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.counterfactual_probability_path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual_probability_path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual_probability_path</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">counterfactual_probability_path(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Returns the counterfactual probabilities for each step of the search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L573-L577">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.decode_state" href="#CounterfactualExplanations.decode_state"><code>CounterfactualExplanations.decode_state</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function decode_state(
    counterfactual_explanation::CounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Applies all the applicable decoding functions:</p><ol><li>If applicable, map the state variable back from the latent space to the feature space.</li><li>If and where applicable, inverse-transform features.</li><li>Reconstruct all categorical encodings.</li></ol><p>Finally, the decoded counterfactual is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L283-L296">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.embed_path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.embed_path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.embed_path</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">embed_path(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Helper function that embeds path into two dimensions for plotting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L618-L622">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.encode_state" href="#CounterfactualExplanations.encode_state"><code>CounterfactualExplanations.encode_state</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function encode_state(
    counterfactual_explanation::CounterfactualExplanation, 
    x::Union{AbstractArray,Nothing} = nothing,
)</code></pre><p>Applies all required encodings to <code>x</code>:</p><ol><li>If applicable, it maps <code>x</code> to the latent space learned by the generative model.</li><li>If and where applicable, it rescales features. </li></ol><p>Finally, it returns the encoded state variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L178-L190">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.factual-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.factual-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.factual</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">factual(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method to retrieve the factual <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L431-L435">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.factual_label-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.factual_label-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.factual_label</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">factual_label(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method to get the predicted label associated with the factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L447-L451">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.factual_probability-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.factual_probability-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.factual_probability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">factual_probability(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method to compute the class probabilities of the factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L439-L443">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.get_meta-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.get_meta-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.get_meta</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_meta(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Returns meta data for a counterfactual explanation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L776-L780">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.guess_likelihood-Tuple{AbstractVecOrMat}" href="#CounterfactualExplanations.guess_likelihood-Tuple{AbstractVecOrMat}"><code>CounterfactualExplanations.guess_likelihood</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">guess_likelihood(y::RawOutputArrayType)</code></pre><p>Guess the likelihood based on the scientific type of the output array. Returns a symbol indicating the guessed likelihood and the scientific type of the output array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L35-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.guess_loss-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.guess_loss-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.guess_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">guess_loss(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Guesses the loss function to be used for the counterfactual search in case <code>likelihood</code> field is specified for the <a href="#CounterfactualExplanations.Models.AbstractFittedModel"><code>AbstractFittedModel</code></a> instance and no loss function was explicitly declared for <a href="#CounterfactualExplanations.Generators.AbstractGenerator"><code>AbstractGenerator</code></a> instance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L722-L726">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.initialize_state-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.initialize_state-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.initialize_state</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">initialize_state(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Initializes the starting point for the factual(s):</p><ol><li>If <code>counterfactual_explanation.initialization</code> is set to <code>:identity</code> or counterfactuals are searched in a latent space, then nothing is done.</li><li>If <code>counterfactual_explanation.initialization</code> is set to <code>:add_perturbation</code>, then a random perturbation is added to the factual following following Slack (2021): https://arxiv.org/abs/2106.02666. The authors show that this improves adversarial robustness.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L392-L399">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.map_from_latent" href="#CounterfactualExplanations.map_from_latent"><code>CounterfactualExplanations.map_from_latent</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">map_from_latent(
    counterfactual_explanation::CounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Maps the state variable back from the latent space to the feature space.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L333-L340">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.map_to_latent" href="#CounterfactualExplanations.map_to_latent"><code>CounterfactualExplanations.map_to_latent</code></a> — <span class="docstring-category">Function</span></header><section><div><p>function map<em>to</em>latent(         counterfactual_explanation::CounterfactualExplanation,         x::Union{AbstractArray,Nothing}=nothing,     ) </p><p>Maps <code>x</code> from the feature space <span>$\mathcal{X}$</span> to the latent space learned by the generative model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L251-L258">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.output_dim-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.output_dim-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.output_dim</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">output_dim(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that returns the output dimension of the predictive model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L121-L125">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.plot_state-Tuple{CounterfactualExplanation, Int64, Bool}" href="#CounterfactualExplanations.plot_state-Tuple{CounterfactualExplanation, Int64, Bool}"><code>CounterfactualExplanations.plot_state</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot_state(
    counterfactual_explanation::CounterfactualExplanation,
    t::Int,
    final_sate::Bool;
    kwargs...
)</code></pre><p>Helper function that plots a single step of the counterfactual path.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/plotting.jl#L105-L114">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.reconstruct_cat_encoding" href="#CounterfactualExplanations.reconstruct_cat_encoding"><code>CounterfactualExplanations.reconstruct_cat_encoding</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">reconstruct_cat_encoding(
    counterfactual_explanation::CounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Reconstructs all categorical encodings. See <a href="#CounterfactualExplanations.DataPreprocessing.reconstruct_cat_encoding-Tuple{CounterfactualData, AbstractArray}"><code>DataPreprocessing.reconstruct_cat_encoding</code></a> for details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L367-L374">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.reset!-Tuple{CounterfactualExplanations.FluxModelParams}" href="#CounterfactualExplanations.reset!-Tuple{CounterfactualExplanations.FluxModelParams}"><code>CounterfactualExplanations.reset!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reset!(flux_training_params::FluxModelParams)</code></pre><p>Restores the default parameter values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/global_utils.jl#L161-L165">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.set_up_plots-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.set_up_plots-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.set_up_plots</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_up_plots(
    counterfactual_explanation::CounterfactualExplanation;
    alpha,
    plot_proba,
    kwargs...
)</code></pre><p>A helper method that prepares data for plotting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/plotting.jl#L165-L174">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.steps_exhausted-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.steps_exhausted-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.steps_exhausted</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">steps_exhausted(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that checks if the number of maximum iterations has been exhausted.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L713-L717">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.target_probs_path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.target_probs_path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.target_probs_path</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">target_probs_path(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Returns the target probabilities for each step of the search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L604-L608">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.threshold_reached-Tuple{CounterfactualExplanation, AbstractArray}" href="#CounterfactualExplanations.threshold_reached-Tuple{CounterfactualExplanation, AbstractArray}"><code>CounterfactualExplanations.threshold_reached</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">threshold_reached(counterfactual_explanation::CounterfactualExplanation, x::AbstractArray)</code></pre><p>A convenience method that determines if the predefined threshold for the target class probability has been reached for a specific sample <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L698-L702">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.threshold_reached-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.threshold_reached-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.threshold_reached</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">threshold_reached(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>A convenience method that determines if the predefined threshold for the target class probability has been reached.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L686-L690">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.wants_latent_space-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.wants_latent_space-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.wants_latent_space</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">wants_latent_space(
    counterfactual_explanation::CounterfactualExplanation, 
    x::Union{AbstractArray,Nothing} = nothing,
)</code></pre><p>A convenience function that checks if latent space search is applicable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/functions.jl#L220-L227">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="RecipesBase.plot-Tuple{CounterfactualExplanation}" href="#RecipesBase.plot-Tuple{CounterfactualExplanation}"><code>RecipesBase.plot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Plots.plot(
    counterfactual_explanation::CounterfactualExplanation;
    alpha_ = 0.5,
    plot_up_to::Union{Nothing,Int} = nothing,
    plot_proba::Bool = false,
    kwargs...,
)</code></pre><p>Calling <code>plot</code> on an instance of type <code>CounterfactualExplanation</code> returns a plot that visualises the entire counterfactual path. For multi-dimensional input data, the data is first compressed into two dimensions. The decision boundary is then approximated using using a Nearest Neighbour classifier. This is still somewhat experimental at the moment.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs"># Search:
generator = GenericGenerator()
ce = generate_counterfactual(x, target, counterfactual_data, M, generator)

plot(ce)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/counterfactuals/plotting.jl#L6-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.distance_measures" href="#CounterfactualExplanations.Evaluation.distance_measures"><code>CounterfactualExplanations.Evaluation.distance_measures</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>All distance measures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/Evaluation.jl#L19">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.vcat-Tuple{CounterfactualExplanations.Evaluation.Benchmark, CounterfactualExplanations.Evaluation.Benchmark}" href="#Base.vcat-Tuple{CounterfactualExplanations.Evaluation.Benchmark, CounterfactualExplanations.Evaluation.Benchmark}"><code>Base.vcat</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Base.vcat(bmk1::Benchmark, bmk2::Benchmark)</code></pre><p>Vertically concatenates two <code>Benchmark</code> objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/benchmark.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.distance_l0-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.distance_l0-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.distance_l0</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">distance_l0(counterfactual_explanaation::CounterfactualExplanation)</code></pre><p>Computes the L0 distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/measures.jl#L32-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.distance_l1-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.distance_l1-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.distance_l1</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">distance_l1(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Computes the L1 distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/measures.jl#L39-L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.distance_l2-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.distance_l2-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.distance_l2</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">distance_l2(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Computes the L2 (Euclidean) distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/measures.jl#L46-L50">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.distance_linf-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.distance_linf-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.distance_linf</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">distance_linf(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Computes the L-inf distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/measures.jl#L53-L57">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.validity_strict-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.validity_strict-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.validity_strict</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">validity_strict(counterfactual_explanation::CounterfactualExplanation)</code></pre><p>Checks if the counterfactual search has been strictly valid in the sense that it has converged with respect to the pre-specified target probability <code>γ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/evaluation/measures.jl#L13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing._subset-Tuple{CounterfactualData, Vector{Int64}}" href="#CounterfactualExplanations.DataPreprocessing._subset-Tuple{CounterfactualData, Vector{Int64}}"><code>CounterfactualExplanations.DataPreprocessing._subset</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">_subset(data::CounterfactualData, idx::Vector{Int})</code></pre><p>Creates a subset of the <code>data</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/utils.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.get_generative_model-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.get_generative_model-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.get_generative_model</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_generative_model(counterfactual_data::CounterfactualData)</code></pre><p>Returns the underlying generative model. If there is no existing model available, the default generative model (VAE) is used. Otherwise it is expected that existing generative model has been pre-trained or else a warning is triggered.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L304-L308">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.has_pretrained_generative_model-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.has_pretrained_generative_model-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.has_pretrained_generative_model</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">has_pretrained_generative_model(counterfactual_data::CounterfactualData)</code></pre><p>Checks if generative model is present and trained.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L294-L298">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.input_dim-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.input_dim-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.input_dim</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">input_dim(counterfactual_data::CounterfactualData)</code></pre><p>Helper function that returns the input dimension (number of features) of the data. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L276-L281">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.mutability_constraints-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.mutability_constraints-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.mutability_constraints</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mutability_constraints(counterfactual_data::CounterfactualData)</code></pre><p>A convience function that returns the mutability constraints. If none were specified, it is assumed that all features are mutable in <code>:both</code> directions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L245-L249">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.reconstruct_cat_encoding-Tuple{CounterfactualData, AbstractArray}" href="#CounterfactualExplanations.DataPreprocessing.reconstruct_cat_encoding-Tuple{CounterfactualData, AbstractArray}"><code>CounterfactualExplanations.DataPreprocessing.reconstruct_cat_encoding</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reconstruct_cat_encoding(counterfactual_data::CounterfactualData, x::Vector)</code></pre><p>Reconstruct the categorical encoding for a single instance. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L198-L202">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.train_test_split-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.train_test_split-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.train_test_split</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">train_test_split(data::CounterfactualData;test_size=0.2)</code></pre><p>Splits data into train and test split.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/utils.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.undersample-Tuple{CounterfactualData, Int64}" href="#CounterfactualExplanations.DataPreprocessing.undersample-Tuple{CounterfactualData, Int64}"><code>CounterfactualExplanations.DataPreprocessing.undersample</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">undersample(data::CounterfactualData, n::Int)</code></pre><p>Helper function to randomly undersample <code>data::CounterfactualData</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/utils.jl#L42-L46">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.unpack_data-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.unpack_data-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.unpack_data</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">unpack_data(data::CounterfactualData)</code></pre><p>Helper function that unpacks data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/data_preprocessing/functions.jl#L284-L288">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractDifferentiableJuliaModel" href="#CounterfactualExplanations.Models.AbstractDifferentiableJuliaModel"><code>CounterfactualExplanations.Models.AbstractDifferentiableJuliaModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Base type for differentiable models written in pure Julia.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/differentiable.jl#L7-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.FluxEnsembleParams" href="#CounterfactualExplanations.Models.FluxEnsembleParams"><code>CounterfactualExplanations.Models.FluxEnsembleParams</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FluxModelParams</code></pre><p>Default Deep Ensemble training parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_ensemble.jl#L55-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.build_ensemble-Tuple{Int64}" href="#CounterfactualExplanations.Models.build_ensemble-Tuple{Int64}"><code>CounterfactualExplanations.Models.build_ensemble</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">build_ensemble(K::Int;kw=(input_dim=2,n_hidden=32,output_dim=1))</code></pre><p>Helper function that builds an ensemble of <code>K</code> models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_ensemble.jl#L116-L120">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.build_mlp-Tuple{}" href="#CounterfactualExplanations.Models.build_mlp-Tuple{}"><code>CounterfactualExplanations.Models.build_mlp</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">build_mlp()</code></pre><p>Helper function to build simple MLP.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">nn = build_mlp()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_mlp.jl#L112-L123">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.data_loader-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Models.data_loader-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Models.data_loader</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">data_loader(data::CounterfactualData)</code></pre><p>Prepares counterfactual data for training in Flux.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/model_utils.jl#L4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{FluxEnsemble, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{FluxEnsemble, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">train(M::FluxEnsemble, data::CounterfactualData; kwargs...)</code></pre><p>Wrapper function to retrain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_ensemble.jl#L67-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{FluxModel, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{FluxModel, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">train(M::FluxModel, data::CounterfactualData; kwargs...)</code></pre><p>Wrapper function to retrain <code>FluxModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/models/differentiable/flux_mlp.jl#L47-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.AbstractLatentSpaceGenerator" href="#CounterfactualExplanations.Generators.AbstractLatentSpaceGenerator"><code>CounterfactualExplanations.Generators.AbstractLatentSpaceGenerator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractLatentSpaceGenerator</code></pre><p>An abstract type that serves as the base type for gradient-based counterfactual generators that search in a latent space. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L140-L144">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators._replace_nans" href="#CounterfactualExplanations.Generators._replace_nans"><code>CounterfactualExplanations.Generators._replace_nans</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">_replace_nans(Δs′::AbstractArray, old_new::Pair=(NaN =&gt; 0))</code></pre><p>Helper function to deal with exploding gradients. This is only a temporary fix and will be improved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L92-L96">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.gradient_penalty-Tuple{ClaPROARGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.gradient_penalty-Tuple{ClaPROARGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.gradient_penalty</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gradient_penalty(
    generator::ClaPROARGenerator,
    counterfactual_explanation::AbstractCounterfactualExplanation,
)</code></pre><p>Additional penalty for ClaPROARGenerator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/ClapROARGenerator.jl#L51-L58">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to apply the generator complexity penalty to the current counterfactual state for any generator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/Generators.jl#L56-L60">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{ClaPROARGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{ClaPROARGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to apply the generator complexity penalty to the current counterfactual state for any generator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/ClapROARGenerator.jl#L82-L86">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{DiCEGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{DiCEGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to apply the generator complexity penalty to the current counterfactual state for any generator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/DICEGenerator.jl#L61-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{GravitationalGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{GravitationalGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to apply the generator complexity penalty to the current counterfactual state for any generator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/GravitationalGenerator.jl#L64-L68">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.propose_state-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.propose_state-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.propose_state</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">propose_state(generator::AbstractGradientBasedGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>Proposes new state based on backpropagation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L57-L61">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.ℓ-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.ℓ-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.ℓ</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ℓ(generator::AbstractGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to apply the generator loss function to the current counterfactual state for any generator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/Generators.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.∂h-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.∂h-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.∂h</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">∂h(generator::AbstractGradientBasedGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to compute the gradient of the complexity penalty at the current counterfactual state for gradient-based generators. It assumes that <code>Zygote.jl</code> has gradient access.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L30-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.∂ℓ-Tuple{AbstractGradientBasedGenerator, AbstractDifferentiableModel, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.∂ℓ-Tuple{AbstractGradientBasedGenerator, AbstractDifferentiableModel, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.∂ℓ</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">∂ℓ(generator::AbstractGradientBasedGenerator, M::Union{Models.LogisticModel, Models.BayesianLogisticModel}, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to compute the gradient of the loss function at the current counterfactual state for gradient-based generators. It assumes that <code>Zygote.jl</code> has gradient access.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.∇-Tuple{AbstractGradientBasedGenerator, AbstractDifferentiableModel, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.∇-Tuple{AbstractGradientBasedGenerator, AbstractDifferentiableModel, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.∇</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">∇(generator::AbstractGradientBasedGenerator, M::Models.AbstractDifferentiableModel, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>The default method to compute the gradient of the counterfactual search objective for gradient-based generators. It simply computes the weighted sum over partial derivates. It assumes that <code>Zygote.jl</code> has gradient access.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/functions.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CounterfactualExplanations.Generators.∇-Tuple{GreedyGenerator, AbstractDifferentiableModel, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.∇-Tuple{GreedyGenerator, AbstractDifferentiableModel, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.∇</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">∇(generator::GreedyGenerator, counterfactual_explanation::AbstractCounterfactualExplanation)</code></pre><p>he default method to compute the gradient of the counterfactual search objective for a greedy generator. Since no complexity penalty is needed, this gradients just correponds to the partial derivative with respect to the loss function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/5b85354bf4d3cd3f5471cf128de070218586e04d/src/generators/gradient_based/GreedyGenerator.jl#L82-L87">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.xlogx-Tuple{Any}" href="#Flux.Losses.xlogx-Tuple{Any}"><code>Flux.Losses.xlogx</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">xlogx(x)</code></pre><p>Return <code>x * log(x)</code> for <code>x ≥ 0</code>, handling <code>x == 0</code> by taking the limit from above, to get zero.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Flux.Losses.xlogy-Tuple{Any, Any}" href="#Flux.Losses.xlogy-Tuple{Any, Any}"><code>Flux.Losses.xlogy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">xlogy(x, y)</code></pre><p>Return <code>x * log(y)</code> for <code>y &gt; 0</code>, and zero when <code>x == 0</code>.</p></div></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../how_to_guides/custom_models/">« ... add custom models</a><a class="docs-footer-nextpage" href="../contribute/">🛠 Contribute »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 10 March 2023 18:12">Friday 10 March 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
