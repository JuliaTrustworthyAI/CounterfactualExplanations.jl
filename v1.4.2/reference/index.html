<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>üßê Reference ¬∑ CounterfactualExplanations.jl</title><meta name="title" content="üßê Reference ¬∑ CounterfactualExplanations.jl"/><meta property="og:title" content="üßê Reference ¬∑ CounterfactualExplanations.jl"/><meta property="twitter:title" content="üßê Reference ¬∑ CounterfactualExplanations.jl"/><meta name="description" content="Documentation for CounterfactualExplanations.jl."/><meta property="og:description" content="Documentation for CounterfactualExplanations.jl."/><meta property="twitter:description" content="Documentation for CounterfactualExplanations.jl."/><meta property="og:url" content="https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/stable/reference/"/><meta property="twitter:url" content="https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/stable/reference/"/><link rel="canonical" href="https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/stable/reference/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="CounterfactualExplanations.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">CounterfactualExplanations.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">üè† Home</a></li><li><span class="tocitem">ü´£ Tutorials</span><ul><li><a class="tocitem" href="../tutorials/">Overview</a></li><li><a class="tocitem" href="../tutorials/simple_example/">Simple Example</a></li><li><a class="tocitem" href="../tutorials/whistle_stop/">Whiste-Stop Tour</a></li><li><a class="tocitem" href="../tutorials/data_preprocessing/">Handling Data</a></li><li><a class="tocitem" href="../tutorials/data_catalogue/">Data Catalogue</a></li><li><a class="tocitem" href="../tutorials/models/">Handling Models</a></li><li><a class="tocitem" href="../tutorials/model_catalogue/">Model Catalogue</a></li><li><a class="tocitem" href="../tutorials/generators/">Handling Generators</a></li><li><a class="tocitem" href="../tutorials/evaluation/">Evaluating Explanations</a></li><li><a class="tocitem" href="../tutorials/benchmarking/">Benchmarking Explanations</a></li><li><a class="tocitem" href="../tutorials/parallelization/">Parallelization</a></li><li><a class="tocitem" href="../tutorials/convergence/">Convergence</a></li></ul></li><li><span class="tocitem">ü§ì Explanation</span><ul><li><a class="tocitem" href="../explanation/">Overview</a></li><li><a class="tocitem" href="../explanation/architecture/">Package Architecture</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Generators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../explanation/generators/overview/">Overview</a></li><li><a class="tocitem" href="../explanation/generators/generic/">Generic</a></li><li><a class="tocitem" href="../explanation/generators/clap_roar/">ClaPROAR</a></li><li><a class="tocitem" href="../explanation/generators/clue/">CLUE</a></li><li><a class="tocitem" href="../explanation/generators/dice/">DiCE</a></li><li><a class="tocitem" href="../explanation/generators/feature_tweak/">FeatureTweak</a></li><li><a class="tocitem" href="../explanation/generators/gravitational/">Gravitational</a></li><li><a class="tocitem" href="../explanation/generators/greedy/">Greedy</a></li><li><a class="tocitem" href="../explanation/generators/probe/">PROBE</a></li><li><a class="tocitem" href="../explanation/generators/revise/">REVISE</a></li><li><a class="tocitem" href="../explanation/generators/mint/">MINT</a></li><li><a class="tocitem" href="../explanation/generators/tcrex/">T-CREx</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Evaluation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../explanation/evaluation/overview/">Overview</a></li><li><a class="tocitem" href="../explanation/evaluation/faithfulness/">Plausibility and Faithfulness</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Optimisers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../explanation/optimisers/overview/">Overview</a></li><li><a class="tocitem" href="../explanation/optimisers/jsma/">JSMA</a></li></ul></li><li><a class="tocitem" href="../explanation/categorical/">Categorical Features</a></li></ul></li><li><span class="tocitem">ü´° How-To ...</span><ul><li><a class="tocitem" href="../how_to_guides/">Overview</a></li><li><a class="tocitem" href="../how_to_guides/custom_generators/">... add custom generators</a></li><li><a class="tocitem" href="../how_to_guides/custom_models/">... add custom models</a></li></ul></li><li><span class="tocitem">‚õìÔ∏è Extensions</span><ul><li><a class="tocitem" href="../extensions/">Overview</a></li><li><a class="tocitem" href="../extensions/neurotree/">NeuroTrees</a></li><li><a class="tocitem" href="../extensions/laplace_redux/">LaplaceRedux</a></li></ul></li><li class="is-active"><a class="tocitem" href>üßê Reference</a><ul class="internal"><li><a class="tocitem" href="#Content"><span>Content</span></a></li><li><a class="tocitem" href="#Exported-functions"><span>Exported functions</span></a></li><li><a class="tocitem" href="#Internal-functions"><span>Internal functions</span></a></li><li><a class="tocitem" href="#Extensions"><span>Extensions</span></a></li></ul></li><li><a class="tocitem" href="../contribute/">üõ† Contribute</a></li><li><a class="tocitem" href="../assets/resources/">üìö Additional Resources</a></li><li><a class="tocitem" href="../release-notes/">Release Notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>üßê Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>üßê Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/main/docs/src/reference.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h1><p>In this reference, you will find a detailed overview of the package API.</p><blockquote><p>Reference guides are technical descriptions of the machinery and how to operate it. Reference material is information-oriented.</p><p>‚Äî <a href="https://diataxis.fr/reference/">Di√°taxis</a></p></blockquote><p>In other words, you come here because you want to take a very close look at the code üßê.</p><h2 id="Content"><a class="docs-heading-anchor" href="#Content">Content</a><a id="Content-1"></a><a class="docs-heading-anchor-permalink" href="#Content" title="Permalink"></a></h2><ul><li><a href="#Content">Content</a></li><li><a href="#Exported-functions">Exported functions</a></li><li><a href="#Internal-functions">Internal functions</a></li><li><a href="#Extensions">Extensions</a></li></ul><h2 id="Exported-functions"><a class="docs-heading-anchor" href="#Exported-functions">Exported functions</a><a id="Exported-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Exported-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.RawOutputArrayType" href="#CounterfactualExplanations.RawOutputArrayType"><code>CounterfactualExplanations.RawOutputArrayType</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RawOutputArrayType</code></pre><p>A type union for the allowed type for the output array <code>y</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L20-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.RawTargetType" href="#CounterfactualExplanations.RawTargetType"><code>CounterfactualExplanations.RawTargetType</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RawTargetType</code></pre><p>A type union for the allowed types for the <code>target</code> variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L6-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.flux_training_params" href="#CounterfactualExplanations.flux_training_params"><code>CounterfactualExplanations.flux_training_params</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flux_training_params</code></pre><p>The default training parameter for <code>FluxModels</code> etc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L155-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.AbstractConvergence" href="#CounterfactualExplanations.AbstractConvergence"><code>CounterfactualExplanations.AbstractConvergence</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>An abstract type that serves as the base type for convergence objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/base_types.jl#L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.AbstractCounterfactualExplanation" href="#CounterfactualExplanations.AbstractCounterfactualExplanation"><code>CounterfactualExplanations.AbstractCounterfactualExplanation</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type for counterfactual explanations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/base_types.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.AbstractGenerator" href="#CounterfactualExplanations.AbstractGenerator"><code>CounterfactualExplanations.AbstractGenerator</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>An abstract type that serves as the base type for counterfactual generators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/base_types.jl#L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.AbstractModel" href="#CounterfactualExplanations.AbstractModel"><code>CounterfactualExplanations.AbstractModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type for models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/base_types.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.AbstractPenalty" href="#CounterfactualExplanations.AbstractPenalty"><code>CounterfactualExplanations.AbstractPenalty</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>An abstract type for penalty functions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/base_types.jl#L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.CounterfactualExplanation" href="#CounterfactualExplanations.CounterfactualExplanation"><code>CounterfactualExplanations.CounterfactualExplanation</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A struct that collects all information relevant to a specific counterfactual explanation for a single individual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/core_struct.jl#L5-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.CounterfactualExplanation-Tuple{AbstractArray, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel, AbstractGenerator}" href="#CounterfactualExplanations.CounterfactualExplanation-Tuple{AbstractArray, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel, AbstractGenerator}"><code>CounterfactualExplanations.CounterfactualExplanation</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function CounterfactualExplanation(;
	x::AbstractArray,
	target::RawTargetType,
	data::CounterfactualData,
	M::Models.AbstractModel,
	generator::Generators.AbstractGenerator,
	num_counterfactuals::Int = 1,
	initialization::Symbol = :add_perturbation,
    convergence::Union{AbstractConvergence,Symbol}=:decision_threshold,
)</code></pre><p>Outer method to construct a <code>CounterfactualExplanation</code> structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/core_struct.jl#L38-L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.CounterfactualExplanation-Tuple{}" href="#CounterfactualExplanations.CounterfactualExplanation-Tuple{}"><code>CounterfactualExplanations.CounterfactualExplanation</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(ce::CounterfactualExplanation)()::FlattenedCE</code></pre><p>Calling the <code>ce::CounterfactualExplanation</code> object results in a <a href="#CounterfactualExplanations.FlattenedCE"><code>FlattenedCE</code></a> instance, which is the flattened version of the original.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/flatten.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.EncodedOutputArrayType" href="#CounterfactualExplanations.EncodedOutputArrayType"><code>CounterfactualExplanations.EncodedOutputArrayType</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EncodedOutputArrayType</code></pre><p>Type of encoded output array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.EncodedTargetType" href="#CounterfactualExplanations.EncodedTargetType"><code>CounterfactualExplanations.EncodedTargetType</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EncodedTargetType</code></pre><p>Type of encoded target variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.FlattenedCE" href="#CounterfactualExplanations.FlattenedCE"><code>CounterfactualExplanations.FlattenedCE</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FlattenedCE &lt;: AbstractCounterfactualExplanation</code></pre><p>A flattened representation of a <code>CounterfactualExplanation</code>, containing only the <code>factual</code>, <code>target</code>, and <code>counterfactual</code> attributes. This can be useful for compact storage or transmission of explanations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/flatten.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.OutputEncoder" href="#CounterfactualExplanations.OutputEncoder"><code>CounterfactualExplanations.OutputEncoder</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OutputEncoder</code></pre><p>The <code>OutputEncoder</code> takes a raw output array (<code>y</code>) and encodes it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L55-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.OutputEncoder-Tuple{Union{Int64, AbstractFloat, String, Symbol}}" href="#CounterfactualExplanations.OutputEncoder-Tuple{Union{Int64, AbstractFloat, String, Symbol}}"><code>CounterfactualExplanations.OutputEncoder</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(encoder::OutputEncoder)(ynew::RawTargetType)</code></pre><p>When called on a new value <code>ynew</code>, the <code>OutputEncoder</code> encodes it based on the initial encoding.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L105-L109">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.OutputEncoder-Tuple{}" href="#CounterfactualExplanations.OutputEncoder-Tuple{}"><code>CounterfactualExplanations.OutputEncoder</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(encoder::OutputEncoder)()</code></pre><p>On call, the <code>OutputEncoder</code> returns the encoded output array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L65-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.flatten-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.flatten-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.flatten</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">flatten(ce::CounterfactualExplanation)</code></pre><p>Alias for <code>(ce::CounterfactualExplanation)()</code>. Converts a <code>CounterfactualExplanation</code> to its flattened form.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/flatten.jl#L29-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.generate_counterfactual-Tuple{Base.Iterators.Zip, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel, AbstractGenerator}" href="#CounterfactualExplanations.generate_counterfactual-Tuple{Base.Iterators.Zip, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel, AbstractGenerator}"><code>CounterfactualExplanations.generate_counterfactual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_counterfactual(
    x::Base.Iterators.Zip,
    target::RawTargetType,
    data::CounterfactualData,
    M::Models.AbstractModel,
    generator::AbstractGenerator;
    kwargs...,
)</code></pre><p>Overloads the <code>generate_counterfactual</code> method to accept a zip of factuals <code>x</code> and return a vector of counterfactuals.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/vectorised.jl#L1-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.generate_counterfactual-Tuple{Matrix, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel, AbstractGenerator}" href="#CounterfactualExplanations.generate_counterfactual-Tuple{Matrix, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel, AbstractGenerator}"><code>CounterfactualExplanations.generate_counterfactual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_counterfactual(
    x::Matrix,
    target::RawTargetType,
    data::CounterfactualData,
    M::Models.AbstractModel,
    generator::AbstractGenerator;
    num_counterfactuals::Int=1,
    initialization::Symbol=:add_perturbation,
    convergence::Union{AbstractConvergence,Symbol}=:decision_threshold,
    timeout::Union{Nothing,Real}=nothing,
    return_flattened::Bool=false,
)</code></pre><p>The core function that is used to run counterfactual search for a given factual <code>x</code>, target, counterfactual data, model and generator. Keywords can be used to specify the desired threshold for the predicted target class probability and the maximum number of iterations.</p><p><strong>Arguments</strong></p><ul><li><code>x::Matrix</code>: Factual data point.</li><li><code>target::RawTargetType</code>: Target class.</li><li><code>data::CounterfactualData</code>: Counterfactual data.</li><li><code>M::Models.AbstractModel</code>: Fitted model.</li><li><code>generator::AbstractGenerator</code>: Generator.</li><li><code>num_counterfactuals::Int=1</code>: Number of counterfactuals to generate for factual.</li><li><code>initialization::Symbol=:add_perturbation</code>: Initialization method. By default, the initialization is done by adding a small random perturbation to the factual to achieve more robustness.</li><li><code>convergence::Union{AbstractConvergence,Symbol}=:decision_threshold</code>: Convergence criterion. By default, the convergence is based on the decision threshold. Possible values are <code>:decision_threshold</code>, <code>:max_iter</code>, <code>:generator_conditions</code> or a conrete convergence object (e.g. <a href="#CounterfactualExplanations.Convergence.DecisionThresholdConvergence"><code>DecisionThresholdConvergence</code></a>). </li><li><code>timeout::Union{Nothing,Int}=nothing</code>: Timeout in seconds.</li><li><code>return_flattened::Bool</code>: If true, the flattened CE is returned instead of a CE object.</li></ul><p><strong>Examples</strong></p><p><strong>Generic generator</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CounterfactualExplanations

julia&gt; using TaijaData
       
        # Counteractual data and model:

julia&gt; counterfactual_data = CounterfactualData(load_linearly_separable()...);

julia&gt; M = fit_model(counterfactual_data, :Linear);

julia&gt; target = 2;

julia&gt; factual = 1;

julia&gt; chosen = rand(findall(predict_label(M, counterfactual_data) .== factual));

julia&gt; x = select_factual(counterfactual_data, chosen);
       
       # Search:

julia&gt; generator = Generators.GenericGenerator();

julia&gt; ce = generate_counterfactual(x, target, counterfactual_data, M, generator);

julia&gt; converged(ce.convergence, ce)
true</code></pre><p><strong>Broadcasting</strong></p><p>The <code>generate_counterfactual</code> method can also be broadcasted over a tuple containing an array. This allows for generating multiple counterfactuals in parallel. </p><pre><code class="language-julia-repl hljs">julia&gt; chosen = rand(findall(predict_label(M, counterfactual_data) .== factual), 5);

julia&gt; xs = select_factual(counterfactual_data, chosen);

julia&gt; ces = generate_counterfactual.(xs, target, counterfactual_data, M, generator);

julia&gt; converged(ce.convergence, ce)
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/generate_counterfactual.jl#L1-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.generate_counterfactual-Tuple{Tuple{AbstractArray}, Vararg{Any}}" href="#CounterfactualExplanations.generate_counterfactual-Tuple{Tuple{AbstractArray}, Vararg{Any}}"><code>CounterfactualExplanations.generate_counterfactual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_counterfactual(x::Tuple{&lt;:AbstractArray}, args...; kwargs...)</code></pre><p>Overloads the <code>generate_counterfactual</code> method to accept a tuple containing and array. This allows for broadcasting over <code>Zip</code> iterators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/generate_counterfactual.jl#L133-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.generate_counterfactual-Tuple{Vector{&lt;:Matrix}, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel, AbstractGenerator}" href="#CounterfactualExplanations.generate_counterfactual-Tuple{Vector{&lt;:Matrix}, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel, AbstractGenerator}"><code>CounterfactualExplanations.generate_counterfactual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_counterfactual(
    x::Vector{&lt;:Matrix},
    target::RawTargetType,
    data::CounterfactualData,
    M::Models.AbstractModel,
    generator::AbstractGenerator;
    kwargs...,
)</code></pre><p>Overloads the <code>generate_counterfactual</code> method to accept a vector of factuals <code>x</code> and return a vector of counterfactuals.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/vectorised.jl#L26-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.get_target_index-Tuple{Any, Any}" href="#CounterfactualExplanations.get_target_index-Tuple{Any, Any}"><code>CounterfactualExplanations.get_target_index</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_target_index(y_levels, target)</code></pre><p>Utility that returns the index of <code>target</code> in <code>y_levels</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L132-L136">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.path</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">path(ce::CounterfactualExplanation)</code></pre><p>A convenience method that returns the entire counterfactual path.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/path_tracking.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.target_encoded-Tuple{FlattenedCE, CounterfactualData}" href="#CounterfactualExplanations.target_encoded-Tuple{FlattenedCE, CounterfactualData}"><code>CounterfactualExplanations.target_encoded</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">target_encoded(flat_ce::FlattenedCE, data::CounterfactualData)</code></pre><p>Returns the encoded representation of <code>flat_ce.target</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/flatten.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.target_probs" href="#CounterfactualExplanations.target_probs"><code>CounterfactualExplanations.target_probs</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">target_probs(
    ce::CounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Returns the predicted probability of the target class for <code>x</code>. If <code>x</code> is <code>nothing</code>, the predicted probability corresponding to the counterfactual value is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/info_extraction.jl#L67-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.terminated-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.terminated-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.terminated</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">terminated(ce::CounterfactualExplanation)</code></pre><p>A convenience method that checks if the counterfactual search has terminated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/termination.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.total_steps-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.total_steps-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.total_steps</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">total_steps(ce::CounterfactualExplanation)</code></pre><p>A convenience method that returns the total number of steps of the counterfactual search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/termination.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.convergence_catalogue" href="#CounterfactualExplanations.Convergence.convergence_catalogue"><code>CounterfactualExplanations.Convergence.convergence_catalogue</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">convergence_catalogue</code></pre><p>A dictionary containing all convergence criteria.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/Convergence.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.DecisionThresholdConvergence" href="#CounterfactualExplanations.Convergence.DecisionThresholdConvergence"><code>CounterfactualExplanations.Convergence.DecisionThresholdConvergence</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DecisionThresholdConvergence</code></pre><p>Convergence criterion based on the target class probability threshold. The search stops when the target class probability exceeds the predefined threshold.</p><p><strong>Fields</strong></p><ul><li><code>decision_threshold::AbstractFloat</code>: The predefined threshold for the target class probability.</li><li><code>max_iter::Int</code>: The maximum number of iterations.</li><li><code>min_success_rate::AbstractFloat</code>: The minimum success rate for the target class probability.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/decision_threshold.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.GeneratorConditionsConvergence" href="#CounterfactualExplanations.Convergence.GeneratorConditionsConvergence"><code>CounterfactualExplanations.Convergence.GeneratorConditionsConvergence</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GeneratorConditionsConvergence</code></pre><p>Convergence criterion for counterfactual explanations based on the generator conditions. The search stops when the gradients of the search objective are below a certain threshold and the generator conditions are satisfied.</p><p><strong>Fields</strong></p><ul><li><code>decision_threshold::AbstractFloat</code>: The threshold for the decision probability.</li><li><code>gradient_tol::AbstractFloat</code>: The tolerance for the gradients of the search objective.</li><li><code>max_iter::Int</code>: The maximum number of iterations.</li><li><code>min_success_rate::AbstractFloat</code>: The minimum success rate for the generator conditions (across counterfactuals).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/generator_conditions.jl#L1-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.GeneratorConditionsConvergence-Tuple{}" href="#CounterfactualExplanations.Convergence.GeneratorConditionsConvergence-Tuple{}"><code>CounterfactualExplanations.Convergence.GeneratorConditionsConvergence</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GeneratorConditionsConvergence(; decision_threshold=0.5, gradient_tol=1e-2, max_iter=100, min_success_rate=0.75, y_levels=nothing)</code></pre><p>Outer constructor for <code>GeneratorConditionsConvergence</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/generator_conditions.jl#L20-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.MaxIterConvergence" href="#CounterfactualExplanations.Convergence.MaxIterConvergence"><code>CounterfactualExplanations.Convergence.MaxIterConvergence</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MaxIterConvergence</code></pre><p>Convergence criterion based on the maximum number of iterations.</p><p><strong>Fields</strong></p><ul><li><code>max_iter::Int</code>: The maximum number of iterations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/max_iter.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.conditions_satisfied-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Convergence.conditions_satisfied-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Convergence.conditions_satisfied</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">conditions_satisfied(gen::AbstractGenerator, ce::AbstractCounterfactualExplanation)</code></pre><p>This function is overloaded in the <code>Generators</code> module to check whether the counterfactual search has converged with respect to generator conditions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/generator_conditions.jl#L58-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.converged" href="#CounterfactualExplanations.Convergence.converged"><code>CounterfactualExplanations.Convergence.converged</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">converged(
    convergence::GeneratorConditionsConvergence,
    ce::AbstractCounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Checks if the counterfactual search has converged when the convergence criterion is generator_conditions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/generator_conditions.jl#L41-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.converged" href="#CounterfactualExplanations.Convergence.converged"><code>CounterfactualExplanations.Convergence.converged</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">converged(
    convergence::InvalidationRateConvergence,
    ce::AbstractCounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Checks if the counterfactual search has converged when the convergence criterion is invalidation rate.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/invalidation_rate.jl#L12-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.converged" href="#CounterfactualExplanations.Convergence.converged"><code>CounterfactualExplanations.Convergence.converged</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">converged(
    convergence::DecisionThresholdConvergence,
    ce::AbstractCounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Checks if the counterfactual search has converged when the convergence criterion is the decision threshold.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/decision_threshold.jl#L31-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.converged" href="#CounterfactualExplanations.Convergence.converged"><code>CounterfactualExplanations.Convergence.converged</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">converged(
    convergence::MaxIterConvergence,
    ce::AbstractCounterfactualExplanation,
    x::Union{AbstractArray,Nothing}=nothing,
)</code></pre><p>Checks if the counterfactual search has converged when the convergence criterion is maximum iterations. This means the counterfactual search will not terminate until the maximum number of iterations has been reached independently of the other convergence criteria.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/max_iter.jl#L14-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.converged-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Convergence.converged-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Convergence.converged</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">converged(ce::AbstractCounterfactualExplanation)</code></pre><p>Returns <code>true</code> if the counterfactual explanation has converged.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/Convergence.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.get_convergence_type-Tuple{AbstractConvergence, AbstractVector}" href="#CounterfactualExplanations.Convergence.get_convergence_type-Tuple{AbstractConvergence, AbstractVector}"><code>CounterfactualExplanations.Convergence.get_convergence_type</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_convergence_type(convergence::AbstractConvergence)</code></pre><p>Returns the convergence object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/Convergence.jl#L35-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.get_convergence_type-Tuple{Symbol, AbstractVector}" href="#CounterfactualExplanations.Convergence.get_convergence_type-Tuple{Symbol, AbstractVector}"><code>CounterfactualExplanations.Convergence.get_convergence_type</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_convergence_type(convergence::Symbol)</code></pre><p>Returns the convergence object from the dictionary of default convergence types.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/Convergence.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.invalidation_rate-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Convergence.invalidation_rate-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Convergence.invalidation_rate</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">invalidation_rate(ce::AbstractCounterfactualExplanation)</code></pre><p>Calculates the invalidation rate of a counterfactual explanation.</p><p><strong>Arguments</strong></p><ul><li><code>ce::AbstractCounterfactualExplanation</code>: The counterfactual explanation to calculate the invalidation rate for.</li><li><code>kwargs</code>: Additional keyword arguments to pass to the function.</li></ul><p><strong>Returns</strong></p><p>The invalidation rate of the counterfactual explanation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/invalidation_rate.jl#L31-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.threshold_reached" href="#CounterfactualExplanations.Convergence.threshold_reached"><code>CounterfactualExplanations.Convergence.threshold_reached</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">threshold_reached(ce::AbstractCounterfactualExplanation, x::Union{AbstractArray,Nothing}=nothing)</code></pre><p>Determines if the predefined threshold for the target class probability has been reached.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/decision_threshold.jl#L48-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation._serialization_state" href="#CounterfactualExplanations.Evaluation._serialization_state"><code>CounterfactualExplanations.Evaluation._serialization_state</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Global serializer state (allows or disallows serialization).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.all_measures" href="#CounterfactualExplanations.Evaluation.all_measures"><code>CounterfactualExplanations.Evaluation.all_measures</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>All measures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/Evaluation.jl#L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.default_measures" href="#CounterfactualExplanations.Evaluation.default_measures"><code>CounterfactualExplanations.Evaluation.default_measures</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>The default evaluation measures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/Evaluation.jl#L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.distance_measures" href="#CounterfactualExplanations.Evaluation.distance_measures"><code>CounterfactualExplanations.Evaluation.distance_measures</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>All distance measures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/Evaluation.jl#L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.plausibility_measures" href="#CounterfactualExplanations.Evaluation.plausibility_measures"><code>CounterfactualExplanations.Evaluation.plausibility_measures</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Available plausibility measures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/Evaluation.jl#L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.Benchmark" href="#CounterfactualExplanations.Evaluation.Benchmark"><code>CounterfactualExplanations.Evaluation.Benchmark</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A container for benchmarks of counterfactual explanations. Instead of subtyping <code>DataFrame</code>, it contains a <code>DataFrame</code> of evaluation measures (see <a href="https://discourse.julialang.org/t/creating-an-abstractdataframe-subtype/36451/6?u=pat-alt">this discussion</a> for why we don&#39;t subtype <code>DataFrame</code> directly).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.Benchmark-Tuple{DataFrames.DataFrame}" href="#CounterfactualExplanations.Evaluation.Benchmark-Tuple{DataFrames.DataFrame}"><code>CounterfactualExplanations.Evaluation.Benchmark</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Benchmark(evaluation::DataFrames.DataFrame; counterfactuals=nothing)</code></pre><p>Constructs a <code>Benchmark</code> from an evaluation <code>DataFrame</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.Benchmark-Tuple{}" href="#CounterfactualExplanations.Evaluation.Benchmark-Tuple{}"><code>CounterfactualExplanations.Evaluation.Benchmark</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(bmk::Benchmark)(; agg=mean)</code></pre><p>Returns a <code>DataFrame</code> containing evaluation measures aggregated by <code>num_counterfactual</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.DefaultOutputIdentifier" href="#CounterfactualExplanations.Evaluation.DefaultOutputIdentifier"><code>CounterfactualExplanations.Evaluation.DefaultOutputIdentifier</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Default output identifier (no specific ID).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.ExplicitCETransformer" href="#CounterfactualExplanations.Evaluation.ExplicitCETransformer"><code>CounterfactualExplanations.Evaluation.ExplicitCETransformer</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>The <code>ExplicitCETransformer</code> can be used to specify any arbitrary CE transformation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.ExplicitOutputIdentifier" href="#CounterfactualExplanations.Evaluation.ExplicitOutputIdentifier"><code>CounterfactualExplanations.Evaluation.ExplicitOutputIdentifier</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>And explicit output identifier that takes the string value of <code>id</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.IdentityTransformer" href="#CounterfactualExplanations.Evaluation.IdentityTransformer"><code>CounterfactualExplanations.Evaluation.IdentityTransformer</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Default CE transformer that returns the input as is.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.NullSerializer" href="#CounterfactualExplanations.Evaluation.NullSerializer"><code>CounterfactualExplanations.Evaluation.NullSerializer</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Null serializer (does not allow serialization).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.Serializer" href="#CounterfactualExplanations.Evaluation.Serializer"><code>CounterfactualExplanations.Evaluation.Serializer</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Standard serializer (allows serialization).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.benchmark-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Evaluation.benchmark</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">benchmark(
    data::CounterfactualData;
    test_data::Union{Nothing,CounterfactualData}=nothing,
    models::Dict{&lt;:Any,&lt;:Any}=standard_models_catalogue,
    generators::Union{Nothing,Dict{&lt;:Any,&lt;:AbstractGenerator}}=nothing,
    measure::Union{Function,Vector{Function}}=default_measures,
    n_individuals::Int=5,
    n_runs::Int=1,
    suppress_training::Bool=false,
    factual::Union{Nothing,RawTargetType}=nothing,
    target::Union{Nothing,RawTargetType}=nothing,
    store_ce::Bool=false,
    parallelizer::Union{Nothing,AbstractParallelizer}=nothing,
    dataname::Union{Nothing,Symbol,String}=nothing,
    verbose::Bool=true,
    vertical_splits::Union{Nothing,Int}=nothing,
    storage_path::String=tempdir(),
    kwrgs...,
)</code></pre><p>Benchmark a set of counterfactuals for a given data set and additional inputs.</p><p><strong>Arguments</strong></p><ul><li><code>data::CounterfactualData</code>: The dataset containing the factual and target labels.</li><li><code>test_data::Union{Nothing,CounterfactualData}</code>: Optional test data for evaluation. Defaults to <code>nothing</code>, in which case <code>data</code> is used for evaluation. </li><li><code>models::Dict{&lt;:Any,&lt;:Any}</code>: A dictionary of model objects keyed by their names. Defaults to <code>standard_models_catalogue</code>.</li><li><code>generators::Union{Nothing,Dict{&lt;:Any,&lt;:AbstractGenerator}}</code>: Optional dictionary of generator functions keyed by their names. Defaults to <code>nothing</code>, in which case the whole <a href="#CounterfactualExplanations.Generators.generator_catalogue"><code>generator_catalogue</code></a> is used. </li><li><code>measure::Union{Function,Vector{Function}}</code>: The measure(s) to evaluate the counterfactuals against. Defaults to <code>default_measures</code>.</li><li><code>n_individuals::Int=5</code>: Number of individuals to generate for each model and generator. </li><li><code>n_runs::Int=1</code>: Number of runs for each model and generator.</li><li><code>suppress_training::Bool=false</code>: Whether to suppress training of models during benchmarking. This is useful if models have already been trained.</li><li><code>factual::Union{Nothing,RawTargetType}</code>: Optional factual label. Defaults to <code>nothing</code>, in which case factual labels are randomly sampled from the dataset.</li><li><code>target::Union{Nothing,RawTargetType}</code>: Optional target label. Defaults to <code>nothing</code>, in which case target labels are randomly sampled from the dataset.</li><li><code>store_ce::Bool=false</code>: Whether to store the <a href="#CounterfactualExplanations.CounterfactualExplanation"><code>CounterfactualExplanation</code></a> objects for each counterfactual.</li><li><code>parallelizer::Union{Nothing,AbstractParallelizer}=nothing</code>: Parallelization strategy for generating and evaluating counterfactuals.</li><li><code>dataname::Union{Nothing,Symbol,String}=nothing</code>: Name of the dataset. Defaults to <code>nothing</code>.</li><li><code>verbose::Bool=true</code>: Whether to print verbose output during benchmarking.</li><li><code>vertical_splits::Union{Nothing,Int}=nothing</code>: Number of elements per vertical split for generating counterfactuals. Defaults to <code>nothing</code>. This can useful, if it is necessary to reduce peak memory usage, by decreasing the number of counterfactuals generated at once. Lower values lead to smaller batches and hence smaller peak load.</li><li><code>storage_path::String=tempdir()</code>: Path where interim results will be stored. Defaults to <code>tempdir()</code>.</li><li><code>concatenate_output::Bool=true</code>: Whether to collect output from each run and concatenate them into a single output file.</li></ul><p><strong>Returns</strong></p><ul><li>A dictionary containing the benchmark results, including mean and standard deviation of the measures across all runs.</li></ul><p><strong>Benchmarking Procedure</strong></p><p>Runs the benchmarking exercise as follows:</p><ol><li>Randomly choose a <code>factual</code> and <code>target</code> label unless specified. </li><li>If no pretrained <code>models</code> are provided, it is assumed that a dictionary of callable model objects is provided (by default using the <code>standard_models_catalogue</code>). </li><li>Each of these models is then trained on the data. </li><li>For each model separately choose <code>n_individuals</code> randomly from the non-target (<code>factual</code>) class. For each generator create a benchmark as in <a href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{CounterfactualData}"><code>benchmark(xs::Union{AbstractArray,Base.Iterators.Zip})</code></a>.</li><li>Finally, concatenate the results.</li></ol><p>If <code>vertical_splits</code> is specified to an integer, the computations are split vertically into chunks of <code>vertical_splits</code> each. In this case, the results are stored in a temporary directory and concatenated afterwards. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L230-L288">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.benchmark-Tuple{Union{AbstractArray, Base.Iterators.Zip}, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData}" href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{Union{AbstractArray, Base.Iterators.Zip}, Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData}"><code>CounterfactualExplanations.Evaluation.benchmark</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">benchmark(
    x::Union{AbstractArray,Base.Iterators.Zip},
    target::RawTargetType,
    data::CounterfactualData;
    models::Dict{&lt;:Any,&lt;:AbstractModel},
    generators::Dict{&lt;:Any,&lt;:AbstractGenerator},
    measure::Union{Function,Vector{Function}}=default_measures,
    xids::Union{Nothing,AbstractArray}=nothing,
    dataname::Union{Nothing,Symbol,String}=nothing,
    verbose::Bool=true,
    store_ce::Bool=false,
    parallelizer::Union{Nothing,AbstractParallelizer}=nothing,
    kwrgs...,
)</code></pre><p>First generates counterfactual explanations for factual <code>x</code>, the <code>target</code> and <code>data</code> using each of the provided <code>models</code> and <code>generators</code>. Then generates a <code>Benchmark</code> for the vector of counterfactual explanations as in <a href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{Vector{CounterfactualExplanation}}"><code>benchmark(counterfactual_explanations::Vector{CounterfactualExplanation})</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L115-L132">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.benchmark-Tuple{Vector{CounterfactualExplanation}}" href="#CounterfactualExplanations.Evaluation.benchmark-Tuple{Vector{CounterfactualExplanation}}"><code>CounterfactualExplanations.Evaluation.benchmark</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">benchmark(
    counterfactual_explanations::Vector{CounterfactualExplanation};
    meta_data::Union{Nothing,&lt;:Vector{&lt;:Dict}}=nothing,
    measure::Union{Function,Vector{Function}}=default_measures,
    store_ce::Bool=false,
)</code></pre><p>Generates a <code>Benchmark</code> for a vector of counterfactual explanations. Optionally <code>meta_data</code> describing each individual counterfactual explanation can be supplied. This should be a vector of dictionaries of the same length as the vector of counterfactuals. If no <code>meta_data</code> is supplied, it will be automatically inferred. All <code>measure</code> functions are applied to each counterfactual explanation. If <code>store_ce=true</code>, the counterfactual explanations are stored in the benchmark.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L83-L92">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.concatenate_benchmarks-Tuple{String}" href="#CounterfactualExplanations.Evaluation.concatenate_benchmarks-Tuple{String}"><code>CounterfactualExplanations.Evaluation.concatenate_benchmarks</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">concatenate_benchmarks(storage_path::String)</code></pre><p>Concatenates all benchmarks stored in <code>storage_path</code> into a single benchmark.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L497-L501">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.evaluate" href="#CounterfactualExplanations.Evaluation.evaluate"><code>CounterfactualExplanations.Evaluation.evaluate</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">evaluate(
    ce::CounterfactualExplanation,
    meta_data::Union{Nothing,Dict}=nothing;
    measure::Union{Function,Vector{Function}}=default_measures,
    agg::Function=mean,
    report_each::Bool=false,
    output_format::Symbol=:Vector,
    pivot_longer::Bool=true,
    store_ce::Bool=false,
    report_meta::Bool=false,
)</code></pre><p>Just computes evaluation <code>measures</code> for the counterfactual explanation. By default, no meta data is reported. For <code>report_meta=true</code>, meta data is automatically inferred, unless this overwritten by <code>meta_data</code>. The optional <code>meta_data</code> argument should be a vector of dictionaries of the same length as the vector of counterfactual explanations. </p><p><strong>Arguments:</strong></p><ul><li><code>ce</code>: The counterfactual explanation to evaluate.</li><li><code>meta_data</code>: A vector of dictionaries containing meta data for each counterfactual explanation. If not provided, the default meta data is inferred from the counterfactual explanations.</li><li><code>measure</code>: The evaluation measures to compute. By default, all available measures are computed.</li><li><code>agg</code>: The aggregation function to use for the evaluation measures. By default, the mean is used.</li><li><code>report_each</code>: If true, each evaluation measure is reported separately. Otherwise, the mean of all measures is reported.</li><li><code>output_format</code>: The format of the output. By default, a vector is returned.</li><li><code>pivot_longer</code>: If true, the evaluation measures are pivoted longer. Otherwise, they are stacked.</li><li><code>store_ce</code>: If true, the counterfactual explanation is stored in the evaluation DataFrame. <strong>Note</strong>: These objects are potentially large and can consume a lot of memory.</li><li><code>report_meta</code>: If true, meta data is reported. Otherwise, it is not.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L127-L154">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.faithfulness-Tuple{CounterfactualExplanation, typeof(CounterfactualExplanations.Evaluation.distance_from_posterior)}" href="#CounterfactualExplanations.Evaluation.faithfulness-Tuple{CounterfactualExplanation, typeof(CounterfactualExplanations.Evaluation.distance_from_posterior)}"><code>CounterfactualExplanations.Evaluation.faithfulness</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">faithfulness(
    ce::CounterfactualExplanation,
    fun::typeof(Objectives.distance_from_target);
    Œª::AbstractFloat=1.0,
    kwrgs...,
)</code></pre><p>Computes the faithfulness of a counterfactual explanation based on the cosine similarity between the counterfactual and samples drawn from the model posterior through SGLD (see <a href="#CounterfactualExplanations.Evaluation.distance_from_posterior-Tuple{AbstractCounterfactualExplanation}"><code>distance_from_posterior</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/faithfulness.jl#L9-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.get_global_ce_transform-Tuple{}" href="#CounterfactualExplanations.Evaluation.get_global_ce_transform-Tuple{}"><code>CounterfactualExplanations.Evaluation.get_global_ce_transform</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Get the global CE transformer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.global_ce_transform-Tuple{CounterfactualExplanations.Evaluation.AbstractCETransformer}" href="#CounterfactualExplanations.Evaluation.global_ce_transform-Tuple{CounterfactualExplanations.Evaluation.AbstractCETransformer}"><code>CounterfactualExplanations.Evaluation.global_ce_transform</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">global_ce_transform(transformer::AbstractCETransformer)</code></pre><p>Sets the global CE transformer to <code>transformer</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.global_output_identifier-Tuple{CounterfactualExplanations.Evaluation.AbstractOutputIdentifier}" href="#CounterfactualExplanations.Evaluation.global_output_identifier-Tuple{CounterfactualExplanations.Evaluation.AbstractOutputIdentifier}"><code>CounterfactualExplanations.Evaluation.global_output_identifier</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">global_output_identifier(identifier::AbstractOutputIdentifier)</code></pre><p>Set the global output identifier to <code>identifier</code> and return its string representation. The global output identifier is used by default for all serialization operations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L48-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.global_serializer-Tuple{CounterfactualExplanations.Evaluation.AbstractSerializer}" href="#CounterfactualExplanations.Evaluation.global_serializer-Tuple{CounterfactualExplanations.Evaluation.AbstractSerializer}"><code>CounterfactualExplanations.Evaluation.global_serializer</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">global_serializer(serializer::AbstractSerializer)</code></pre><p>Set the global serializer to <code>serializer</code> and return its state. The global serializer is used by default for all serialization operations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.plausibility-Tuple{CounterfactualExplanation, CounterfactualExplanations.Objectives.EnergyDifferential}" href="#CounterfactualExplanations.Evaluation.plausibility-Tuple{CounterfactualExplanation, CounterfactualExplanations.Objectives.EnergyDifferential}"><code>CounterfactualExplanations.Evaluation.plausibility</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plausibility(
    ce::CounterfactualExplanation,
    fun::typeof(Objectives.distance_from_target);
    K=nothing,
    kwrgs...,
)</code></pre><p>Computes the plausibility of a counterfactual explanation based on the cosine similarity between the counterfactual and samples drawn from the target distribution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/plausibility/plausibility.jl#L89-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.plausibility-Tuple{CounterfactualExplanation, typeof(CounterfactualExplanations.Objectives.distance_from_target)}" href="#CounterfactualExplanations.Evaluation.plausibility-Tuple{CounterfactualExplanation, typeof(CounterfactualExplanations.Objectives.distance_from_target)}"><code>CounterfactualExplanations.Evaluation.plausibility</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plausibility(
    ce::CounterfactualExplanation,
    fun::typeof(Objectives.distance_from_target);
    K=nothing,
    kwrgs...,
)</code></pre><p>Computes the plausibility of a counterfactual explanation based on the distance between the counterfactual and samples drawn from the target distribution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/plausibility/plausibility.jl#L7-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.plausibility-Tuple{CounterfactualExplanation, typeof(CounterfactualExplanations.Objectives.distance_from_target_cosine)}" href="#CounterfactualExplanations.Evaluation.plausibility-Tuple{CounterfactualExplanation, typeof(CounterfactualExplanations.Objectives.distance_from_target_cosine)}"><code>CounterfactualExplanations.Evaluation.plausibility</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plausibility(
    ce::CounterfactualExplanation,
    fun::typeof(Objectives.distance_from_target_cosine);
    K=nothing,
    kwrgs...,
)</code></pre><p>Computes the plausibility of a counterfactual explanation based on the cosine similarity between the counterfactual and samples drawn from the target distribution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/plausibility/plausibility.jl#L48-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.plausibility_cosine-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.plausibility_cosine-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.plausibility_cosine</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plausibility_cosine(ce::CounterfactualExplanation; kwrgs...)</code></pre><p>Computes the plausibility of a counterfactual explanation based on the cosine similarity between the counterfactual and samples drawn from the target distribution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/plausibility/plausibility.jl#L80-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.plausibility_distance_from_target-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.plausibility_distance_from_target-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.plausibility_distance_from_target</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plausibility_distance_from_target(ce::CounterfactualExplanation; kwrgs...)</code></pre><p>Computes the plausibility of a counterfactual explanation based on the distance between the counterfactual and samples drawn from the target distribution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/plausibility/plausibility.jl#L39-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.plausibility_energy_differential-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.plausibility_energy_differential-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.plausibility_energy_differential</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plausibility_energy_differential(ce::CounterfactualExplanation; kwrgs...)</code></pre><p>Computes the plausibility of a counterfactual explanation based on the energy differential between the counterfactual and samples drawn from the target distribution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/plausibility/plausibility.jl#L106-L110">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.redundancy-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.redundancy-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.redundancy</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">redundancy(ce::CounterfactualExplanation)</code></pre><p>Computes the feature redundancy: that is, the number of features that remain unchanged from their original, factual values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/measures.jl#L26-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.validity-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.validity-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.validity</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">validity(ce::CounterfactualExplanation; Œ≥=0.5)</code></pre><p>Checks of the counterfactual search has been successful with respect to the probability threshold <code>Œ≥</code>. In case multiple counterfactuals were generated, the function returns the proportion of successful counterfactuals.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/measures.jl#L6-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.CounterfactualData-Tuple{AbstractMatrix, Union{AbstractMatrix, AbstractVector}}" href="#CounterfactualExplanations.DataPreprocessing.CounterfactualData-Tuple{AbstractMatrix, Union{AbstractMatrix, AbstractVector}}"><code>CounterfactualExplanations.DataPreprocessing.CounterfactualData</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CounterfactualData(
    X::AbstractMatrix,
    y::RawOutputArrayType;
    mutability::Union{Vector{Symbol},Nothing}=nothing,
    domain::Union{Any,Nothing}=nothing,
    features_categorical::Union{Vector{Vector{Int}},Nothing}=nothing,
    features_continuous::Union{Vector{Int},Nothing}=nothing,
    input_encoder::Union{Nothing,InputTransformer,TypedInputTransformer}=nothing,
)</code></pre><p>This outer constructor method prepares features <code>X</code> and labels <code>y</code> to be used with the package. Mutability and domain constraints can be added for the features. The function also accepts arguments that specify which features are categorical and which are continues. These arguments are currently not used. </p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">using CounterfactualExplanations.Data
x, y = toy_data_linear()
X = hcat(x...)
counterfactual_data = CounterfactualData(X,y&#39;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L123-L145">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.CounterfactualData-Tuple{Tables.MatrixTable, Union{AbstractMatrix, AbstractVector}}" href="#CounterfactualExplanations.DataPreprocessing.CounterfactualData-Tuple{Tables.MatrixTable, Union{AbstractMatrix, AbstractVector}}"><code>CounterfactualExplanations.DataPreprocessing.CounterfactualData</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function CounterfactualData(
    X::Tables.MatrixTable,
    y::RawOutputArrayType;
    kwrgs...
)</code></pre><p>Outer constructor method that accepts a <code>Tables.MatrixTable</code>. By default, the indices of categorical and continuous features are automatically inferred the features&#39; <code>scitype</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L197-L206">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.apply_domain_constraints-Tuple{CounterfactualData, AbstractArray}" href="#CounterfactualExplanations.DataPreprocessing.apply_domain_constraints-Tuple{CounterfactualData, AbstractArray}"><code>CounterfactualExplanations.DataPreprocessing.apply_domain_constraints</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">apply_domain_constraints(counterfactual_data::CounterfactualData, x::AbstractArray)</code></pre><p>A subroutine that is used to apply the predetermined domain constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/data_contraints.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.fit_transformer!-Tuple{CounterfactualData, Union{Nothing, CausalInference.SCM, CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel, MultivariateStats.AbstractDimensionalityReduction, StatsBase.AbstractDataTransform, Type{&lt;:StatsBase.AbstractDataTransform}, Type{&lt;:MultivariateStats.AbstractDimensionalityReduction}, Type{&lt;:CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel}, Type{&lt;:CausalInference.SCM}}}" href="#CounterfactualExplanations.DataPreprocessing.fit_transformer!-Tuple{CounterfactualData, Union{Nothing, CausalInference.SCM, CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel, MultivariateStats.AbstractDimensionalityReduction, StatsBase.AbstractDataTransform, Type{&lt;:StatsBase.AbstractDataTransform}, Type{&lt;:MultivariateStats.AbstractDimensionalityReduction}, Type{&lt;:CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel}, Type{&lt;:CausalInference.SCM}}}"><code>CounterfactualExplanations.DataPreprocessing.fit_transformer!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_transformer!(
    data::CounterfactualData,
    input_encoder::Union{Nothing,InputTransformer,TypedInputTransformer};
    kwargs...,
)</code></pre><p>Fit a transformer to the data in place.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/transformer.jl#L3-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Nothing}" href="#CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Nothing}"><code>CounterfactualExplanations.DataPreprocessing.fit_transformer</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_transformer(data::CounterfactualData, input_encoder::Nothing; kwargs...)</code></pre><p>Fit a transformer to the data. This is a no-op if <code>input_encoder</code> is <code>Nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/transformer.jl#L21-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Type{&lt;:CausalInference.SCM}}" href="#CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Type{&lt;:CausalInference.SCM}}"><code>CounterfactualExplanations.DataPreprocessing.fit_transformer</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_transformer(
    data::CounterfactualData,
    input_encoder::Type{&lt;:CausalInference.SCM};
    kwargs...,
)</code></pre><p>Fit a transformer to the data for a <code>SCM</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/transformer.jl#L100-L108">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Type{&lt;:CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel}}" href="#CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Type{&lt;:CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel}}"><code>CounterfactualExplanations.DataPreprocessing.fit_transformer</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_transformer(
    data::CounterfactualData,
    input_encoder::Type{GenerativeModels.AbstractGenerativeModel};
    kwargs...,
)</code></pre><p>Fit a transformer to the data for a <code>GenerativeModels.AbstractGenerativeModel</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/transformer.jl#L81-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Type{&lt;:MultivariateStats.AbstractDimensionalityReduction}}" href="#CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Type{&lt;:MultivariateStats.AbstractDimensionalityReduction}}"><code>CounterfactualExplanations.DataPreprocessing.fit_transformer</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_transformer(
    data::CounterfactualData,
    input_encoder::Type{MultivariateStats.AbstractDimensionalityReduction};
    kwargs...,
)</code></pre><p>Fit a transformer to the data for a <code>MultivariateStats.AbstractDimensionalityReduction</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/transformer.jl#L62-L70">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Type{&lt;:StatsBase.AbstractDataTransform}}" href="#CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Type{&lt;:StatsBase.AbstractDataTransform}}"><code>CounterfactualExplanations.DataPreprocessing.fit_transformer</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_transformer(
    data::CounterfactualData,
    input_encoder::Type{StatsBase.AbstractDataTransform};
    kwargs...,
)</code></pre><p>Fit a transformer to the data for a <code>StatsBase.AbstractDataTransform</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/transformer.jl#L41-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Union{CausalInference.SCM, CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel, MultivariateStats.AbstractDimensionalityReduction, StatsBase.AbstractDataTransform}}" href="#CounterfactualExplanations.DataPreprocessing.fit_transformer-Tuple{CounterfactualData, Union{CausalInference.SCM, CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel, MultivariateStats.AbstractDimensionalityReduction, StatsBase.AbstractDataTransform}}"><code>CounterfactualExplanations.DataPreprocessing.fit_transformer</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_transformer(data::CounterfactualData, input_encoder::InputTransformer; kwargs...)</code></pre><p>Fit a transformer to the data for an <code>InputTransformer</code> object. This is a no-op.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/transformer.jl#L30-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.select_factual-Tuple{CounterfactualData, Int64}" href="#CounterfactualExplanations.DataPreprocessing.select_factual-Tuple{CounterfactualData, Int64}"><code>CounterfactualExplanations.DataPreprocessing.select_factual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">select_factual(counterfactual_data::CounterfactualData, index::Int)</code></pre><p>A convenience method that can be used to access the feature matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L178-L182">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.select_factual-Tuple{CounterfactualData, Union{UnitRange{Int64}, Vector{Int64}}}" href="#CounterfactualExplanations.DataPreprocessing.select_factual-Tuple{CounterfactualData, Union{UnitRange{Int64}, Vector{Int64}}}"><code>CounterfactualExplanations.DataPreprocessing.select_factual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">select_factual(counterfactual_data::CounterfactualData, index::Union{Vector{Int},UnitRange{Int}})</code></pre><p>A convenience method that can be used to access the feature matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L187-L191">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData, Any}" href="#CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData, Any}"><code>CounterfactualExplanations.DataPreprocessing.transformable_features</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transformable_features(counterfactual_data::CounterfactualData, input_encoder::Any)</code></pre><p>By default, all continuous features are transformable. This function returns the indices of all continuous features.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L264-L268">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData, Type{CausalInference.SCM}}" href="#CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData, Type{CausalInference.SCM}}"><code>CounterfactualExplanations.DataPreprocessing.transformable_features</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transformable_features(
    counterfactual_data::CounterfactualData, input_encoder::Type{CausalInference.SCM}
)</code></pre><p>Returns the indices of all features that have causal parents.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L292-L298">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData, Type{StatsBase.ZScoreTransform}}" href="#CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData, Type{StatsBase.ZScoreTransform}}"><code>CounterfactualExplanations.DataPreprocessing.transformable_features</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transformable_features(
    counterfactual_data::CounterfactualData, input_encoder::Type{ZScoreTransform}
)</code></pre><p>Returns the indices of all continuous features that can be transformed. For constant features <code>ZScoreTransform</code> returns <code>NaN</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L273-L279">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.transformable_features-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.transformable_features</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transformable_features(counterfactual_data::CounterfactualData)</code></pre><p>Dispatches the <code>transformable_features</code> function to the appropriate method based on the type of the <code>dt</code> field.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L255-L259">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.all_models_catalogue" href="#CounterfactualExplanations.Models.all_models_catalogue"><code>CounterfactualExplanations.Models.all_models_catalogue</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">all_models_catalogue</code></pre><p>A dictionary containing both differentiable and non-differentiable machine learning models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/Models.jl#L46-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.standard_models_catalogue" href="#CounterfactualExplanations.Models.standard_models_catalogue"><code>CounterfactualExplanations.Models.standard_models_catalogue</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">standard_models_catalogue</code></pre><p>A dictionary containing all differentiable machine learning models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/Models.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.AbstractModel-Tuple{AbstractArray}" href="#CounterfactualExplanations.AbstractModel-Tuple{AbstractArray}"><code>CounterfactualExplanations.AbstractModel</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(model::AbstractModel)(X::AbstractArray)</code></pre><p>When called on data <code>x</code>, logits are returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L75-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.DeepEnsemble-Tuple{Any}" href="#CounterfactualExplanations.Models.DeepEnsemble-Tuple{Any}"><code>CounterfactualExplanations.Models.DeepEnsemble</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DeepEnsemble(model; likelihood::Symbol=:classification_binary)</code></pre><p>An outer constructor for a deep ensemble model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/DeepEnsemble.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Linear-Tuple{Any}" href="#CounterfactualExplanations.Models.Linear-Tuple{Any}"><code>CounterfactualExplanations.Models.Linear</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Linear(model; likelihood::Symbol=:classification_binary)</code></pre><p>An outer constructor for a linear model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/Linear.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.MLP-Tuple{Any}" href="#CounterfactualExplanations.Models.MLP-Tuple{Any}"><code>CounterfactualExplanations.Models.MLP</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MLP(model; likelihood::Symbol=:classification_binary)</code></pre><p>An outer constructor for a multi-layer perceptron (MLP) model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/MLP.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model" href="#CounterfactualExplanations.Models.Model"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Model &lt;: AbstractModel</code></pre><p>Constructor for all models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{Any, CounterfactualExplanations.Models.AbstractFluxNN}" href="#CounterfactualExplanations.Models.Model-Tuple{Any, CounterfactualExplanations.Models.AbstractFluxNN}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Model(model, type::AbstractFluxNN; likelihood::Symbol=:classification_binary)</code></pre><p>Overloaded constructor for Flux models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/flux.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{Any, CounterfactualExplanations.Models.AbstractModelType}" href="#CounterfactualExplanations.Models.Model-Tuple{Any, CounterfactualExplanations.Models.AbstractModelType}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Model(model, type::AbstractModelType; likelihood::Symbol=:classification_binary)</code></pre><p>Outer constructor for <code>Model</code> where the atomic model is defined and assumed to be pre-trained.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L60-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, DeepEnsemble}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, DeepEnsemble}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Model)(data::CounterfactualData, type::DeepEnsemble; kwargs...)</code></pre><p>Constructs a deep ensemble for the given data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/DeepEnsemble.jl#L89-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, Linear}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, Linear}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Model)(data::CounterfactualData, type::Linear; kwargs...)</code></pre><p>Constructs a model with one linear layer for the given data. If the output is binary, this corresponds to logistic regression, since model outputs are passed through the sigmoid function. If the output is multi-class, this corresponds to multinomial logistic regression, since model outputs are passed through the softmax function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/Linear.jl#L12-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, MLP}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, MLP}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Model)(data::CounterfactualData, type::MLP; kwargs...)</code></pre><p>Constructs a multi-layer perceptron (MLP) for the given data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/MLP.jl#L12-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Model)(data::CounterfactualData; kwargs...)</code></pre><p>Wrap model <code>M</code> around the data in <code>data</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L96-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualExplanations.Models.AbstractModelType}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualExplanations.Models.AbstractModelType}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Model(type::AbstractModelType; likelihood::Symbol=:classification_binary)</code></pre><p>Outer constructor for <code>Model</code> where the atomic model is not yet defined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L50-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.fit_model" href="#CounterfactualExplanations.Models.fit_model"><code>CounterfactualExplanations.Models.fit_model</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_model(
    counterfactual_data::CounterfactualData, model::Symbol=:MLP;
    kwrgs...
)</code></pre><p>Fits one of the available default models to the <code>counterfactual_data</code>. The <code>model</code> argument can be used to specify the desired model. The available values correspond to the keys of the <a href="#CounterfactualExplanations.Models.all_models_catalogue"><code>all_models_catalogue</code></a> dictionary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L170-L177">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.fit_model-Tuple{CounterfactualData, CounterfactualExplanations.Models.AbstractModelType}" href="#CounterfactualExplanations.Models.fit_model-Tuple{CounterfactualData, CounterfactualExplanations.Models.AbstractModelType}"><code>CounterfactualExplanations.Models.fit_model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fit_model(
    counterfactual_data::CounterfactualData, type::AbstractModelType; kwrgs...
)</code></pre><p>A wrapper function to fit a model to the <code>counterfactual_data</code> for a given <code>type</code> of model.</p><p><strong>Arguments</strong></p><ul><li><code>counterfactual_data::CounterfactualData</code>: The data to be used for training the model.</li><li><code>type::AbstractModelType</code>: The type of model to be trained, e.g., <code>MLP</code>, <code>DecisionTreeModel</code>, etc.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using CounterfactualExplanations

julia&gt; using CounterfactualExplanations.Models

julia&gt; using TaijaData

julia&gt; data = CounterfactualData(load_linearly_separable()...);

julia&gt; M = fit_model(data, Linear())
CounterfactualExplanations.Models.Model(Chain(Dense(2 =&gt; 2)), :classification_multi, CounterfactualExplanations.Models.Fitresult(Chain(Dense(2 =&gt; 2)), Dict{Any, Any}()), Linear())</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L132-L158">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}" href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}"><code>CounterfactualExplanations.Models.logits</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">logits(M::Model, X::AbstractArray)</code></pre><p>Returns the logits of the model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L82-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.AbstractFluxNN, AbstractArray}" href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.AbstractFluxNN, AbstractArray}"><code>CounterfactualExplanations.Models.logits</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">logits(M::Model, type::AbstractFluxNN, X::AbstractArray)</code></pre><p>Overloads the <code>logits</code> function for Flux models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/flux.jl#L28-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.MLJModelType, AbstractArray}" href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.MLJModelType, AbstractArray}"><code>CounterfactualExplanations.Models.logits</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">logits(M::Model, type::MLJModelType, X::AbstractArray)</code></pre><p>Overloads the <a href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}">logits</a> method for MLJ models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/mlj.jl#L55-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, DeepEnsemble, AbstractArray}" href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, DeepEnsemble, AbstractArray}"><code>CounterfactualExplanations.Models.logits</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">logits(M::Model, type::DeepEnsemble, X::AbstractArray)</code></pre><p>Overloads the <code>logits</code> function for deep ensembles.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/DeepEnsemble.jl#L13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.model_evaluation-Tuple{AbstractModel, CounterfactualData}" href="#CounterfactualExplanations.Models.model_evaluation-Tuple{AbstractModel, CounterfactualData}"><code>CounterfactualExplanations.Models.model_evaluation</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">model_evaluation(M::AbstractModel, test_data::CounterfactualData)</code></pre><p>Helper function to compute F-Score for <code>AbstractModel</code> on a (test) data set. By default, it computes the accuracy. Any other measure, e.g. from the <a href="https://juliaai.github.io/StatisticalMeasures.jl/dev/auto_generated_list_of_measures/#aliases">StatisticalMeasures</a> package, can be passed as an argument. Currently, only measures applicable to classification tasks are supported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/utils.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.predict_label-Tuple{AbstractModel, CounterfactualData, AbstractArray}" href="#CounterfactualExplanations.Models.predict_label-Tuple{AbstractModel, CounterfactualData, AbstractArray}"><code>CounterfactualExplanations.Models.predict_label</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">predict_label(M::AbstractModel, counterfactual_data::CounterfactualData, X::AbstractArray)</code></pre><p>Returns the predicted output label for a given model <code>M</code>, data set <code>counterfactual_data</code> and input data <code>X</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/utils.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.predict_label-Tuple{AbstractModel, CounterfactualData}" href="#CounterfactualExplanations.Models.predict_label-Tuple{AbstractModel, CounterfactualData}"><code>CounterfactualExplanations.Models.predict_label</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">predict_label(M::AbstractModel, counterfactual_data::CounterfactualData)</code></pre><p>Returns the predicted output labels for all data points of data set <code>counterfactual_data</code> for a given model <code>M</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/utils.jl#L75-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.predict_proba-Tuple{AbstractModel, Union{Nothing, CounterfactualData}, Union{Nothing, AbstractArray}}" href="#CounterfactualExplanations.Models.predict_proba-Tuple{AbstractModel, Union{Nothing, CounterfactualData}, Union{Nothing, AbstractArray}}"><code>CounterfactualExplanations.Models.predict_proba</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">predict_proba(M::AbstractModel, counterfactual_data::CounterfactualData, X::Union{Nothing,AbstractArray})</code></pre><p>Returns the predicted output probabilities for a given model <code>M</code>, data set <code>counterfactual_data</code> and input data <code>X</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/utils.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}" href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}"><code>CounterfactualExplanations.Models.probs</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">probs(M::Model, X::AbstractArray)</code></pre><p>Returns the probabilities of the model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L89-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.AbstractFluxNN, AbstractArray}" href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.AbstractFluxNN, AbstractArray}"><code>CounterfactualExplanations.Models.probs</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">probs(M::Model, type::AbstractFluxNN, X::AbstractArray)</code></pre><p>Overloads the <code>probs</code> function for Flux models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/flux.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.MLJModelType, AbstractArray}" href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.MLJModelType, AbstractArray}"><code>CounterfactualExplanations.Models.probs</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">probs(
    M::Model,
    type::MLJModelType,
    X::AbstractArray,
)</code></pre><p>Overloads the <a href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}"><code>probs</code></a> method for MLJ models. </p><p><strong>Note for developers</strong></p><p>Note that currently the underlying MLJ methods (<code>reformat</code>, <code>predict</code>) are incompatible with Zygote&#39;s autodiff. For differentiable MLJ models, the <a href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}"><code>probs</code>`</a> and <a href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}"><code>logits</code></a> methods need to be overloaded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/mlj.jl#L28-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, DeepEnsemble, AbstractArray}" href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, DeepEnsemble, AbstractArray}"><code>CounterfactualExplanations.Models.probs</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">probs(M::Model, type::DeepEnsemble, X::AbstractArray)</code></pre><p>Overloads the <code>probs</code> function for deep ensembles.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/DeepEnsemble.jl#L22-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.generator_catalogue" href="#CounterfactualExplanations.Generators.generator_catalogue"><code>CounterfactualExplanations.Generators.generator_catalogue</code></a> ‚Äî <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A dictionary containing the constructors of all available counterfactual generators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/Generators.jl#L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.AbstractGradientBasedGenerator" href="#CounterfactualExplanations.Generators.AbstractGradientBasedGenerator"><code>CounterfactualExplanations.Generators.AbstractGradientBasedGenerator</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractGradientBasedGenerator</code></pre><p>An abstract type that serves as the base type for gradient-based counterfactual generators. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/base.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.AbstractNonGradientBasedGenerator" href="#CounterfactualExplanations.Generators.AbstractNonGradientBasedGenerator"><code>CounterfactualExplanations.Generators.AbstractNonGradientBasedGenerator</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractNonGradientBasedGenerator</code></pre><p>An abstract type that serves as the base type for non gradient-based counterfactual generators. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/non_gradient_based/base.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.FeatureTweakGenerator" href="#CounterfactualExplanations.Generators.FeatureTweakGenerator"><code>CounterfactualExplanations.Generators.FeatureTweakGenerator</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Feature Tweak counterfactual generator class.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/non_gradient_based/feature_tweak/feature_tweak.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.FeatureTweakGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.FeatureTweakGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.FeatureTweakGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FeatureTweakGenerator(; penalty::Union{Nothing,Function,Vector{Function}}=Objectives.distance_l2, œµ::AbstractFloat=0.1)</code></pre><p>Constructs a new Feature Tweak Generator object.</p><p>Uses the L2-norm as the penalty to measure the distance between the counterfactual and the factual. According to the paper by Tolomei et al., another recommended choice for the penalty in addition to the L2-norm is the L0-norm. The L0-norm simply minimizes the number of features that are changed through the tweak.</p><p><strong>Arguments</strong></p><ul><li><code>penalty::Penalty</code>: The penalty function to use for the generator. Defaults to <code>distance_l2</code>.</li><li><code>œµ::AbstractFloat</code>: The tolerance value for the feature tweaks. Described at length in Tolomei et al. (https://arxiv.org/pdf/1706.06691.pdf). Defaults to 0.1.</li></ul><p><strong>Returns</strong></p><ul><li><code>generator::FeatureTweakGenerator</code>: A non-gradient-based generator that can be used to generate counterfactuals using the feature tweak method.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/non_gradient_based/feature_tweak/feature_tweak.jl#L9-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.GradientBasedGenerator" href="#CounterfactualExplanations.Generators.GradientBasedGenerator"><code>CounterfactualExplanations.Generators.GradientBasedGenerator</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base class for gradient-based counterfactual generators.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/base.jl#L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.GradientBasedGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.GradientBasedGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.GradientBasedGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GradientBasedGenerator(;
	loss::Union{Nothing,Function}=nothing,
	penalty::Penalty=nothing,
	Œª::Union{Nothing,AbstractFloat,Vector{AbstractFloat}}=nothing,
	latent_space::Bool::false,
	opt::Flux.Optimise.AbstractOptimiser=Flux.Descent(),
    generative_model_params::NamedTuple=(;),
)</code></pre><p>Default outer constructor for <code>GradientBasedGenerator</code>.</p><p><strong>Arguments</strong></p><ul><li><code>loss::Union{Nothing,Function}=nothing</code>: The loss function used by the model.</li><li><code>penalty::Penalty=nothing</code>: A penalty function for the generator to penalize counterfactuals too far from the original point.</li><li><code>Œª::Union{Nothing,AbstractFloat,Vector{AbstractFloat}}=nothing</code>: The weight of the penalty function.</li><li><code>latent_space::Bool=false</code>: Whether to use the latent space of a generative model to generate counterfactuals.</li><li><code>opt::Flux.Optimise.AbstractOptimiser=Flux.Descent()</code>: The optimizer to use for the generator.</li><li><code>generative_model_params::NamedTuple</code>: The parameters of the generative model associated with the generator.</li></ul><p><strong>Returns</strong></p><ul><li><code>generator::GradientBasedGenerator</code>: A gradient-based counterfactual generator.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/base.jl#L22-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.JSMADescent" href="#CounterfactualExplanations.Generators.JSMADescent"><code>CounterfactualExplanations.Generators.JSMADescent</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>An optimisation rule that can be used to implement a Jacobian-based Saliency Map Attack.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/optimizers/JSMADescent.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.JSMADescent-Tuple{}" href="#CounterfactualExplanations.Generators.JSMADescent-Tuple{}"><code>CounterfactualExplanations.Generators.JSMADescent</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Outer constructor for the <a href="../explanation/optimisers/jsma/#JSMADescent"><code>JSMADescent</code></a> rule.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/optimizers/JSMADescent.jl#L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.CLUEGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.CLUEGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.CLUEGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>CLUEGenerator</code>. For details, see Antoran et al. (<a href="https://arxiv.org/abs/2006.06848">2021</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.ClaPROARGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.ClaPROARGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.ClaPROARGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>ClaPGenerator</code>. For details, see Altmeyer et al. (<a href="https://ieeexplore.ieee.org/abstract/document/10136130">2023</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.DiCEGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.DiCEGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.DiCEGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>DiCEGenerator</code>. For details, see Mothilal et al. (<a href="https://arxiv.org/abs/1905.07697">2020</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.ECCoGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.ECCoGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.ECCoGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>ECCoGenerator</code>. This corresponds to the generator proposed in https://arxiv.org/abs/2312.10648, without the conformal set size penalty. For details, see Altmeyer et al. (<a href="https://ojs.aaai.org/index.php/AAAI/article/view/28956">2024</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.GenericGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.GenericGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.GenericGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>GenericGenerator</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.GravitationalGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.GravitationalGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.GravitationalGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>GravitationalGenerator</code>. For details, see Altmeyer et al. (<a href="https://ieeexplore.ieee.org/abstract/document/10136130">2023</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.GreedyGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.GreedyGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.GreedyGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>GreedyGenerator</code>. For details, see Schut et al. (<a href="https://proceedings.mlr.press/v130/schut21a/schut21a.pdf">2021</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.ProbeGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.ProbeGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.ProbeGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>ProbeGenerator</code>. For details, see Pawelczyk et al. (<a href="https://proceedings.mlr.press/v151/pawelczyk22a/pawelczyk22a.pdf">2022</a>).</p><p><strong>Warning</strong></p><p>The <code>ProbeGenerator</code> is currenlty not working adequately. In particular, gradients are not computed with respect to the Hinge loss term proposed in the paper. It is still possible, however, to use this generator to achieve a desired invalidation rate. See issue <a href="https://github.com/JuliaTrustworthyAI/CounterfactualExplanations.jl/issues/376">#376</a> for details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L79-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.REVISEGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.REVISEGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.REVISEGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>REVISEGenerator</code>. For details, see Joshi et al. (<a href="https://arxiv.org/abs/1907.09615">2019</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.WachterGenerator-Tuple{}" href="#CounterfactualExplanations.Generators.WachterGenerator-Tuple{}"><code>CounterfactualExplanations.Generators.WachterGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Constructor for <code>WachterGenerator</code>. For details, see Wachter et al. (<a href="https://arxiv.org/abs/1711.00399">2018</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generators.jl#L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.generate_perturbations-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.generate_perturbations-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.generate_perturbations</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_perturbations(
    generator::AbstractGenerator, ce::AbstractCounterfactualExplanation
)</code></pre><p>The default method to generate feature perturbations for any generator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/generate_perturbations.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.generate_perturbations-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.generate_perturbations-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.generate_perturbations</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_perturbations(generator::AbstractGradientBasedGenerator, ce::AbstractCounterfactualExplanation)</code></pre><p>The default method to generate feature perturbations for gradient-based generators through simple gradient descent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generate_perturbations.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.@objective-Tuple{Any, Any}" href="#CounterfactualExplanations.Generators.@objective-Tuple{Any, Any}"><code>CounterfactualExplanations.Generators.@objective</code></a> ‚Äî <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">objective(generator, ex)</code></pre><p>A macro that can be used to define the counterfactual search objective.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/macros.jl#L9-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.@search_feature_space-Tuple{Any}" href="#CounterfactualExplanations.Generators.@search_feature_space-Tuple{Any}"><code>CounterfactualExplanations.Generators.@search_feature_space</code></a> ‚Äî <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">search_feature_space(generator)</code></pre><p>A simple macro that can be used to specify feature space search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/macros.jl#L48-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.@search_latent_space-Tuple{Any}" href="#CounterfactualExplanations.Generators.@search_latent_space-Tuple{Any}"><code>CounterfactualExplanations.Generators.@search_latent_space</code></a> ‚Äî <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">search_latent_space(generator)</code></pre><p>A simple macro that can be used to specify latent space search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/macros.jl#L39-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.@with_optimiser-Tuple{Any, Any}" href="#CounterfactualExplanations.Generators.@with_optimiser-Tuple{Any, Any}"><code>CounterfactualExplanations.Generators.@with_optimiser</code></a> ‚Äî <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">with_optimiser(generator, optimiser)</code></pre><p>A simple macro that can be used to specify the optimiser to be used.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/macros.jl#L57-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.ddp_diversity-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.ddp_diversity-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.ddp_diversity</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ddp_diversity(
    ce::AbstractCounterfactualExplanation;
    perturbation_size=1e-5
)</code></pre><p>Evaluates how diverse the counterfactuals are using a Determinantal Point Process (DDP).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L77-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance(
    ce::AbstractCounterfactualExplanation;
    from::Union{Nothing,AbstractArray}=nothing,
    agg=mean,
    p::Real=1,
    weights::Union{Nothing,AbstractArray}=nothing,
)</code></pre><p>Computes the distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/distance_utils.jl#L3-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance_cosine-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance_cosine-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance_cosine</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_cosine(ce::AbstractCounterfactualExplanation)</code></pre><p>Computes the distance of the counterfactual to the original factual using cosine similarity. See also: <a href="#CounterfactualExplanations.Objectives.cos_dist-Tuple{Any, Any}"><code>cos_dist</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L68-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance_from_target-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance_from_target-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance_from_target</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_from_target(
    ce::AbstractCounterfactualExplanation;
    K::Int=50
)</code></pre><p>Computes the distance of the counterfactual from samples in the target main. If <code>choose_randomly</code> is <code>true</code>, the function will randomly sample <code>K</code> neighbours from the target manifold. Otherwise, it will compute the pairwise distances and select the <code>K</code> closest neighbours.</p><p><strong>Arguments</strong></p><ul><li><code>ce::AbstractCounterfactualExplanation</code>: The counterfactual explanation.</li><li><code>K::Int=50</code>: The number of neighbours to sample.</li><li><code>choose_randomly::Bool=true</code>: Whether to sample neighbours randomly.</li><li><code>kwrgs...</code>: Additional keyword arguments for the distance function.</li></ul><p><strong>Returns</strong></p><ul><li><code>Œî::AbstractFloat</code>: The distance from the counterfactual to the target manifold.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L98-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance_from_target_cosine-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance_from_target_cosine-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance_from_target_cosine</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_from_target_cosine(ce::AbstractCounterfactualExplanation;kwrgs...)</code></pre><p>Compute the distance from a counterfactual to the target manifold using cosine similarity. See also: <a href="#CounterfactualExplanations.Objectives.cos_dist-Tuple{Any, Any}"><code>cos_dist</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>ce::AbstractCounterfactualExplanation</code>: The counterfactual explanation object.</li><li><code>kwrgs...</code>: Additional keyword arguments for the distance function.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L162-L170">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance_l0-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance_l0-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance_l0</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_l0(ce::AbstractCounterfactualExplanation)</code></pre><p>Computes the L0 distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L32-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance_l1-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance_l1-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance_l1</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_l1(ce::AbstractCounterfactualExplanation)</code></pre><p>Computes the L1 distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L41-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance_l2-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance_l2-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance_l2</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_l2(ce::AbstractCounterfactualExplanation)</code></pre><p>Computes the L2 (Euclidean) distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L50-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance_linf-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance_linf-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance_linf</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_linf(ce::AbstractCounterfactualExplanation)</code></pre><p>Computes the L-inf distance of the counterfactual to the original factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L59-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.distance_mad-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.distance_mad-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.distance_mad</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_mad(ce::AbstractCounterfactualExplanation; agg=mean)</code></pre><p>This is the distance measure proposed by Wachter et al. (2017).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L9-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.hinge_loss-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.hinge_loss-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.hinge_loss</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">hinge_loss(ce::AbstractCounterfactualExplanation)</code></pre><p>Calculates the hinge loss of a counterfactual explanation with <code>InvalidationRateConvergence</code>.</p><p><strong>Arguments</strong></p><ul><li><code>ce::AbstractCounterfactualExplanation</code>: The counterfactual explanation to calculate the hinge loss for.</li></ul><p><strong>Returns</strong></p><p>The hinge loss of the counterfactual explanation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L310-L320">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.predictive_entropy-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.predictive_entropy-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.predictive_entropy</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">predictive_entropy(ce::AbstractCounterfactualExplanation; agg=Statistics.mean)</code></pre><p>Computes the predictive entropy of the counterfactuals. Explained in https://arxiv.org/abs/1406.2541.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/loss_functions.jl#L47-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Flux.Losses.logitbinarycrossentropy-Tuple{AbstractCounterfactualExplanation}" href="#Flux.Losses.logitbinarycrossentropy-Tuple{AbstractCounterfactualExplanation}"><code>Flux.Losses.logitbinarycrossentropy</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Flux.Losses.logitbinarycrossentropy(ce::AbstractCounterfactualExplanation)</code></pre><p>Simply extends the <code>logitbinarycrossentropy</code> method to work with objects of type <code>AbstractCounterfactualExplanation</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/loss_functions.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Flux.Losses.logitcrossentropy-Tuple{AbstractCounterfactualExplanation}" href="#Flux.Losses.logitcrossentropy-Tuple{AbstractCounterfactualExplanation}"><code>Flux.Losses.logitcrossentropy</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Flux.Losses.logitcrossentropy(ce::AbstractCounterfactualExplanation)</code></pre><p>Simply extends the <code>logitcrossentropy</code> method to work with objects of type <code>AbstractCounterfactualExplanation</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/loss_functions.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Flux.Losses.mse-Tuple{AbstractCounterfactualExplanation}" href="#Flux.Losses.mse-Tuple{AbstractCounterfactualExplanation}"><code>Flux.Losses.mse</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Flux.Losses.mse(ce::AbstractCounterfactualExplanation)</code></pre><p>Simply extends the <code>mse</code> method to work with objects of type <code>AbstractCounterfactualExplanation</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/loss_functions.jl#L33-L37">source</a></section></article><h2 id="Internal-functions"><a class="docs-heading-anchor" href="#Internal-functions">Internal functions</a><a id="Internal-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.CRE" href="#CounterfactualExplanations.CRE"><code>CounterfactualExplanations.CRE</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CRE &lt;: AbstractCounterfactualExplanation</code></pre><p>A Counterfactual Rule Explanation (CRE) is a global explanation for a given <code>target</code>, model <code>M</code>, <code>data</code> and <code>generator</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/CRE.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.CRE-Tuple{AbstractArray}" href="#CounterfactualExplanations.CRE-Tuple{AbstractArray}"><code>CounterfactualExplanations.CRE</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(cre::CRE)(x::AbstractArray)</code></pre><p>Generates a local counterfactual point explanation for <code>x</code> using the <code>generator</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/CRE.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DecisionTreeModel" href="#CounterfactualExplanations.DecisionTreeModel"><code>CounterfactualExplanations.DecisionTreeModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DecisionTreeModel</code></pre><p>Concrete type for tree-based models from <code>DecisionTree.jl</code>. Since <code>DecisionTree.jl</code> has an MLJ interface, we subtype the <code>MLJModelType</code> model type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/extensions/DecisionTreeExt.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.FluxModelParams" href="#CounterfactualExplanations.FluxModelParams"><code>CounterfactualExplanations.FluxModelParams</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FluxModelParams</code></pre><p>Default MLP training parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L142-L146">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.JEM" href="#CounterfactualExplanations.JEM"><code>CounterfactualExplanations.JEM</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">JEM</code></pre><p>Concrete type for joint-energy models from <code>JointEnergyModels</code>. Since <code>JointEnergyModels</code> has an MLJ interface, we subtype the <code>MLJModelType</code> model type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/extensions/JEMExt.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.LaplaceReduxModel" href="#CounterfactualExplanations.LaplaceReduxModel"><code>CounterfactualExplanations.LaplaceReduxModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LaplaceReduxModel</code></pre><p>Concrete type for neural networks with Laplace Approximation from the <code>LaplaceRedux</code> package. Currently subtyping the <code>AbstractFluxNN</code> model type, although this may be changed to MLJ in the future.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/extensions/LaplaceReduxExt.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.NeuroTreeModel" href="#CounterfactualExplanations.NeuroTreeModel"><code>CounterfactualExplanations.NeuroTreeModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NeuroTreeModel</code></pre><p>Concrete type for differentiable tree-based models from <code>NeuroTreeModels</code>. Since <code>NeuroTreeModels</code> has an MLJ interface, we subtype the <code>MLJModelType</code> model type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/extensions/NeuroTreeExt.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.RandomForestModel" href="#CounterfactualExplanations.RandomForestModel"><code>CounterfactualExplanations.RandomForestModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RandomForestModel</code></pre><p>Concrete type for random forest model from <code>DecisionTree.jl</code>. Since the <code>DecisionTree</code> package has an MLJ interface, we subtype the <code>MLJModelType</code> model type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/extensions/DecisionTreeExt.jl#L15-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Rule" href="#CounterfactualExplanations.Rule"><code>CounterfactualExplanations.Rule</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Rule</code></pre><p>A <code>Rule</code> is just a list of bounds for the different features. See also <a href="#CounterfactualExplanations.CRE"><code>CRE</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/CRE.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.Broadcast.broadcastable-Tuple{AbstractGenerator}" href="#Base.Broadcast.broadcastable-Tuple{AbstractGenerator}"><code>Base.Broadcast.broadcastable</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Treat <code>AbstractGenerator</code> as scalar when broadcasting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/base_types.jl#L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.Broadcast.broadcastable-Tuple{AbstractModel}" href="#Base.Broadcast.broadcastable-Tuple{AbstractModel}"><code>Base.Broadcast.broadcastable</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Treat <code>AbstractModel</code> as scalar when broadcasting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/base_types.jl#L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.Broadcast.broadcastable-Tuple{AbstractPenalty}" href="#Base.Broadcast.broadcastable-Tuple{AbstractPenalty}"><code>Base.Broadcast.broadcastable</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Treat <code>AbstractPenalty</code> as scalar when broadcasting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/base_types.jl#L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.adjust_shape!-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.adjust_shape!-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.adjust_shape!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">adjust_shape!(ce::CounterfactualExplanation)</code></pre><p>A convenience method that adjusts the dimensions of the counterfactual state and related fields.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/utils.jl#L54-L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.adjust_shape-Tuple{CounterfactualExplanation, AbstractArray}" href="#CounterfactualExplanations.adjust_shape-Tuple{CounterfactualExplanation, AbstractArray}"><code>CounterfactualExplanations.adjust_shape</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">adjust_shape(
    ce::CounterfactualExplanation, 
    x::AbstractArray
)</code></pre><p>A convenience method that adjusts the dimensions of <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/utils.jl#L41-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.already_in_target_class-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.already_in_target_class-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.already_in_target_class</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">already_in_target_class(ce::CounterfactualExplanation)</code></pre><p>Check if the factual is already in the target class.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/termination.jl#L28-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.apply_domain_constraints!-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.apply_domain_constraints!-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.apply_domain_constraints!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">apply_domain_constraints!(ce::CounterfactualExplanation)</code></pre><p>Wrapper function that applies underlying domain constraints.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/search.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.apply_mutability-Tuple{CounterfactualExplanation, AbstractArray}" href="#CounterfactualExplanations.apply_mutability-Tuple{CounterfactualExplanation, AbstractArray}"><code>CounterfactualExplanations.apply_mutability</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">apply_mutability(
    ce::CounterfactualExplanation,
    Œîcounterfactual_state::AbstractArray,
)</code></pre><p>A subroutine that applies mutability constraints to the proposed vector of feature perturbations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/search.jl#L27-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.counterfactual-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">counterfactual(ce::CounterfactualExplanation)</code></pre><p>A convenience method that returns the counterfactual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/info_extraction.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.counterfactual_label-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual_label-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual_label</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">counterfactual_label(ce::CounterfactualExplanation)</code></pre><p>A convenience method that returns the predicted label of the counterfactual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/info_extraction.jl#L55-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.counterfactual_label_path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual_label_path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual_label_path</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">counterfactual_label_path(ce::CounterfactualExplanation)</code></pre><p>Returns the counterfactual labels for each step of the search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/path_tracking.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.counterfactual_probability" href="#CounterfactualExplanations.counterfactual_probability"><code>CounterfactualExplanations.counterfactual_probability</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">counterfactual_probability(ce::CounterfactualExplanation)</code></pre><p>A convenience method that computes the class probabilities of the counterfactual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/info_extraction.jl#L40-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.counterfactual_probability_path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.counterfactual_probability_path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.counterfactual_probability_path</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">counterfactual_probability_path(ce::CounterfactualExplanation)</code></pre><p>Returns the counterfactual probabilities for each step of the search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/path_tracking.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.decode_array-Tuple{CounterfactualData, CausalInference.SCM, AbstractArray}" href="#CounterfactualExplanations.decode_array-Tuple{CounterfactualData, CausalInference.SCM, AbstractArray}"><code>CounterfactualExplanations.decode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decode_array(
    data::CounterfactualData,
    dt::CausalInference.SCM,
    x::AbstractArray,
)</code></pre><p>Helper function to decode an array <code>x</code> using a data transform <code>dt::GenerativeModels.AbstractGenerativeModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L128-L136">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.decode_array-Tuple{CounterfactualData, CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel, AbstractArray}" href="#CounterfactualExplanations.decode_array-Tuple{CounterfactualData, CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel, AbstractArray}"><code>CounterfactualExplanations.decode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decode_array(dt::GenerativeModels.AbstractGenerativeModel, x::AbstractArray)</code></pre><p>Helper function to decode an array <code>x</code> using a data transform <code>dt::GenerativeModels.AbstractGenerativeModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L99-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.decode_array-Tuple{CounterfactualData, MultivariateStats.AbstractDimensionalityReduction, AbstractArray}" href="#CounterfactualExplanations.decode_array-Tuple{CounterfactualData, MultivariateStats.AbstractDimensionalityReduction, AbstractArray}"><code>CounterfactualExplanations.decode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decode_array(dt::MultivariateStats.AbstractDimensionalityReduction, x::AbstractArray)</code></pre><p>Helper function to decode an array <code>x</code> using a data transform <code>dt::MultivariateStats.AbstractDimensionalityReduction</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L69-L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.decode_array-Tuple{CounterfactualData, Nothing, AbstractArray}" href="#CounterfactualExplanations.decode_array-Tuple{CounterfactualData, Nothing, AbstractArray}"><code>CounterfactualExplanations.decode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decode_array(dt::Nothing, x::AbstractArray)</code></pre><p>Helper function to decode an array <code>x</code> using a data transform <code>dt::Nothing</code>. This is a no-op.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L62-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.decode_array-Tuple{CounterfactualData, StatsBase.AbstractDataTransform, AbstractArray}" href="#CounterfactualExplanations.decode_array-Tuple{CounterfactualData, StatsBase.AbstractDataTransform, AbstractArray}"><code>CounterfactualExplanations.decode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decode_array(dt::StatsBase.AbstractDataTransform, x::AbstractArray)</code></pre><p>Helper function to decode an array <code>x</code> using a data transform <code>dt::StatsBase.AbstractDataTransform</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L82-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.decode_state" href="#CounterfactualExplanations.decode_state"><code>CounterfactualExplanations.decode_state</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>function decode_state(     ce::CounterfactualExplanation,     x::Union{AbstractArray,Nothing}=nothing, )</p><p>Applies all the applicable decoding functions:</p><ol><li>If applicable, map the state variable back from the latent space to the feature space.</li><li>If and where applicable, inverse-transform features.</li><li>Reconstruct all categorical encodings.</li></ol><p>Finally, the decoded counterfactual is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L191-L204">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.decode_state!" href="#CounterfactualExplanations.decode_state!"><code>CounterfactualExplanations.decode_state!</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decode_state!(ce::CounterfactualExplanation, x::Union{AbstractArray,Nothing}=nothing)</code></pre><p>In-place version of <code>decode_state</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L225-L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.encode_array-Tuple{CounterfactualData, CausalInference.SCM, AbstractArray}" href="#CounterfactualExplanations.encode_array-Tuple{CounterfactualData, CausalInference.SCM, AbstractArray}"><code>CounterfactualExplanations.encode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">encode_array(data::CounterfactualData, dt::CausalInference.SCM, x::AbstractArray)</code></pre><p>Helper function to encode an array <code>x</code> using a data transform <code>dt::CausalInference.SCM</code>. This is a no-op.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L55-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.encode_array-Tuple{CounterfactualData, CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel, AbstractArray}" href="#CounterfactualExplanations.encode_array-Tuple{CounterfactualData, CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel, AbstractArray}"><code>CounterfactualExplanations.encode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">encode_array(dt::GenerativeModels.AbstractGenerativeModel, x::AbstractArray)</code></pre><p>Helper function to encode an array <code>x</code> using a data transform <code>dt::GenerativeModels.AbstractGenerativeModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.encode_array-Tuple{CounterfactualData, MultivariateStats.AbstractDimensionalityReduction, AbstractArray}" href="#CounterfactualExplanations.encode_array-Tuple{CounterfactualData, MultivariateStats.AbstractDimensionalityReduction, AbstractArray}"><code>CounterfactualExplanations.encode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">encode_array(dt::MultivariateStats.AbstractDimensionalityReduction, x::AbstractArray)</code></pre><p>Helper function to encode an array <code>x</code> using a data transform <code>dt::MultivariateStats.AbstractDimensionalityReduction</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.encode_array-Tuple{CounterfactualData, Nothing, AbstractArray}" href="#CounterfactualExplanations.encode_array-Tuple{CounterfactualData, Nothing, AbstractArray}"><code>CounterfactualExplanations.encode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">encode_array(dt::Nothing, x::AbstractArray)</code></pre><p>Helper function to encode an array <code>x</code> using a data transform <code>dt::Nothing</code>. This is a no-op.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.encode_array-Tuple{CounterfactualData, StatsBase.AbstractDataTransform, AbstractArray}" href="#CounterfactualExplanations.encode_array-Tuple{CounterfactualData, StatsBase.AbstractDataTransform, AbstractArray}"><code>CounterfactualExplanations.encode_array</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">encode_array(dt::StatsBase.AbstractDataTransform, x::AbstractArray)</code></pre><p>Helper function to encode an array <code>x</code> using a data transform <code>dt::StatsBase.AbstractDataTransform</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.encode_state" href="#CounterfactualExplanations.encode_state"><code>CounterfactualExplanations.encode_state</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>function encode_state(     ce::CounterfactualExplanation,      x::Union{AbstractArray,Nothing} = nothing, )</p><p>Applies all required encodings to <code>x</code>:</p><ol><li>If applicable, it maps <code>x</code> to the latent space learned by the generative model.</li><li>If and where applicable, it rescales features. </li></ol><p>Finally, it returns the encoded state variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L150-L162">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.encode_state!" href="#CounterfactualExplanations.encode_state!"><code>CounterfactualExplanations.encode_state!</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">encode_state!(ce::CounterfactualExplanation, x::Union{AbstractArray,Nothing}=nothing)</code></pre><p>In-place version of <code>encode_state</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/encodings.jl#L178-L182">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.factual-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.factual-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.factual</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">factual(ce::CounterfactualExplanation)</code></pre><p>A convenience method to retrieve the factual <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/info_extraction.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.factual_label-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.factual_label-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.factual_label</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">factual_label(ce::CounterfactualExplanation)</code></pre><p>A convenience method to get the predicted label associated with the factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/info_extraction.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.factual_probability-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.factual_probability-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.factual_probability</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">factual_probability(ce::CounterfactualExplanation)</code></pre><p>A convenience method to compute the class probabilities of the factual.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/info_extraction.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.find_potential_neighbours" href="#CounterfactualExplanations.find_potential_neighbours"><code>CounterfactualExplanations.find_potential_neighbours</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_potential_neighbours(ce::CounterfactualExplanation, n::Int=1000)</code></pre><p>Overloads the function for <a href="#CounterfactualExplanations.CounterfactualExplanation"><code>CounterfactualExplanation</code></a> to use the counterfactual data&#39;s labels if no data is provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/utils.jl#L93-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.find_potential_neighbours" href="#CounterfactualExplanations.find_potential_neighbours"><code>CounterfactualExplanations.find_potential_neighbours</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_potential_neighbours(
    ce::AbstractCounterfactualExplanation, data::CounterfactualData, n::Int=1000
)</code></pre><p>Finds potential neighbors for the selected factual data point.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/utils.jl#L74-L80">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.get_meta-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.get_meta-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.get_meta</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_meta(ce::CounterfactualExplanation)</code></pre><p>Returns meta data for a counterfactual explanation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/utils.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.guess_likelihood-Tuple{Union{AbstractMatrix, AbstractVector}}" href="#CounterfactualExplanations.guess_likelihood-Tuple{Union{AbstractMatrix, AbstractVector}}"><code>CounterfactualExplanations.guess_likelihood</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">guess_likelihood(y::RawOutputArrayType)</code></pre><p>Guess the likelihood based on the scientific type of the output array. Returns a symbol indicating the guessed likelihood and the scientific type of the output array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L34-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.guess_loss-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.guess_loss-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.guess_loss</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">guess_loss(ce::CounterfactualExplanation)</code></pre><p>Guesses the loss function to be used for the counterfactual search in case <code>likelihood</code> field is specified for the <a href="#CounterfactualExplanations.AbstractModel"><code>AbstractModel</code></a> instance and no loss function was explicitly declared for <a href="#CounterfactualExplanations.AbstractGenerator"><code>AbstractGenerator</code></a> instance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/utils.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.initialize!-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.initialize!-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.initialize!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize!(ce::CounterfactualExplanation)</code></pre><p>Initializes the counterfactual explanation. This method is called by the constructor. It does the following:</p><ol><li>Creates a dictionary to store information about the search.</li><li>Initializes the counterfactual state.</li><li>Initializes the search path.</li><li>Initializes the loss.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/core_struct.jl#L104-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.initialize_state!-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.initialize_state!-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.initialize_state!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_state!(ce::CounterfactualExplanation)</code></pre><p>Initializes the starting point for the factual(s) in-place.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/initialisation.jl#L38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.initialize_state-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.initialize_state-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.initialize_state</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initialize_state(ce::CounterfactualExplanation)</code></pre><p>Initializes the starting point for the factual(s):</p><ol><li>If <code>ce.initialization</code> is set to <code>:identity</code> or counterfactuals are searched in a latent space, then nothing is done.</li><li>If <code>ce.initialization</code> is set to <code>:add_perturbation</code>, then a random perturbation is added to the factual following following Slack (2021): https://arxiv.org/abs/2106.02666. The authors show that this improves adversarial robustness.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/initialisation.jl#L3-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.outdim-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.outdim-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.outdim</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">outdim(ce::CounterfactualExplanation)</code></pre><p>A convenience method that returns the output dimension of the predictive model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/utils.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.polynomial_decay-Tuple{Real, Real, Real, Int64}" href="#CounterfactualExplanations.polynomial_decay-Tuple{Real, Real, Real, Int64}"><code>CounterfactualExplanations.polynomial_decay</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">polynomial_decay(a::Real, b::Real, decay::Real, t::Int)</code></pre><p>Computes the polynomial decay function as in Welling et al. (2011): https://www.stats.ox.ac.uk/~teh/research/compstats/WelTeh2011a.pdf.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L177-L181">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.reset!-Tuple{CounterfactualExplanations.FluxModelParams}" href="#CounterfactualExplanations.reset!-Tuple{CounterfactualExplanations.FluxModelParams}"><code>CounterfactualExplanations.reset!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reset!(flux_training_params::FluxModelParams)</code></pre><p>Restores the default parameter values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/global_utils.jl#L162-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.steps_exhausted-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.steps_exhausted-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.steps_exhausted</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">steps_exhausted(ce::CounterfactualExplanation)</code></pre><p>A convenience method that checks if the number of maximum iterations has been exhausted.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/termination.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.target_probs_path-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.target_probs_path-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.target_probs_path</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">target_probs_path(ce::CounterfactualExplanation)</code></pre><p>Returns the target probabilities for each step of the search.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/path_tracking.jl#L35-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.update!-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.update!-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.update!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update!(ce::CounterfactualExplanation)</code></pre><p>An important subroutine that updates the counterfactual explanation. It takes a snapshot of the current counterfactual search state and passes it to the generator. Based on the current state the generator generates perturbations. Various constraints are then applied to the proposed vector of feature perturbations. Finally, the counterfactual search state is updated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/counterfactuals/search.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.max_iter-Tuple{AbstractConvergence}" href="#CounterfactualExplanations.Convergence.max_iter-Tuple{AbstractConvergence}"><code>CounterfactualExplanations.Convergence.max_iter</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">max_iter(conv::AbstractConvergence)</code></pre><p>Returns the maximum number of iterations specified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/convergence/Convergence.jl#L59-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.AbstractCETransformer" href="#CounterfactualExplanations.Evaluation.AbstractCETransformer"><code>CounterfactualExplanations.Evaluation.AbstractCETransformer</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>An abstract type for CE transformers.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.AbstractOutputIdentifier" href="#CounterfactualExplanations.Evaluation.AbstractOutputIdentifier"><code>CounterfactualExplanations.Evaluation.AbstractOutputIdentifier</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Abstract type for output identifiers.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.AbstractSerializer" href="#CounterfactualExplanations.Evaluation.AbstractSerializer"><code>CounterfactualExplanations.Evaluation.AbstractSerializer</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Abstract type for serializers.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.EnergySampler" href="#CounterfactualExplanations.Evaluation.EnergySampler"><code>CounterfactualExplanations.Evaluation.EnergySampler</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type that stores information relevant to energy-based posterior sampling from <code>AbstractModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.EnergySampler-Tuple{AbstractModel, Distributions.Distribution, Distributions.Distribution, NTuple{N, Int64} where N, Int64}" href="#CounterfactualExplanations.Evaluation.EnergySampler-Tuple{AbstractModel, Distributions.Distribution, Distributions.Distribution, NTuple{N, Int64} where N, Int64}"><code>CounterfactualExplanations.Evaluation.EnergySampler</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EnergySampler(
    model::AbstractModel,
    ùíüx::Distribution,
    ùíüy::Distribution,
    input_size::Dims,
    yidx::Int;
    opt::Union{Nothing,AbstractSamplingRule}=nothing,
    nsamples::Int=100,
    niter_final::Int=1000,
    ntransitions::Int=0,
    opt_warmup::Union{Nothing,AbstractSamplingRule}=nothing,
    niter::Int=20,
    batch_size::Int=50,
    prob_buffer::AbstractFloat=0.95,
    kwargs...,
)</code></pre><p>Constructor for <code>EnergySampler</code>, which is used to sample from the posterior distribution of the model conditioned on <code>y</code>.</p><p><strong>Arguments</strong></p><ul><li><code>model::AbstractModel</code>: The model to be used for sampling.</li><li><code>data::CounterfactualData</code>: The data to be used for sampling.</li><li><code>y::Any</code>: The conditioning value.</li><li><code>opt::AbstractSamplingRule=ImproperSGLD()</code>: The sampling rule to be used. By default, <code>SGLD</code> is used with <code>a = (2 / std(Uniform()) * std(ùíüx)</code> and <code>b = 1</code> and <code>Œ≥=0.9</code>.</li><li><code>nsamples::Int=100</code>: The number of samples to include in the final empirical posterior distribution.</li><li><code>niter_final::Int=1000</code>: The number of iterations for generating samples from the posterior distribution. Typically, this number will be larger than the number of iterations during PMC training. </li><li><code>ntransitions::Int=0</code>: The number of transitions for (optionally) warming up the sampler. By default, this is set to 0 and the sampler is not warmed up. For valies larger than 0, the sampler is trained through PMC for <code>niter</code> iterations and <code>ntransitions</code> transitions to build a buffer of samples. The buffer is used for posterior sampling.</li><li><code>opt_warmup::Union{Nothing,AbstractSamplingRule}=nothing</code>: The sampling rule to be used for warm-up. By default, <code>ImproperSGLD</code> is used with <code>Œ± = (2 / std(Uniform()) * std(ùíüx)</code> and <code>Œ≥ = 0.005Œ±</code>.</li><li><code>niter::Int=100</code>: The number of iterations for training the sampler through PMC.</li><li><code>batch_size::Int=50</code>: The batch size for training the sampler.</li><li><code>prob_buffer::AbstractFloat=0.5</code>: The probability of drawing samples from the replay buffer. Smaller values will result in more samples being drawn from the prior and typically lead to better mixing and diversity in the samples.</li><li><code>kwargs...</code>: Additional keyword arguments to be passed on to the sampler and PMC.</li></ul><p><strong>Returns</strong></p><ul><li><code>EnergySampler</code>: An instance of <code>EnergySampler</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L18-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.EnergySampler-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.EnergySampler-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.EnergySampler</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EnergySampler(ce::CounterfactualExplanation; kwrgs...)</code></pre><p>Overloads the <code>EnergySampler</code> constructor to accept a <code>CounterfactualExplanation</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L156-L160">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.rand" href="#Base.rand"><code>Base.rand</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Base.rand(sampler::EnergySampler, n::Int=100; retrain=false)</code></pre><p>Overloads the <code>rand</code> method to randomly draw <code>n</code> samples from <code>EnergySampler</code>. If <code>from_posterior</code> is <code>true</code>, the samples are drawn from the posterior distribution. Otherwise, the samples are generated from the model conditioned on the target value using a single chain (see <a href="#CounterfactualExplanations.Evaluation.generate_posterior_samples"><code>generate_posterior_samples</code></a>).</p><p><strong>Arguments</strong></p><ul><li><code>sampler::EnergySampler</code>: The <code>EnergySampler</code> object to be used for sampling.</li><li><code>n::Int=100</code>: The number of samples to draw.</li><li><code>from_posterior::Bool=true</code>: Whether to draw samples from the posterior distribution.</li><li><code>niter::Int=500</code>: The number of iterations for generating samples through Monte Carlo sampling (single chain).</li></ul><p><strong>Returns</strong></p><ul><li><code>AbstractArray</code>: The samples.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L385-L400">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.vcat-Tuple{CounterfactualExplanations.Evaluation.Benchmark, CounterfactualExplanations.Evaluation.Benchmark}" href="#Base.vcat-Tuple{CounterfactualExplanations.Evaluation.Benchmark, CounterfactualExplanations.Evaluation.Benchmark}"><code>Base.vcat</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Base.vcat(bmk1::Benchmark, bmk2::Benchmark)</code></pre><p>Vertically concatenates two <code>Benchmark</code> objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.SerializationState-Tuple{CounterfactualExplanations.Evaluation.NullSerializer}" href="#CounterfactualExplanations.Evaluation.SerializationState-Tuple{CounterfactualExplanations.Evaluation.NullSerializer}"><code>CounterfactualExplanations.Evaluation.SerializationState</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Serializer that does not allow serialization.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.SerializationState-Tuple{CounterfactualExplanations.Evaluation.Serializer}" href="#CounterfactualExplanations.Evaluation.SerializationState-Tuple{CounterfactualExplanations.Evaluation.Serializer}"><code>CounterfactualExplanations.Evaluation.SerializationState</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Serializer that allows serialization.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/serialization.jl#L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.TransformationFunction-Tuple{CounterfactualExplanations.Evaluation.ExplicitCETransformer}" href="#CounterfactualExplanations.Evaluation.TransformationFunction-Tuple{CounterfactualExplanations.Evaluation.ExplicitCETransformer}"><code>CounterfactualExplanations.Evaluation.TransformationFunction</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Transformation function for explicit transformer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.TransformationFunction-Tuple{CounterfactualExplanations.Evaluation.IdentityTransformer}" href="#CounterfactualExplanations.Evaluation.TransformationFunction-Tuple{CounterfactualExplanations.Evaluation.IdentityTransformer}"><code>CounterfactualExplanations.Evaluation.TransformationFunction</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Transformation function for default transformer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation._ce_transform" href="#CounterfactualExplanations.Evaluation._ce_transform"><code>CounterfactualExplanations.Evaluation._ce_transform</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Global CE transformer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.compute_measure-Tuple{CounterfactualExplanation, Function, Function}" href="#CounterfactualExplanations.Evaluation.compute_measure-Tuple{CounterfactualExplanation, Function, Function}"><code>CounterfactualExplanations.Evaluation.compute_measure</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_measure(ce::CounterfactualExplanation, measure::Function, agg::Function)</code></pre><p>Computes a single measure for a counterfactual explanation. The measure is applied to the counterfactual explanation <code>ce</code> and aggregated using the aggregation function <code>agg</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L41-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.define_prior-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Evaluation.define_prior-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Evaluation.define_prior</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">define_prior(
    data::CounterfactualData;
    ùíüx::Union{Nothing,Distribution}=nothing,
    ùíüy::Union{Nothing,Distribution}=nothing,
    n_std::Int=3,
)</code></pre><p>Defines the prior for the data. The space is defined as a uniform distribution with bounds defined by the mean and standard deviation of the data. The bounds are extended by <code>n_std</code> standard deviations.</p><p><strong>Arguments</strong></p><ul><li><code>data::CounterfactualData</code>: The data to be used for defining the prior sampling space.</li><li><code>n_std::Int=3</code>: The number of standard deviations to extend the bounds.</li></ul><p><strong>Returns</strong></p><ul><li><code>Uniform</code>: The uniform distribution defining the prior sampling space.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L115-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.distance_from_posterior-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.distance_from_posterior-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.distance_from_posterior</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">distance_from_posterior(ce::AbstractCounterfactualExplanation)</code></pre><p>Computes the distance from the counterfactual to generated conditional samples. The distance is computed as the mean distance from the counterfactual to the samples drawn from the posterior distribution of the model. By default, the cosine distance is used.</p><p><strong>Arguments</strong></p><ul><li><code>ce::AbstractCounterfactualExplanation</code>: The counterfactual explanation object.</li><li><code>nsamples::Int=1000</code>: The number of samples to draw.</li><li><code>from_posterior::Bool=true</code>: Whether to draw samples from the posterior distribution.</li><li><code>agg</code>: The aggregation function to use for computing the distance.</li><li><code>choose_lowest_energy::Bool=true</code>: Whether to choose the samples with the lowest energy.</li><li><code>choose_random::Bool=false</code>: Whether to choose random samples.</li><li><code>nmin::Int=25</code>: The minimum number of samples to choose.</li><li><code>p::Int=1</code>: The norm to use for computing the distance.</li><li><code>cosine::Bool=true</code>: Whether to use the cosine distance.</li><li><code>kwargs...</code>: Additional keyword arguments to be passed on to the <a href="#CounterfactualExplanations.Evaluation.EnergySampler"><code>EnergySampler</code></a>.</li></ul><p><strong>Returns</strong></p><ul><li><code>AbstractFloat</code>: The distance from the counterfactual to the samples.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L318-L339">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.generate_posterior_samples" href="#CounterfactualExplanations.Evaluation.generate_posterior_samples"><code>CounterfactualExplanations.Evaluation.generate_posterior_samples</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_posterior_samples(
    e::EnergySampler, n::Int=1000; niter::Int=1000, kwargs...
)</code></pre><p>Generates <code>n</code> samples from the posterior distribution of the model conditioned on the target value <code>y</code>. The samples are generated through (Persistent) Monte Carlo sampling using the <code>EnergySampler</code> object. If the replay buffer is not empty, the initial samples are drawn from the buffer. </p><p>Note that by default the batch size of the sampler is set to <code>round(Int, n / 100)</code> by default for sampling. This is to ensure that the samples are drawn independently from the posterior distribution. It also helps to avoid vanishing gradients. </p><p>The chain is run persistently until <code>n</code> samples are generated. The number of transitions is set to <code>ceil(Int, n / batch_size)</code>. Once the chain is run, the last <code>n</code> samples are form the replay buffer are returned.</p><p><strong>Arguments</strong></p><ul><li><code>e::EnergySampler</code>: The <code>EnergySampler</code> object to be used for sampling.</li><li><code>n::Int=100</code>: The number of samples to generate.</li><li><code>batch_size::Int=round(Int, n / 100)</code>: The batch size for sampling.</li><li><code>niter::Int=1000</code>: The number of iterations for generating samples from the posterior distribution.</li><li><code>kwargs...</code>: Additional keyword arguments to be passed on to the sampler.</li></ul><p><strong>Returns</strong></p><ul><li><code>AbstractArray</code>: The generated samples.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L237-L259">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.get_benchmark_files-Tuple{String}" href="#CounterfactualExplanations.Evaluation.get_benchmark_files-Tuple{String}"><code>CounterfactualExplanations.Evaluation.get_benchmark_files</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_benchmark_files(storage_path::String)</code></pre><p>Returns a list of all benchmark files stored in <code>storage_path</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/benchmark.jl#L512-L516">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.get_lowest_energy_sample-Tuple{CounterfactualExplanations.Evaluation.EnergySampler}" href="#CounterfactualExplanations.Evaluation.get_lowest_energy_sample-Tuple{CounterfactualExplanations.Evaluation.EnergySampler}"><code>CounterfactualExplanations.Evaluation.get_lowest_energy_sample</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_lowest_energy_sample(sampler::EnergySampler; n::Int=5)</code></pre><p>Chooses the samples with the lowest energy (i.e. highest probability) from <code>EnergySampler</code>.</p><p><strong>Arguments</strong></p><ul><li><code>sampler::EnergySampler</code>: The <code>EnergySampler</code> object to be used for sampling.</li><li><code>n::Int=5</code>: The number of samples to choose.</li></ul><p><strong>Returns</strong></p><ul><li><code>AbstractArray</code>: The samples with the lowest energy.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L412-L425">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.get_sampler!-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.get_sampler!-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.get_sampler!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_sampler!(ce::AbstractCounterfactualExplanation; kwargs...)</code></pre><p>Gets the <code>EnergySampler</code> object from the counterfactual explanation. If the sampler is not found, it is constructed and stored in the counterfactual explanation object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L295-L299">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.to_dataframe-Tuple{Vector, Any, Bool, Bool, Bool, CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.to_dataframe-Tuple{Vector, Any, Bool, Bool, Bool, CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.to_dataframe</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">to_dataframe(
    computed_measures::Vector,
    measure,
    report_each::Bool,
    pivot_longer::Bool,
    store_ce::Bool,
    ce::CounterfactualExplanation,
)</code></pre><p>Evaluates a counterfactual explanation and returns a dataframe of evaluation measures.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/evaluate.jl#L63-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.validity_strict-Tuple{CounterfactualExplanation}" href="#CounterfactualExplanations.Evaluation.validity_strict-Tuple{CounterfactualExplanation}"><code>CounterfactualExplanations.Evaluation.validity_strict</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">validity_strict(ce::CounterfactualExplanation)</code></pre><p>Checks if the counterfactual search has been strictly valid in the sense that it has converged with respect to the pre-specified target probability <code>Œ≥</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/measures.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Evaluation.warmup!-Tuple{CounterfactualExplanations.Evaluation.EnergySampler, Int64}" href="#CounterfactualExplanations.Evaluation.warmup!-Tuple{CounterfactualExplanations.Evaluation.EnergySampler, Int64}"><code>CounterfactualExplanations.Evaluation.warmup!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">warmup!(
    e::EnergySampler,
    y::Int;
    niter::Int=20,
    ntransitions::Int=100,
    kwargs...,
)</code></pre><p>Warms up the <code>EnergySampler</code> to the underlying model for conditioning value <code>y</code>. Specifically, this entails running PMC for <code>niter</code> iterations and <code>ntransitions</code> transitions to build a buffer of samples. The buffer is used for posterior sampling.</p><p><strong>Arguments</strong></p><ul><li><code>e::EnergySampler</code>: The <code>EnergySampler</code> object to be trained.</li><li><code>y::Int</code>: The conditioning value.</li><li><code>opt::Union{Nothing,AbstractSamplingRule}</code>: The sampling rule to be used. By default, <code>ImproperSGLD</code> is used with <code>Œ± = 2 * std(Uniform(ùíüx))</code> and <code>Œ≥ = 0.005Œ±</code>.</li><li><code>niter::Int=20</code>: The number of iterations for training the sampler through PMC.</li><li><code>ntransitions::Int=100</code>: The number of transitions for training the sampler. In each transition, the sampler is updated with a mini-batch of data. Data is either drawn from the replay buffer or reinitialized from the prior.</li><li><code>kwargs...</code>: Additional keyword arguments to be passed on to the sampler and PMC.</li></ul><p><strong>Returns</strong></p><ul><li><code>EnergySampler</code>: The trained <code>EnergySampler</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/evaluation/faithfulness/utils.jl#L180-L203">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.InputTransformer" href="#CounterfactualExplanations.DataPreprocessing.InputTransformer"><code>CounterfactualExplanations.DataPreprocessing.InputTransformer</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">InputTransformer</code></pre><p>Abstract type for data transformers. This can be any of the following:</p><ul><li><code>StatsBase.AbstractDataTransform</code>: A data transformation object from the <code>StatsBase</code> package.</li><li><code>MultivariateStats.AbstractDimensionalityReduction</code>: A dimensionality reduction object from the <code>MultivariateStats</code> package.</li><li><code>GenerativeModels.AbstractGenerativeModel</code>: A generative model object from the <code>GenerativeModels</code> module.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L9-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.TypedInputTransformer" href="#CounterfactualExplanations.DataPreprocessing.TypedInputTransformer"><code>CounterfactualExplanations.DataPreprocessing.TypedInputTransformer</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TypedInputTransformer</code></pre><p>Abstract type for data transformers.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.Broadcast.broadcastable-Tuple{CounterfactualData}" href="#Base.Broadcast.broadcastable-Tuple{CounterfactualData}"><code>Base.Broadcast.broadcastable</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Treat <code>CounterfactualData</code> as scalar when broadcasting.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing._subset-Tuple{CounterfactualData, Vector{Int64}}" href="#CounterfactualExplanations.DataPreprocessing._subset-Tuple{CounterfactualData, Vector{Int64}}"><code>CounterfactualExplanations.DataPreprocessing._subset</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_subset(data::CounterfactualData, idx::Vector{Int})</code></pre><p>Creates a subset of the <code>data</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.convert_to_1d-Tuple{Matrix, AbstractArray}" href="#CounterfactualExplanations.DataPreprocessing.convert_to_1d-Tuple{Matrix, AbstractArray}"><code>CounterfactualExplanations.DataPreprocessing.convert_to_1d</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">convert_to_1d(y::Matrix, y_levels::AbstractArray)</code></pre><p>Helper function to convert a one-hot encoded matrix to a vector of labels. This is necessary because MLJ models require the labels to be represented as a vector, but the synthetic datasets in this package hold the labels in one-hot encoded form.</p><p><strong>Arguments</strong></p><ul><li><code>y::Matrix</code>: The one-hot encoded matrix.</li><li><code>y_levels::AbstractArray</code>: The levels of the categorical variable.</li></ul><p><strong>Returns</strong></p><ul><li><code>labels</code>: A vector of labels.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L128-L141">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.input_dim-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.input_dim-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.input_dim</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">input_dim(counterfactual_data::CounterfactualData)</code></pre><p>Helper function that returns the input dimension (number of features) of the data. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L161-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.mutability_constraints-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.mutability_constraints-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.mutability_constraints</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutability_constraints(counterfactual_data::CounterfactualData)</code></pre><p>A convenience function that returns the mutability constraints. If none were specified, it is assumed that all features are mutable in <code>:both</code> directions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/data_contraints.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.outdim-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.outdim-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.outdim</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">outdim(data::CounterfactualData)</code></pre><p>Returns the number of output classes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L198-L202">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.preprocess_data_for_mlj-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.preprocess_data_for_mlj-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.preprocess_data_for_mlj</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">preprocess_data_for_mlj(data::CounterfactualData)</code></pre><p>Helper function to preprocess <code>data::CounterfactualData</code> for MLJ models.</p><p><strong>Arguments</strong></p><ul><li><code>data::CounterfactualData</code>: The data to be preprocessed.</li></ul><p><strong>Returns</strong></p><ul><li>(<code>df_x</code>, <code>y</code>): A tuple containing the preprocessed data, with <code>df_x</code> being a DataFrame object and <code>y</code> being a categorical vector.</li></ul><p><strong>Example</strong></p><p>X, y = preprocess<em>data</em>for_mlj(data)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L103-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.reconstruct_cat_encoding-Tuple{CounterfactualData, AbstractArray}" href="#CounterfactualExplanations.DataPreprocessing.reconstruct_cat_encoding-Tuple{CounterfactualData, AbstractArray}"><code>CounterfactualExplanations.DataPreprocessing.reconstruct_cat_encoding</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reconstruct_cat_encoding(counterfactual_data::CounterfactualData, x::Vector)</code></pre><p>Reconstruct the categorical encoding for a single instance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/counterfactual_data.jl#L224-L228">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.subsample-Tuple{CounterfactualData, Int64}" href="#CounterfactualExplanations.DataPreprocessing.subsample-Tuple{CounterfactualData, Int64}"><code>CounterfactualExplanations.DataPreprocessing.subsample</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">subsample(data::CounterfactualData, n::Int)</code></pre><p>Helper function to randomly subsample <code>data::CounterfactualData</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L67-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.train_test_split-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.train_test_split-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.train_test_split</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">train_test_split(data::CounterfactualData;test_size=0.2,keep_class_ratio=false)</code></pre><p>Splits data into train and test split.</p><p><strong>Arguments</strong></p><ul><li><code>data::CounterfactualData</code>: The data to be preprocessed.</li><li><code>test_size=0.2</code>: Proportion of the data to be used for testing. </li><li><code>keep_class_ratio=false</code>: Decides whether to sample equally from each class, or keep their relative size.</li></ul><p><strong>Returns</strong></p><ul><li>(<code>train_data::CounterfactualData</code>, <code>test_data::CounterfactualData</code>): A tuple containing the train and test splits.</li></ul><p><strong>Example</strong></p><p>train, test = train<em>test</em>split(data, test<em>size=0.1, keep</em>class_ratio=true)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L21-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DataPreprocessing.unpack_data-Tuple{CounterfactualData}" href="#CounterfactualExplanations.DataPreprocessing.unpack_data-Tuple{CounterfactualData}"><code>CounterfactualExplanations.DataPreprocessing.unpack_data</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">unpack_data(data::CounterfactualData)</code></pre><p>Helper function that unpacks data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/data_preprocessing/utils.jl#L169-L173">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractCustomDifferentiableModel" href="#CounterfactualExplanations.Models.AbstractCustomDifferentiableModel"><code>CounterfactualExplanations.Models.AbstractCustomDifferentiableModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type for custom differentiable models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/differentiable.jl#L24-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractDifferentiableModel" href="#CounterfactualExplanations.Models.AbstractDifferentiableModel"><code>CounterfactualExplanations.Models.AbstractDifferentiableModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type for differentiable models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/differentiable.jl#L7-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractDifferentiableModelType" href="#CounterfactualExplanations.Models.AbstractDifferentiableModelType"><code>CounterfactualExplanations.Models.AbstractDifferentiableModelType</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Abstract types for differentiable models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/differentiable.jl#L2">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractFluxModel" href="#CounterfactualExplanations.Models.AbstractFluxModel"><code>CounterfactualExplanations.Models.AbstractFluxModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type for differentiable models written in Flux.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/differentiable.jl#L14-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractFluxNN" href="#CounterfactualExplanations.Models.AbstractFluxNN"><code>CounterfactualExplanations.Models.AbstractFluxNN</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Abstract type for Flux models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/flux.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractMLJModel" href="#CounterfactualExplanations.Models.AbstractMLJModel"><code>CounterfactualExplanations.Models.AbstractMLJModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type for differentiable models from the MLJ library.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/differentiable.jl#L19-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractModelType-Tuple{Any}" href="#CounterfactualExplanations.Models.AbstractModelType-Tuple{Any}"><code>CounterfactualExplanations.Models.AbstractModelType</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(type::AbstractModelType)(model; likelihood::Symbol=:classification_binary)</code></pre><p>Wrap model <code>type</code> around the pre-trained model <code>model</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L114-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.AbstractModelType-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Models.AbstractModelType-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Models.AbstractModelType</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(type::AbstractModelType)(data::CounterfactualData; kwargs...)</code></pre><p>Wrap model <code>type</code> around the data in <code>data</code>. This is a convenience function to avoid having to construct a <code>Model</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L105-L109">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Differentiability" href="#CounterfactualExplanations.Models.Differentiability"><code>CounterfactualExplanations.Models.Differentiability</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A base type for model differentiability.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/traits.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Differentiability-Tuple{CounterfactualExplanations.Models.Model}" href="#CounterfactualExplanations.Models.Differentiability-Tuple{CounterfactualExplanations.Models.Model}"><code>CounterfactualExplanations.Models.Differentiability</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Dispatches on the type of model for the differentiability trait.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/traits.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Fitresult" href="#CounterfactualExplanations.Models.Fitresult"><code>CounterfactualExplanations.Models.Fitresult</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Fitresult</code></pre><p>A struct to hold the results of fitting a model.</p><p><strong>Fields</strong></p><ul><li><code>fitresult</code>: The result of fitting the model to the data. This object should be callable on new data.</li><li><code>other::Dict</code>: A dictionary to hold any other relevant information.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L19-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Fitresult-Tuple{AbstractArray}" href="#CounterfactualExplanations.Models.Fitresult-Tuple{AbstractArray}"><code>CounterfactualExplanations.Models.Fitresult</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(fitresult::Fitresult)(newdata::AbstractArray)</code></pre><p>When called on new data, the <code>Fitresult</code> object returns the result of calling the fitresult on new data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L41-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Fitresult-Tuple{}" href="#CounterfactualExplanations.Models.Fitresult-Tuple{}"><code>CounterfactualExplanations.Models.Fitresult</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(fitresult::Fitresult)()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L34-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.FluxNN" href="#CounterfactualExplanations.Models.FluxNN"><code>CounterfactualExplanations.Models.FluxNN</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Concrete type for Flux models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/flux.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.IsDifferentiable" href="#CounterfactualExplanations.Models.IsDifferentiable"><code>CounterfactualExplanations.Models.IsDifferentiable</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Struct for models that are differentiable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/traits.jl#L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.MLJModelType" href="#CounterfactualExplanations.Models.MLJModelType"><code>CounterfactualExplanations.Models.MLJModelType</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Abstract type for MLJ models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/mlj.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.NonDifferentiable" href="#CounterfactualExplanations.Models.NonDifferentiable"><code>CounterfactualExplanations.Models.NonDifferentiable</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>By default, models are assumed not to be differentiable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/traits.jl#L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.binary_to_onehot-Tuple{Any}" href="#CounterfactualExplanations.Models.binary_to_onehot-Tuple{Any}"><code>CounterfactualExplanations.Models.binary_to_onehot</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">binary_to_onehot(p)</code></pre><p>Helper function to turn dummy-encoded variable into onehot-encoded variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/utils.jl#L32-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.build_ensemble-Tuple{Int64}" href="#CounterfactualExplanations.Models.build_ensemble-Tuple{Int64}"><code>CounterfactualExplanations.Models.build_ensemble</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">build_ensemble(K::Int;kw=(input_dim=2,n_hidden=32,output_dim=1))</code></pre><p>Helper function that builds an ensemble of <code>K</code> models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/utils.jl#L108-L112">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.build_mlp-Tuple{}" href="#CounterfactualExplanations.Models.build_mlp-Tuple{}"><code>CounterfactualExplanations.Models.build_mlp</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">build_mlp()</code></pre><p>Helper function to build simple MLP.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">nn = build_mlp()</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/utils.jl#L4-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.data_loader-Tuple{CounterfactualData}" href="#CounterfactualExplanations.Models.data_loader-Tuple{CounterfactualData}"><code>CounterfactualExplanations.Models.data_loader</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">data_loader(data::CounterfactualData)</code></pre><p>Prepares counterfactual data for training in Flux.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/utils.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.forward!-Tuple{Flux.Chain, Any}" href="#CounterfactualExplanations.Models.forward!-Tuple{Flux.Chain, Any}"><code>CounterfactualExplanations.Models.forward!</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">forward!(model::Flux.Chain, data; loss::Symbol, opt::Symbol, n_epochs::Int=10, model_name=&quot;MLP&quot;)</code></pre><p>Forward pass for training a <code>Flux.Chain</code> model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/utils.jl#L65-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.load_mnist_model-Tuple{CounterfactualExplanations.Models.AbstractModelType}" href="#CounterfactualExplanations.Models.load_mnist_model-Tuple{CounterfactualExplanations.Models.AbstractModelType}"><code>CounterfactualExplanations.Models.load_mnist_model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_mnist_model(type::AbstractModelType)</code></pre><p>Empty function to be overloaded for loading a pre-trained model for the <code>AbstractModelType</code> model type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/pretrained/mnist.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.load_mnist_model-Tuple{DeepEnsemble}" href="#CounterfactualExplanations.Models.load_mnist_model-Tuple{DeepEnsemble}"><code>CounterfactualExplanations.Models.load_mnist_model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_mnist_model(type::DeepEnsemble)</code></pre><p>Load a pre-trained deep ensemble model for the MNIST dataset.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/pretrained/mnist.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.load_mnist_model-Tuple{MLP}" href="#CounterfactualExplanations.Models.load_mnist_model-Tuple{MLP}"><code>CounterfactualExplanations.Models.load_mnist_model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_mnist_model(type::MLP)</code></pre><p>Load a pre-trained MLP model for the MNIST dataset.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/pretrained/mnist.jl#L8-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.load_mnist_vae-Tuple{}" href="#CounterfactualExplanations.Models.load_mnist_vae-Tuple{}"><code>CounterfactualExplanations.Models.load_mnist_vae</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_mnist_vae(; strong=true)</code></pre><p>Load a pre-trained VAE model for the MNIST dataset.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/pretrained/mnist.jl#L30-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">train(M::Model, data::CounterfactualData)</code></pre><p>Trains the model <code>M</code> on the data in <code>data</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/core_struct.jl#L123-L127">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.AbstractFluxNN, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.AbstractFluxNN, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">train(M::FluxModel, data::CounterfactualData; kwargs...)</code></pre><p>Wrapper function to train Flux models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/flux.jl#L51-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.MLJModelType, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.Models.MLJModelType, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">train(
    M::Model,
    type::MLJModelType,
    data::CounterfactualData,
)</code></pre><p>Overloads the <code>train</code> function for MLJ models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/mlj.jl#L6-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, DeepEnsemble, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, DeepEnsemble, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">train(M::Model, type::DeepEnsemble, data::CounterfactualData; kwargs...)</code></pre><p>Overloads the <code>train</code> function for deep ensembles.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/models/differentiable/flux/DeepEnsemble.jl#L36-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.AbstractGMParams" href="#CounterfactualExplanations.GenerativeModels.AbstractGMParams"><code>CounterfactualExplanations.GenerativeModels.AbstractGMParams</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type of generative model hyperparameter container.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/GenerativeModels.jl#L14-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel" href="#CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel"><code>CounterfactualExplanations.GenerativeModels.AbstractGenerativeModel</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Base type for generative model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/GenerativeModels.jl#L9-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.Encoder" href="#CounterfactualExplanations.GenerativeModels.Encoder"><code>CounterfactualExplanations.GenerativeModels.Encoder</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Encoder</p><p>Constructs encoder part of VAE: a simple Flux neural network with one hidden layer and two linear output layers for the first two moments of the latent distribution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/encoders.jl#L4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.VAE" href="#CounterfactualExplanations.GenerativeModels.VAE"><code>CounterfactualExplanations.GenerativeModels.VAE</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">VAE &lt;: AbstractGenerativeModel</code></pre><p>Constructs the Variational Autoencoder. The VAE is a subtype of <code>AbstractGenerativeModel</code>. Any (sub-)type of <code>AbstractGenerativeModel</code> is accepted by latent space generators. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/vae.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.VAE-Tuple{Any}" href="#CounterfactualExplanations.GenerativeModels.VAE-Tuple{Any}"><code>CounterfactualExplanations.GenerativeModels.VAE</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">VAE(input_dim;kws...)</code></pre><p>Outer method for instantiating a VAE.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/vae.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.VAEParams" href="#CounterfactualExplanations.GenerativeModels.VAEParams"><code>CounterfactualExplanations.GenerativeModels.VAEParams</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">VAEParams &lt;: AbstractGMParams</code></pre><p>The default VAE parameters describing both the encoder/decoder architecture and the training process.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/vae.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.rand" href="#Base.rand"><code>Base.rand</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Random.rand(encoder::Encoder, x, device=cpu)</p><p>Draws random samples from the latent distribution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/encoders.jl#L49-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.Decoder-Tuple{Int64, Int64, Int64}" href="#CounterfactualExplanations.GenerativeModels.Decoder-Tuple{Int64, Int64, Int64}"><code>CounterfactualExplanations.GenerativeModels.Decoder</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Decoder(input_dim::Int, latent_dim::Int, hidden_dim::Int; activation=relu)</code></pre><p>The default decoder architecture is just a Flux Chain with one hidden layer and a linear output layer. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/encoders.jl#L29-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.decode-Tuple{CounterfactualExplanations.GenerativeModels.VAE, AbstractArray}" href="#CounterfactualExplanations.GenerativeModels.decode-Tuple{CounterfactualExplanations.GenerativeModels.VAE, AbstractArray}"><code>CounterfactualExplanations.GenerativeModels.decode</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">decode(generative_model::VAE, x::AbstractArray)</code></pre><p>Decodes an array <code>x</code> using the VAE decoder.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/vae.jl#L252-L256">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.encode-Tuple{CounterfactualExplanations.GenerativeModels.VAE, AbstractArray}" href="#CounterfactualExplanations.GenerativeModels.encode-Tuple{CounterfactualExplanations.GenerativeModels.VAE, AbstractArray}"><code>CounterfactualExplanations.GenerativeModels.encode</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">encode(generative_model::VAE, x::AbstractArray)</code></pre><p>Encodes an array <code>x</code> using the VAE encoder. Specifically, it samples from the latent distribution. It does so by first passing <code>x</code> through the encoder to obtain the mean and log-variance of the latent distribution. Then, it samples from the latent distribution using the reparameterization trick. See <a href="#Base.rand"><code>Random.rand(encoder::Encoder, x, device=cpu)</code></a> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/vae.jl#L242-L246">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.get_data-Tuple{AbstractArray, AbstractArray, Any}" href="#CounterfactualExplanations.GenerativeModels.get_data-Tuple{AbstractArray, AbstractArray, Any}"><code>CounterfactualExplanations.GenerativeModels.get_data</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_data(X::AbstractArray, y::AbstractArray, batch_size)</code></pre><p>Preparing data for mini-batch training .</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/vae.jl#L233-L237">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.get_data-Tuple{AbstractArray, Any}" href="#CounterfactualExplanations.GenerativeModels.get_data-Tuple{AbstractArray, Any}"><code>CounterfactualExplanations.GenerativeModels.get_data</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_data(X::AbstractArray, batch_size)</code></pre><p>Preparing data for mini-batch training .</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/vae.jl#L224-L228">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.reconstruct" href="#CounterfactualExplanations.GenerativeModels.reconstruct"><code>CounterfactualExplanations.GenerativeModels.reconstruct</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reconstruct(generative_model::VAE, x, device=cpu)</code></pre><p>Implements a full pass of some input <code>x</code> through the VAE: <code>x ‚Ü¶ xÃÇ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/vae.jl#L67-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.GenerativeModels.reparameterization_trick" href="#CounterfactualExplanations.GenerativeModels.reparameterization_trick"><code>CounterfactualExplanations.GenerativeModels.reparameterization_trick</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>reparameterization_trick(Œº,logœÉ,device=cpu)</p><p>Helper function that implements the reparameterization trick: <code>z ‚àº ùí©(Œº,œÉ¬≤) ‚áî z=Œº + œÉ ‚äô Œµ, Œµ ‚àº ùí©(0,I).</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generative_models/encoders.jl#L40-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.Penalty" href="#CounterfactualExplanations.Generators.Penalty"><code>CounterfactualExplanations.Generators.Penalty</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Type union for acceptable argument types for the <code>penalty</code> field of <code>GradientBasedGenerator</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/base.jl#L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.TCRExGenerator" href="#CounterfactualExplanations.Generators.TCRExGenerator"><code>CounterfactualExplanations.Generators.TCRExGenerator</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>T-CREx counterfactual generator class.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/non_gradient_based/t_crex/t_crex.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Convergence.conditions_satisfied-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Convergence.conditions_satisfied-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Convergence.conditions_satisfied</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Convergence.conditions_satisfied(generator::AbstractGradientBasedGenerator, ce::AbstractCounterfactualExplanation)</code></pre><p>The default method to check if the all conditions for convergence of the counterfactual search have been satisified for gradient-based generators. By default, gradient-based search is considered to have converged as soon as the proposed feature changes for all features are smaller than one percent of its standard deviation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/utils.jl#L10-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators._replace_nans" href="#CounterfactualExplanations.Generators._replace_nans"><code>CounterfactualExplanations.Generators._replace_nans</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_replace_nans(Œîcounterfactual_state::AbstractArray, old_new::Pair=(NaN =&gt; 0))</code></pre><p>Helper function to deal with exploding gradients. This is only a temporary fix and will be improved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/utils.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, ce::AbstractCounterfactualExplanation)</code></pre><p>Dispatches to the appropriate complexity function for any generator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/complexity.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, Function, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, Function, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, penalty::Function, ce::AbstractCounterfactualExplanation)</code></pre><p>Overloads the <code>h</code> function for the case where a single penalty function is provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/complexity.jl#L21-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, Nothing, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, Nothing, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, penalty::Nothing, ce::AbstractCounterfactualExplanation)</code></pre><p>Overloads the <code>h</code> function for the case where no penalty is provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/complexity.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, Vector{&lt;:Tuple}, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, Vector{&lt;:Tuple}, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, penalty::Tuple, ce::AbstractCounterfactualExplanation)</code></pre><p>Overloads the <code>h</code> function for the case where a single penalty function is provided with additional keyword arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/complexity.jl#L45-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, Vector{Function}, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.h-Tuple{AbstractGenerator, Vector{Function}, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.h</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">h(generator::AbstractGenerator, penalty::Tuple, ce::AbstractCounterfactualExplanation)</code></pre><p>Overloads the <code>h</code> function for the case where a single penalty function is provided with additional keyword arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/complexity.jl#L32-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.incompatible-Tuple{Any, Any}" href="#CounterfactualExplanations.Generators.incompatible-Tuple{Any, Any}"><code>CounterfactualExplanations.Generators.incompatible</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">incompatible(AbstractGenerator, AbstractCounterfactualExplanation)</code></pre><p>Checks if the generator is incompatible with any of the additional specifications for the counterfactual explanations. By default, generators are assumed to be compatible.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/Generators.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.propose_state-Tuple{CounterfactualExplanations.Models.IsDifferentiable, AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.propose_state-Tuple{CounterfactualExplanations.Models.IsDifferentiable, AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.propose_state</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">propose_state(
    ::Models.IsDifferentiable,
    generator::AbstractGradientBasedGenerator,
    ce::AbstractCounterfactualExplanation,
)</code></pre><p>Proposes new state based on backpropagation for gradient-based generators and differentiable models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/generate_perturbations.jl#L24-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.total_loss-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.total_loss-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.total_loss</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">total_loss(ce::AbstractCounterfactualExplanation)</code></pre><p>Computes the total loss of a counterfactual explanation with respect to the search objective.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/Generators.jl#L82-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.‚Ñì-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.‚Ñì-Tuple{AbstractGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.‚Ñì</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚Ñì(generator::AbstractGenerator, ce::AbstractCounterfactualExplanation)</code></pre><p>Dispatches to the appropriate loss function for any generator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/loss.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.‚Ñì-Tuple{AbstractGenerator, Function, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.‚Ñì-Tuple{AbstractGenerator, Function, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.‚Ñì</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚Ñì(generator::AbstractGenerator, loss::Function, ce::AbstractCounterfactualExplanation)</code></pre><p>Overloads the <code>‚Ñì</code> function for the case where a single loss function is provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/loss.jl#L21-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.‚Ñì-Tuple{AbstractGenerator, Nothing, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.‚Ñì-Tuple{AbstractGenerator, Nothing, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.‚Ñì</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚Ñì(generator::AbstractGenerator, loss::Nothing, ce::AbstractCounterfactualExplanation)</code></pre><p>Overloads the <code>‚Ñì</code> function for the case where no loss function is provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/loss.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.‚àÇh-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.‚àÇh-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.‚àÇh</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚àÇh(generator::AbstractGradientBasedGenerator, ce::AbstractCounterfactualExplanation)</code></pre><p>The default method to compute the gradient of the complexity penalty at the current counterfactual state for gradient-based generators. It assumes that <code>Zygote.jl</code> has gradient access. </p><p>If the penalty is not provided, it returns 0.0. By default, Zygote never works out the gradient for constants and instead returns &#39;nothing&#39;, so we need to add a manual step to override this behaviour. See here: https://discourse.julialang.org/t/zygote-gradient/26715.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/loss.jl#L18-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.‚àÇ‚Ñì-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.‚àÇ‚Ñì-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.‚àÇ‚Ñì</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚àÇ‚Ñì(
    generator::AbstractGradientBasedGenerator,
    ce::AbstractCounterfactualExplanation,
)</code></pre><p>The default method to compute the gradient of the loss function at the current counterfactual state for gradient-based generators. It assumes that <code>Zygote.jl</code> has gradient access.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/loss.jl#L3-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.‚àá-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.‚àá-Tuple{AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.‚àá</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">‚àá(
    generator::AbstractGradientBasedGenerator,
    ce::AbstractCounterfactualExplanation,
)</code></pre><p>The default method to compute the gradient of the counterfactual search objective for gradient-based generators. It simply computes the weighted sum over partial derivates. It assumes that <code>Zygote.jl</code> has gradient access. If the counterfactual is being generated using Probe, the hinge loss is added to the gradient.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/generators/gradient_based/loss.jl#L37-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.NeedsNeighbours" href="#CounterfactualExplanations.Objectives.NeedsNeighbours"><code>CounterfactualExplanations.Objectives.NeedsNeighbours</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Penalties that need access to neighbors in the target class.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/traits.jl#L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.NoPenaltyRequirements" href="#CounterfactualExplanations.Objectives.NoPenaltyRequirements"><code>CounterfactualExplanations.Objectives.NoPenaltyRequirements</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>By default, penalties have no extra requirements.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/traits.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.PenaltyRequirements" href="#CounterfactualExplanations.Objectives.PenaltyRequirements"><code>CounterfactualExplanations.Objectives.PenaltyRequirements</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A base type for a style of process.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/traits.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.PenaltyRequirements-Tuple{Type{&lt;:typeof(CounterfactualExplanations.Objectives.distance_from_target)}}" href="#CounterfactualExplanations.Objectives.PenaltyRequirements-Tuple{Type{&lt;:typeof(CounterfactualExplanations.Objectives.distance_from_target)}}"><code>CounterfactualExplanations.Objectives.PenaltyRequirements</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>The <code>distance_from_target</code> method needs neighbors in the target class.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/traits.jl#L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.cos_dist-Tuple{Any, Any}" href="#CounterfactualExplanations.Objectives.cos_dist-Tuple{Any, Any}"><code>CounterfactualExplanations.Objectives.cos_dist</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cos_dist(x,y)</code></pre><p>Computes the cosine distance between two vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/distance_utils.jl#L49-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.energy-Tuple{AbstractModel, AbstractArray, Int64}" href="#CounterfactualExplanations.Objectives.energy-Tuple{AbstractModel, AbstractArray, Int64}"><code>CounterfactualExplanations.Objectives.energy</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">energy(M::AbstractModel, x::AbstractArray, t::Int)</code></pre><p>Computes the energy of the model at a given state as in Altmeyer et al. (2024): https://scholar.google.com/scholar?cluster=3697701546144846732&amp;hl=en&amp;as_sdt=0,5.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L202-L206">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.energy_constraint-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.energy_constraint-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.energy_constraint</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">energy_constraint(
    ce::AbstractCounterfactualExplanation;
    agg=mean,
    reg_strength::AbstractFloat=0.0,
    decay::AbstractFloat=0.9,
    kwargs...,
)</code></pre><p>Computes the energy constraint for the counterfactual explanation as in Altmeyer et al. (2024): https://scholar.google.com/scholar?cluster=3697701546144846732&amp;hl=en&amp;as_sdt=0,5. The energy constraint is a regularization term that penalizes the energy of the counterfactuals. The energy is computed as the negative logit of the target class.</p><p><strong>Arguments</strong></p><ul><li><code>ce::AbstractCounterfactualExplanation</code>: The counterfactual explanation.</li><li><code>agg::Function=mean</code>: The aggregation function (only applicable in case <code>num_counterfactuals &gt; 1</code>). Default is <code>mean</code>.</li><li><code>reg_strength::AbstractFloat=0.0</code>: The regularization strength.</li><li><code>decay::AbstractFloat=0.9</code>: The decay rate for the polynomial decay function (defaults to 0.9). Parameter <code>a</code> is set to <code>1.0 / ce.generator.opt.eta</code>, such that the initial step size is equal to 1.0, not accounting for <code>b</code>. Parameter <code>b</code> is set to <code>round(Int, max_steps / 20)</code>, where <code>max_steps</code> is the maximum number of iterations.</li><li><code>kwargs...</code>: Additional keyword arguments.</li></ul><p><strong>Returns</strong></p><ul><li><code>‚Ñí::AbstractFloat</code>: The energy constraint.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L211-L233">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.model_loss_penalty-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.model_loss_penalty-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.model_loss_penalty</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function model_loss_penalty(
    ce::AbstractCounterfactualExplanation;
    agg=mean
)</code></pre><p>Additional penalty for ClaPROARGenerator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/penalties.jl#L175-L182">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.needs_neighbours-Tuple{AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Objectives.needs_neighbours-Tuple{AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Objectives.needs_neighbours</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">needs_neighbours(ce::AbstractCounterfactualExplanation)</code></pre><p>Check if a counterfactual explanation needs access to neighbors in the target class.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/traits.jl#L27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Objectives.needs_neighbours-Tuple{AbstractGenerator}" href="#CounterfactualExplanations.Objectives.needs_neighbours-Tuple{AbstractGenerator}"><code>CounterfactualExplanations.Objectives.needs_neighbours</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">needs_neighbours(gen::AbstractGenerator)</code></pre><p>Check if a generator needs access to neighbors in the target class.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/src/objectives/traits.jl#L19-L23">source</a></section></article><h2 id="Extensions"><a class="docs-heading-anchor" href="#Extensions">Extensions</a><a id="Extensions-1"></a><a class="docs-heading-anchor-permalink" href="#Extensions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.AtomicDecisionTree" href="#DecisionTreeExt.AtomicDecisionTree"><code>DecisionTreeExt.AtomicDecisionTree</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Type union for <code>DecisionTree</code> decision tree classifiers and regressors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/decision_tree.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.AtomicRandomForest" href="#DecisionTreeExt.AtomicRandomForest"><code>DecisionTreeExt.AtomicRandomForest</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Type union for <code>DecisionTree</code> random forest classifiers and regressors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/random_forest.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.DecisionTreeModel-Tuple{Union{MLJDecisionTreeInterface.DecisionTreeClassifier, MLJDecisionTreeInterface.DecisionTreeRegressor}}" href="#CounterfactualExplanations.DecisionTreeModel-Tuple{Union{MLJDecisionTreeInterface.DecisionTreeClassifier, MLJDecisionTreeInterface.DecisionTreeRegressor}}"><code>CounterfactualExplanations.DecisionTreeModel</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CounterfactualExplanations.DecisionTreeModel(
    model::AtomicDecisionTree; likelihood::Symbol=:classification_binary
)</code></pre><p>Outer constructor for a decision trees.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/decision_tree.jl#L9-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.TCRExGenerator-Tuple{Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel}" href="#CounterfactualExplanations.Generators.TCRExGenerator-Tuple{Union{Int64, AbstractFloat, String, Symbol}, CounterfactualData, AbstractModel}"><code>CounterfactualExplanations.Generators.TCRExGenerator</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(generator::Generators.TCRExGenerator)(
    target::RawTargetType,
    data::DataPreprocessing.CounterfactualData,
    M::Models.AbstractModel
)</code></pre><p>Applies the <a href="#CounterfactualExplanations.Generators.TCRExGenerator"><code>Generators.TCRExGenerator</code></a> to a given <code>target</code> and <code>data</code> using the <code>M</code> model. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/t_crex.jl#L9-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.DecisionTreeModel}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.DecisionTreeModel}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Models.Model)(
    data::CounterfactualData,
    type::CounterfactualExplanations.DecisionTreeModel;
    kwargs...,
)</code></pre><p>Constructs a decision tree for the given data. This method is used internally when a decision-tree model is constructed to be trained from scratch (i.e. no pre-trained model is supplied by the user).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/decision_tree.jl#L27-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.RandomForestModel}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.RandomForestModel}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Models.Model)(
    data::CounterfactualData, type::CounterfactualExplanations.RandomForestModel; kwargs...
)</code></pre><p>Constructs a random forest for the given data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/random_forest.jl#L25-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.RandomForestModel-Tuple{Union{MLJDecisionTreeInterface.RandomForestClassifier, MLJDecisionTreeInterface.RandomForestRegressor}}" href="#CounterfactualExplanations.RandomForestModel-Tuple{Union{MLJDecisionTreeInterface.RandomForestClassifier, MLJDecisionTreeInterface.RandomForestRegressor}}"><code>CounterfactualExplanations.RandomForestModel</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CounterfactualExplanations.RandomForestModel(
    model::AtomicRandomForest; likelihood::Symbol=:classification_binary
)</code></pre><p>Outer constructor for random forests.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/random_forest.jl#L7-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.incompatible-Tuple{FeatureTweakGenerator, CounterfactualExplanation}" href="#CounterfactualExplanations.Generators.incompatible-Tuple{FeatureTweakGenerator, CounterfactualExplanation}"><code>CounterfactualExplanations.Generators.incompatible</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Generators.incompatible(gen::FeatureTweakGenerator, ce::CounterfactualExplanation)</code></pre><p>Overloads the <code>incompatible</code> function for the <code>FeatureTweakGenerator</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/feature_tweak/incompatible.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Generators.propose_state-Tuple{FeatureTweakGenerator, AbstractCounterfactualExplanation}" href="#CounterfactualExplanations.Generators.propose_state-Tuple{FeatureTweakGenerator, AbstractCounterfactualExplanation}"><code>CounterfactualExplanations.Generators.propose_state</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Generators.propose_state(
    generator::Generators.FeatureTweakGenerator, ce::AbstractCounterfactualExplanation
)</code></pre><p>Overloads the <a href="#CounterfactualExplanations.Generators.propose_state-Tuple{CounterfactualExplanations.Models.IsDifferentiable, AbstractGradientBasedGenerator, AbstractCounterfactualExplanation}"><code>Generators.propose_state</code></a> method for the <code>FeatureTweakGenerator</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/feature_tweak/propose_state.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.calculate_delta-Tuple{AbstractCounterfactualExplanation}" href="#DecisionTreeExt.calculate_delta-Tuple{AbstractCounterfactualExplanation}"><code>DecisionTreeExt.calculate_delta</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_delta(ce::AbstractCounterfactualExplanation, penalty::Vector{Function})</code></pre><p>Calculates the penalty for the proposed feature tweak.</p><p><strong>Arguments</strong></p><ul><li><code>ce::AbstractCounterfactualExplanation</code>: The counterfactual explanation object.</li></ul><p><strong>Returns</strong></p><ul><li><code>delta::Float64</code>: The calculated penalty for the proposed feature tweak.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/feature_tweak/utils.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.classify_prototypes-Tuple{Any, Any, Any}" href="#DecisionTreeExt.classify_prototypes-Tuple{Any, Any, Any}"><code>DecisionTreeExt.classify_prototypes</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">classify_prototypes(prototypes, rule_assignments, bounds)</code></pre><p>Builds the second tree model using the given <code>prototypes</code> as inputs and their corresponding <code>rule_assignments</code> as labels. Split thresholds are restricted to the <code>bounds</code>, which can be computed using <a href="#DecisionTreeExt.partition_bounds-Tuple{Any}"><code>partition_bounds(rules)</code></a>. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L388-L392">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.cre-Tuple{Any, Any, Any}" href="#DecisionTreeExt.cre-Tuple{Any, Any, Any}"><code>DecisionTreeExt.cre</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cre(rules, x, X)</code></pre><p>Computes the counterfactual rule explanations (CRE) for a given point <span>$x$</span> and a set of <span>$rules$</span>, where the <span>$rules$</span> correspond to the set of maximal-valid rules for some given target. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L374-L378">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.esatisfactory_instance-Tuple{FeatureTweakGenerator, AbstractArray, AbstractArray}" href="#DecisionTreeExt.esatisfactory_instance-Tuple{FeatureTweakGenerator, AbstractArray, AbstractArray}"><code>DecisionTreeExt.esatisfactory_instance</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">esatisfactory_instance(generator::FeatureTweakGenerator, x::AbstractArray, paths::Dict{String, Dict{String, Any}})</code></pre><p>Returns an epsilon-satisfactory counterfactual for <code>x</code> based on the paths provided.</p><p><strong>Arguments</strong></p><ul><li><code>generator::FeatureTweakGenerator</code>: The feature tweak generator.</li><li><code>x::AbstractArray</code>: The factual instance.</li><li><code>paths::Dict{String, Dict{String, Any}}</code>: A list of paths to the leaves of the tree to be used for tweaking the feature.</li></ul><p><strong>Returns</strong></p><ul><li><code>esatisfactory::AbstractArray</code>: The epsilon-satisfactory instance.</li></ul><p><strong>Example</strong></p><p>esatisfactory = esatisfactory_instance(generator, x, paths) # returns an epsilon-satisfactory counterfactual for <code>x</code> based on the paths provided</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/feature_tweak/utils.jl#L19-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.extract_leaf_rules-Tuple{Root}" href="#DecisionTreeExt.extract_leaf_rules-Tuple{Root}"><code>DecisionTreeExt.extract_leaf_rules</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_leaf_rules(root::DT.Root)</code></pre><p>Extracts leaf decision rules (i.e. hyperrectangles) from a decision tree (<code>root</code>). For a decision tree with <span>$L$</span> leaves this results in <span>$L$</span> hyperrectangles. The rules are returned as a vector of tuples containing 2-element tuples, where each 2-element tuple stores the lower and upper bound imposed by the given rule for a given feature. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L107-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.extract_leaf_rules-Tuple{Union{Leaf, Node}, AbstractArray, AbstractArray}" href="#DecisionTreeExt.extract_leaf_rules-Tuple{Union{Leaf, Node}, AbstractArray, AbstractArray}"><code>DecisionTreeExt.extract_leaf_rules</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_leaf_rules(node::Union{DT.Leaf,DT.Node}, conditions::AbstractArray, decisions::AbstractArray)</code></pre><p>See <a href="#DecisionTreeExt.extract_leaf_rules-Tuple{Root}"><code>extract_leaf_rules(root::DT.Root)</code></a> for details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L122-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.extract_rules-Tuple{Root}" href="#DecisionTreeExt.extract_rules-Tuple{Root}"><code>DecisionTreeExt.extract_rules</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_rules(root::DT.Root)</code></pre><p>Extracts decision rules (i.e. hyperrectangles) from a decision tree (<code>root</code>). For a decision tree with <span>$L$</span> leaves this results in <span>$2L-1$</span> hyperrectangles. The rules are returned as a vector of vectors of 2-element tuples, where each tuple stores the lower and upper bound imposed by the given rule for a given feature. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L54-L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.extract_rules-Tuple{Union{Leaf, Node}, AbstractArray}" href="#DecisionTreeExt.extract_rules-Tuple{Union{Leaf, Node}, AbstractArray}"><code>DecisionTreeExt.extract_rules</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_rules(node::DT.Node, conditions::AbstractArray)</code></pre><p>See <a href="#DecisionTreeExt.extract_rules-Tuple{Root}"><code>extract_rules(root::DT.Root)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L66-L70">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.get_individual_classifiers-Tuple{CounterfactualExplanations.Models.Model}" href="#DecisionTreeExt.get_individual_classifiers-Tuple{CounterfactualExplanations.Models.Model}"><code>DecisionTreeExt.get_individual_classifiers</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_individual_classifiers(M::Model)</code></pre><p>Returns the individual classifiers in the forest. If the input is a decision tree, the method returns the decision tree itself inside an array.</p><p><strong>Arguments</strong></p><ul><li><code>M::Model</code>: The model selected by the user.</li><li><code>model::CounterfactualExplanations.D</code></li></ul><p><strong>Returns</strong></p><ul><li><code>classifiers::AbstractArray</code>: An array of individual classifiers in the forest.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/feature_tweak/utils.jl#L125-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.grow_surrogate-Tuple{CounterfactualExplanations.Generators.TCRExGenerator, AbstractArray, AbstractArray}" href="#DecisionTreeExt.grow_surrogate-Tuple{CounterfactualExplanations.Generators.TCRExGenerator, AbstractArray, AbstractArray}"><code>DecisionTreeExt.grow_surrogate</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">grow_surrogate(
    generator::Generators.TCRExGenerator, X::AbstractArray, yÃÇ::AbstractArray
)</code></pre><p>Grows the tree-based surrogate model for the <a href="#CounterfactualExplanations.Generators.TCRExGenerator"><code>Generators.TCRExGenerator</code></a>. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L6-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.grow_surrogate-Tuple{CounterfactualExplanations.Generators.TCRExGenerator, CounterfactualData, AbstractModel}" href="#DecisionTreeExt.grow_surrogate-Tuple{CounterfactualExplanations.Generators.TCRExGenerator, CounterfactualData, AbstractModel}"><code>DecisionTreeExt.grow_surrogate</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">grow_surrogate(
    generator::Generators.TCRExGenerator, data::CounterfactualData, M::AbstractModel
)</code></pre><p>Overloads the <code>grow_surrogate</code> function to accept a <code>CounterfactualData</code> and a <code>AbstractModel</code> to grow a surrogate model. See <a href="#DecisionTreeExt.grow_surrogate-Tuple{CounterfactualExplanations.Generators.TCRExGenerator, AbstractArray, AbstractArray}"><code>grow_surrogate(generator::Generators.TCRExGenerator, X::AbstractArray, yÃÇ::AbstractArray)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L36-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.induced_grid-Tuple{Any}" href="#DecisionTreeExt.induced_grid-Tuple{Any}"><code>DecisionTreeExt.induced_grid</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">induced_grid(rules)</code></pre><p>Computes the induced grid of the given rules. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>]..</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L309-L313">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.issubrule-Tuple{Any, Any}" href="#DecisionTreeExt.issubrule-Tuple{Any, Any}"><code>DecisionTreeExt.issubrule</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">issubrule(rule, otherrule)</code></pre><p>Checks if the <code>rule</code> hyperrectangle is a subset of the <code>otherrule</code> hyperrectangle. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L251-L255">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.max_valid-NTuple{5, Any}" href="#DecisionTreeExt.max_valid-NTuple{5, Any}"><code>DecisionTreeExt.max_valid</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">max_valid(rules, X, fx, target, œÑ)</code></pre><p>Returns the maximal-valid rules for a given <code>target</code> and accuracy threshold <code>œÑ</code>. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L260-L264">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.partition_bounds-Tuple{Any, Int64}" href="#DecisionTreeExt.partition_bounds-Tuple{Any, Int64}"><code>DecisionTreeExt.partition_bounds</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">partition_bounds(rules, dim::Int)</code></pre><p>Computes the set of (unique) bounds for each rule in <code>rules</code> along the <code>dim</code>-th dimension. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L283-L287">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.partition_bounds-Tuple{Any}" href="#DecisionTreeExt.partition_bounds-Tuple{Any}"><code>DecisionTreeExt.partition_bounds</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">partition_bounds(rules)</code></pre><p>Computes the set of (unique) bounds for each rule in <code>rules</code> and all dimensions. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L299-L303">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.prototype-Tuple{Any, Any}" href="#DecisionTreeExt.prototype-Tuple{Any, Any}"><code>DecisionTreeExt.prototype</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">prototype(rule, X; pick_arbitrary::Bool=true)</code></pre><p>Picks an arbitrary point <span>$x^C \in X$</span> (i.e. prototype) from the subet of <span>$X$</span> that is contained by rule <span>$R_i$</span>. If <code>pick_arbitrary</code> is set to false, the prototype is instead computed as the average across all samples. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L342-L346">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.rule_accuracy-NTuple{4, Any}" href="#DecisionTreeExt.rule_accuracy-NTuple{4, Any}"><code>DecisionTreeExt.rule_accuracy</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rule_accuracy(rule, X, fx, target)</code></pre><p>Computes the accuracy of the rule on the data <code>X</code> for predicted outputs <code>fx</code> and the <code>target</code>. Accuracy is defined as the fraction of points contained by the rule, for which predicted values match the target. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L230-L234">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.rule_changes-Tuple{Any, Any}" href="#DecisionTreeExt.rule_changes-Tuple{Any, Any}"><code>DecisionTreeExt.rule_changes</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rule_changes(rule, x)</code></pre><p>Computes the number of feature changes necessary for <code>x</code> to be contained by rule <span>$R_i$</span>. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L356-L360">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.rule_contains-Tuple{Any, Any}" href="#DecisionTreeExt.rule_contains-Tuple{Any, Any}"><code>DecisionTreeExt.rule_contains</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rule_contains(rule, X)</code></pre><p>Returns the subet of <code>X</code> that is contained by rule <span>$R_i$</span>. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L328-L332">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.rule_cost-Tuple{Any, Any, Any}" href="#DecisionTreeExt.rule_cost-Tuple{Any, Any, Any}"><code>DecisionTreeExt.rule_cost</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rule_cost(rule, x, X)</code></pre><p>Computes the cost for <span>$x$</span> to be contained by rule <span>$R_i$</span>, where cost is defined as <code>rule_changes(rule, x) - rule_feasibility(rule, X)</code>. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>]. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L365-L369">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.rule_feasibility-Tuple{Any, Any}" href="#DecisionTreeExt.rule_feasibility-Tuple{Any, Any}"><code>DecisionTreeExt.rule_feasibility</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rule_feasibility(rule, X)</code></pre><p>Computes the feasibility of a rule <span>$R_i$</span> for a given dataset. Feasibility is defined as fraction of the data points that satisfy the rule. For details see Bewley et al. (2024) [<a href="https://arxiv.org/abs/2405.18875">arXiv</a>, <a href="https://proceedings.mlr.press/v235/bewley24a.html">PMLR</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L216-L220">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.search_path" href="#DecisionTreeExt.search_path"><code>DecisionTreeExt.search_path</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">search_path(tree::Union{DT.Leaf, DT.Node}, target::RawTargetType, path::AbstractArray)</code></pre><p>Return a path index list with the inequality symbols, thresholds and feature indices.</p><p><strong>Arguments</strong></p><ul><li><code>tree::Union{DT.Leaf, DT.Node}</code>: The root node of a decision tree.</li><li><code>target::RawTargetType</code>: The target class.</li><li><code>path::AbstractArray</code>: A list containing the paths found thus far.</li></ul><p><strong>Returns</strong></p><ul><li><code>paths::AbstractArray</code>: A list of paths to the leaves of the tree to be used for tweaking the feature.</li></ul><p><strong>Example</strong></p><p>paths = search_path(tree, target) # returns a list of paths to the leaves of the tree to be used for tweaking the feature</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/feature_tweak/utils.jl#L56-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.wrap_decision_tree" href="#DecisionTreeExt.wrap_decision_tree"><code>DecisionTreeExt.wrap_decision_tree</code></a> ‚Äî <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">wrap_decision_tree(node::TreeNode, X, y)</code></pre><p>Turns a custom decision tree into a <code>DecisionTree.Root</code> object from the DecisionTree.jl package.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L199-L203">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DecisionTreeExt.wrap_decision_tree-Tuple{DecisionTreeExt.TreeNode}" href="#DecisionTreeExt.wrap_decision_tree-Tuple{DecisionTreeExt.TreeNode}"><code>DecisionTreeExt.wrap_decision_tree</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">wrap_decision_tree(node::TreeNode)</code></pre><p>See <a href="#DecisionTreeExt.wrap_decision_tree"><code>wrap_decision_tree(node::TreeNode, X, y)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/DecisionTreeExt/t_crex/utils.jl#L181-L185">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.JEM-Tuple{JointEnergyClassifier}" href="#CounterfactualExplanations.JEM-Tuple{JointEnergyClassifier}"><code>CounterfactualExplanations.JEM</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CounterfactualExplanations.JEM(
    model::JointEnergyModels.JointEnergyClassifier; likelihood::Symbol=:classification_multi
)</code></pre><p>Outer constructor for a neural network with Laplace Approximation from <code>LaplaceRedux.jl</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/JEMExt/jem.jl#L8-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{Any, CounterfactualExplanations.JEM}" href="#CounterfactualExplanations.Models.Model-Tuple{Any, CounterfactualExplanations.JEM}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Models.Model(model, type::CounterfactualExplanations.JEM; likelihood::Symbol=:classification_multi)</code></pre><p>Overloaded constructor for Flux models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/JEMExt/jem.jl#L21-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.JEM}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.JEM}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Model)(data::CounterfactualData, type::JEM; kwargs...)</code></pre><p>Constructs a differentiable tree-based model for the given data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/JEMExt/jem.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.load_mnist_model-Tuple{CounterfactualExplanations.JEM}" href="#CounterfactualExplanations.Models.load_mnist_model-Tuple{CounterfactualExplanations.JEM}"><code>CounterfactualExplanations.Models.load_mnist_model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Models.load_mnist_model(type::CounterfactualExplanations.JEM)</code></pre><p>Overload for loading a pre-trained model for the <code>JEM</code> model type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/JEMExt/pretrained.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.JEM, AbstractArray}" href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.JEM, AbstractArray}"><code>CounterfactualExplanations.Models.logits</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Models.logits(M::JEM, X::AbstractArray)</code></pre><p>Calculates the logit scores output by the model M for the input data X.</p><p><strong>Arguments</strong></p><ul><li><code>M::JEM</code>: The model selected by the user. Must be a model from the MLJ library.</li><li><code>X::AbstractArray</code>: The feature vector for which the logit scores are calculated.</li></ul><p><strong>Returns</strong></p><ul><li><code>logits::Matrix</code>: A matrix of logits for each output class for each data point in X.</li></ul><p><strong>Example</strong></p><p>logits = Models.logits(M, x) # calculates the logit scores for each output class for the data point x</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/JEMExt/jem.jl#L91-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.JEM, AbstractArray}" href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.JEM, AbstractArray}"><code>CounterfactualExplanations.Models.probs</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Models.probs(
    M::Models.Model,
    type::CounterfactualExplanations.JEM,
    X::AbstractArray,
)</code></pre><p>Overloads the <a href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}">Models.probs</a> method for NeuroTree models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/JEMExt/jem.jl#L113-L121">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.JEM, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.JEM, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">train(M::JEM, data::CounterfactualData; kwargs...)</code></pre><p>Fits the model <code>M</code> to the data in the <code>CounterfactualData</code> object. This method is not called by the user directly.</p><p><strong>Arguments</strong></p><ul><li><code>M::JEM</code>: The wrapper for an JEM model.</li><li><code>data::CounterfactualData</code>: The <code>CounterfactualData</code> object containing the data to be used for training the model.</li></ul><p><strong>Returns</strong></p><ul><li><code>M::JEM</code>: The fitted JEM model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/JEMExt/jem.jl#L60-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.LaplaceReduxModel-Tuple{Laplace}" href="#CounterfactualExplanations.LaplaceReduxModel-Tuple{Laplace}"><code>CounterfactualExplanations.LaplaceReduxModel</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CounterfactualExplanations.LaplaceReduxModel(
    model::LaplaceRedux.Laplace; likelihood::Symbol=:classification_binary
)</code></pre><p>Outer constructor for a neural network with Laplace Approximation from <code>LaplaceRedux.jl</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/LaplaceReduxExt/laplace_redux.jl#L3-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.LaplaceReduxModel}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.LaplaceReduxModel}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Model)(data::CounterfactualData, type::LaplaceReduxModel; kwargs...)</code></pre><p>Constructs a differentiable tree-based model for the given data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/LaplaceReduxExt/laplace_redux.jl#L18-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.LaplaceReduxModel, AbstractArray}" href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.LaplaceReduxModel, AbstractArray}"><code>CounterfactualExplanations.Models.logits</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">logits(M::LaplaceReduxModel, X::AbstractArray)</code></pre><p>Predicts the logit scores for the input data <code>X</code> using the model <code>M</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/LaplaceReduxExt/laplace_redux.jl#L88-L92">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.LaplaceReduxModel, AbstractArray}" href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.LaplaceReduxModel, AbstractArray}"><code>CounterfactualExplanations.Models.probs</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">probs(M::LaplaceReduxModel, X::AbstractArray)</code></pre><p>Predicts the probabilities of the classes for the input data <code>X</code> using the model <code>M</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/LaplaceReduxExt/laplace_redux.jl#L99-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.LaplaceReduxModel, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.LaplaceReduxModel, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">train(M::LaplaceReduxModel, data::CounterfactualData; kwargs...)</code></pre><p>Fits the model <code>M</code> to the data in the <code>CounterfactualData</code> object. This method is not called by the user directly.</p><p><strong>Arguments</strong></p><ul><li><code>M::LaplaceReduxModel</code>: The wrapper for an LaplaceReduxModel model.</li><li><code>data::CounterfactualData</code>: The <code>CounterfactualData</code> object containing the data to be used for training the model.</li></ul><p><strong>Returns</strong></p><ul><li><code>M::LaplaceReduxModel</code>: The fitted LaplaceReduxModel model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/LaplaceReduxExt/laplace_redux.jl#L38-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NeuroTreeExt.AtomicNeuroTree" href="#NeuroTreeExt.AtomicNeuroTree"><code>NeuroTreeExt.AtomicNeuroTree</code></a> ‚Äî <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Type union for NeuroTree classifiers and regressors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/NeuroTreeExt/neurotree.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.NeuroTreeModel}" href="#CounterfactualExplanations.Models.Model-Tuple{CounterfactualData, CounterfactualExplanations.NeuroTreeModel}"><code>CounterfactualExplanations.Models.Model</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">(M::Model)(data::CounterfactualData, type::NeuroTreeModel; kwargs...)</code></pre><p>Constructs a differentiable tree-based model for the given data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/NeuroTreeExt/neurotree.jl#L26-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.NeuroTreeModel-Tuple{Union{NeuroTreeClassifier, NeuroTreeRegressor}}" href="#CounterfactualExplanations.NeuroTreeModel-Tuple{Union{NeuroTreeClassifier, NeuroTreeRegressor}}"><code>CounterfactualExplanations.NeuroTreeModel</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CounterfactualExplanations.NeuroTreeModel(
    model::AtomicNeuroTree; likelihood::Symbol=:classification_binary
)</code></pre><p>Outer constructor for a differentiable tree-based model from <code>NeuroTreeModels.jl</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/NeuroTreeExt/neurotree.jl#L11-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.NeuroTreeModel, AbstractArray}" href="#CounterfactualExplanations.Models.logits-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.NeuroTreeModel, AbstractArray}"><code>CounterfactualExplanations.Models.logits</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Models.logits(M::NeuroTreeModel, X::AbstractArray)</code></pre><p>Calculates the logit scores output by the model M for the input data X.</p><p><strong>Arguments</strong></p><ul><li><code>M::NeuroTreeModel</code>: The model selected by the user. Must be a model from the MLJ library.</li><li><code>X::AbstractArray</code>: The feature vector for which the logit scores are calculated.</li></ul><p><strong>Returns</strong></p><ul><li><code>logits::Matrix</code>: A matrix of logits for each output class for each data point in X.</li></ul><p><strong>Example</strong></p><p>logits = Models.logits(M, x) # calculates the logit scores for each output class for the data point x</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/NeuroTreeExt/neurotree.jl#L68-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.NeuroTreeModel, AbstractArray}" href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.NeuroTreeModel, AbstractArray}"><code>CounterfactualExplanations.Models.probs</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Models.probs(
    M::Models.Model,
    type::CounterfactualExplanations.NeuroTreeModel,
    X::AbstractArray,
)</code></pre><p>Overloads the <a href="#CounterfactualExplanations.Models.probs-Tuple{CounterfactualExplanations.Models.Model, AbstractArray}">probs</a> method for NeuroTree models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/NeuroTreeExt/neurotree.jl#L90-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.NeuroTreeModel, CounterfactualData}" href="#CounterfactualExplanations.Models.train-Tuple{CounterfactualExplanations.Models.Model, CounterfactualExplanations.NeuroTreeModel, CounterfactualData}"><code>CounterfactualExplanations.Models.train</code></a> ‚Äî <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">train(M::NeuroTreeModel, data::CounterfactualData; kwargs...)</code></pre><p>Fits the model <code>M</code> to the data in the <code>CounterfactualData</code> object. This method is not called by the user directly.</p><p><strong>Arguments</strong></p><ul><li><code>M::NeuroTreeModel</code>: The wrapper for an NeuroTree model.</li><li><code>data::CounterfactualData</code>: The <code>CounterfactualData</code> object containing the data to be used for training the model.</li></ul><p><strong>Returns</strong></p><ul><li><code>M::NeuroTreeModel</code>: The fitted NeuroTree model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/blob/218b297e81de08c900ddf98321cf7220054c0411/ext/NeuroTreeExt/neurotree.jl#L38-L50">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../extensions/laplace_redux/">¬´ LaplaceRedux</a><a class="docs-footer-nextpage" href="../contribute/">üõ† Contribute ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Wednesday 1 January 2025 10:55">Wednesday 1 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
