{
  "hash": "ee93a4e1e12fb1617447f2a56e4b9304",
  "result": {
    "markdown": "---\ntitle: \"\\U0001F6A9 Installation\"\n---\n\n\n```@meta\nCurrentModule = CounterfactualExplanations\n```\n\n![](assets/wide_logo.png)\n\nDocumentation for [CounterfactualExplanations.jl](https://github.com/juliatrustworthyai/CounterfactualExplanations.jl).\n\n*Counterfactual Explanations and Algorithmic Recourse in Julia.*\n\n[![Stable](https://img.shields.io/badge/docs-stable-blue.svg)](https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/stable)\n[![Dev](https://img.shields.io/badge/docs-dev-blue.svg)](https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/dev)\n[![Build Status](https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/actions/workflows/CI.yml/badge.svg?branch=main)](https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/actions/workflows/CI.yml?query=branch%3Amain)\n[![Coverage](https://codecov.io/gh/juliatrustworthyai/CounterfactualExplanations.jl/branch/main/graph/badge.svg)](https://codecov.io/gh/juliatrustworthyai/CounterfactualExplanations.jl)\n[![Code Style: Blue](https://img.shields.io/badge/code%20style-blue-4495d1.svg)](https://github.com/invenia/BlueStyle)\n[![License](https://img.shields.io/github/license/juliatrustworthyai/CounterfactualExplanations.jl)](LICENSE)\n[![Package Downloads](https://shields.io/endpoint?url=https://pkgs.genieframework.com/api/v1/badge/CounterfactualExplanations/)](https://pkgs.genieframework.com?packages=CounterfactualExplanations)\n\n\n\n`CounterfactualExplanations.jl` is a package for generating Counterfactual Explanations (CE) and Algorithmic Recourse (AR) for black-box algorithms. Both CE and AR are related tools for explainable artificial intelligence (XAI). While the package is written purely in Julia, it can be used to explain machine learning algorithms developed and trained in other popular programming languages like Python and R. See below for a short introduction and other resources or dive straight into the [docs](https://juliatrustworthyai.github.io/CounterfactualExplanations.jl/dev).\n\n\nYou can install the stable release from [Julia's General Registry](https://github.com/JuliaRegistries/General) as follows:\n\n```{.julia}\nusing Pkg\nPkg.add(\"CounterfactualExplanations\")\n```\n\n`CounterfactualExplanations.jl` is under active development. To install the development version of the package you can run the following command:\n\n```{.julia}\nusing Pkg\nPkg.add(url=\"https://github.com/juliatrustworthyai/CounterfactualExplanations.jl\")\n```\n\n## ü§î Background and Motivation \n\nMachine learning models like Deep Neural Networks have become so complex, opaque and underspecified in the data that they are generally considered Black Boxes. Nonetheless, such models often play a key role in data-driven decision-making systems. This creates the following problem: human operators in charge of such systems have to rely on them blindly, while those individuals subject to them generally have no way of challenging an undesirable outcome:\n\n> ‚ÄúYou cannot appeal to (algorithms). They do not listen. Nor do they bend.‚Äù\n>\n> ‚Äî Cathy O‚ÄôNeil in [*Weapons of Math Destruction*](https://en.wikipedia.org/wiki/Weapons_of_Math_Destruction), 2016\n\n## üîÆ Enter: Counterfactual Explanations \n\nCounterfactual Explanations can help human stakeholders make sense of the systems they develop, use or endure: they explain how inputs into a system need to change for it to produce different decisions. Explainability benefits internal as well as external quality assurance.  \n\nCounterfactual Explanations have a few properties that are desirable in the context of Explainable Artificial Intelligence (XAI). These include:\n\n- Full fidelity to the black-box model, since no proxy is involved. \n- No need for (reasonably) interpretable features as opposed to LIME and SHAP.\n- Clear link to Algorithmic Recourse and Causal Inference.\n- Less susceptible to adversarial attacks than LIME and SHAP.\n\n### Example: Give Me Some Credit\n\n\n\n\nConsider the following real-world scenario: a retail bank is using a black-box model trained on their clients' credit history to decide whether they will provide credit to new applicants. To simulate this scenario, we have pre-trained a binary classifier on the publicly available Give Me Some Credit dataset that ships with this package [@kaggle2011give].\n\n::: {.cell execution_count=3}\n\n::: {.cell-output .cell-output-display execution_count=4}\nThe figure below shows counterfactuals for 10 randomly chosen individuals that would have been denied credit initially. \n\n:::\n:::\n\n\n::: {.cell execution_count=4}\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-commonmark/cell-5-output-1.svg){}\n:::\n:::\n\n\n### Example: MNIST\n\n\n\n\n\n\n\n::: {.cell execution_count=8}\n\n::: {.cell-output .cell-output-display execution_count=9}\nThe figure below shows a counterfactual generated for an image classifier trained on MNIST: in particular, it demonstrates which pixels need to change in order for the classifier to predict 4 instead of 9. \n\n:::\n:::\n\n\nSince `v0.1.9` counterfactual generators are fully composable. Here we have composed a generator that combines ideas from @joshi2019realistic (REVISE) and @schut2021generating:\n\n::: {.cell execution_count=9}\n``` {.julia .cell-code}\n# Compose generator:\ngenerator = GradientBasedGenerator()\n@chain generator begin\n    @objective logitcrossentropy + 0.001distance_l2     \n    @with_optimiser JSMADescent(Œ∑=0.5)                  # Greedy (Schut et al. 2021)\n    @search_latent_space                                # REVISE (Joshi et al. 2019)\nend\n```\n:::\n\n\n::: {.cell execution_count=10}\n\n::: {.cell-output .cell-output-display execution_count=11}\n![](index_files/figure-commonmark/cell-11-output-1.svg){}\n:::\n:::\n\n\n## üîç Usage example \n\nGenerating counterfactuals will typically look like follows.\n\nWe have some pre-trained model that was fitted to data:\n\n::: {.cell execution_count=11}\n``` {.julia .cell-code}\n# Data and Classifier:\ncounterfactual_data = load_linearly_separable(1000)\nM = fit_model(counterfactual_data, :Linear)\n```\n:::\n\n\nFor some individual and target outcome, we want to understand what a valid counterfactual in the target class looks like:\n\n::: {.cell execution_count=12}\n``` {.julia .cell-code}\n# Randomly selected factual:\nx = select_factual(counterfactual_data,rand(1:size(counterfactual_data.X,2)))\ny = predict_label(M, counterfactual_data, x)[1]\ntarget = counterfactual_data.y_levels[counterfactual_data.y_levels .!= y][1]\n```\n:::\n\n\nTo this end, we specify a counterfactual generator of our choice:\n\n::: {.cell execution_count=13}\n``` {.julia .cell-code}\n# Counterfactual search:\ngenerator = DiCEGenerator(\n  opt = Descent(0.01)\n)\n```\n:::\n\n\n::: {.cell execution_count=14}\n\n::: {.cell-output .cell-output-display execution_count=15}\nHere, we have chosen to use the `GradientBasedGenerator` to move the individual from its factual label 2 to the target label 1.\n\n:::\n:::\n\n\nWith all of our ingredients specified, we finally generate counterfactuals using a simple API call:\n\n::: {.cell execution_count=15}\n``` {.julia .cell-code}\nce = generate_counterfactual(\n  x, target, counterfactual_data, M, generator; \n  num_counterfactuals=3, converge_when=:generator_conditions,\n  gradient_tol=1e-3\n)\n```\n:::\n\n\nThe animation below shows the resulting counterfactual path:\n\n\n\n![](www/intro.gif)\n\n![](README_files/intro.gif)\n\n## ‚òëÔ∏è Implemented Counterfactual Generators\n\nCurrently, the following counterfactual generators are implemented:\n\n- Generic [@wachter2017counterfactual]\n- Greedy [@schut2021generating]\n- DiCE [@mothilal2020explaining]\n- Latent Space Search as in REVISE [@joshi2019realistic] and CLUE [@antoran2020getting]\n- ClaPROAR [@altmeyer2023endogenous]\n- GravitationalGenerator [@altmeyer2023endogenous]\n\n## üéØ Goals and limitations \n\nThe goal of this library is to contribute to efforts towards trustworthy machine learning in Julia. The Julia language has an edge when it comes to trustworthiness: it is very transparent. Packages like this one are generally written in pure Julia, which makes it easy for users and developers to understand and contribute to open-source code. Eventually, this project aims to offer a one-stop-shop of counterfactual explanations. We want to deliver a package that is at least at par with the [CARLA](https://github.com/carla-recourse/CARLA) Python library in terms of its functionality. Currently, the package falls short of this goal in some ways: \n\n1. The number of counterfactual generators is still limited.\n2. Mutability constraints are still not supported for Latent Space generators. \n\nAdditionally, our ambition is to enhance the package through the following features:\n\n4. Language interoperability with Python and R: currently still only experimental. \n5. Support for machine learning models trained in [`MLJ.jl`](https://alan-turing-institute.github.io/MLJ.jl/dev/).\n6. Additional datasets for testing, evaluation and benchmarking.\n7. Support for regression models.\n\n## üõ† Contribute \n\nContributions of any kind are very much welcome! Take a look at the [issue](https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/issues) to see what things we are currently working on. \n\nIf any of the below applies to you, this might be the right open-source project for you:\n\n- You're an expert in Counterfactual Explanations or Explainable AI more broadly and you are curious about Julia. \n- You're experienced with Julia and are happy to help someone less experienced to up their game. Ideally, you are also curious about Trustworthy AI.\n- You're new to Julia and open-source development and would like to start your learning journey by contributing to a recent and active development. Ideally, you are familiar with machine learning.\n\n[\\@pat-alt](https://github.com/pat-alt) here: I am still very much at the beginning of my Julia journey, so if you spot any issues or have any suggestions for design improvement, please just open [issue](https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/issues) or start a [discussion](https://github.com/juliatrustworthyai/CounterfactualExplanations.jl/discussions). Our goal is to provide a go-to place for counterfactual explanations in Julia.\n\nFor more details on how to contribute see [here](https://www.paltmeyer.com/CounterfactualExplanations.jl/dev/contributing/). Please follow the [SciML ColPrac guide](https://github.com/SciML/ColPrac).\n\n## üéì Citation \n\nIf you want to use this codebase, please consider citing:\n\n```\n@software{altmeyer2022CounterfactualExplanations,\n  author = {Patrick Altmeyer},\n  title = {{CounterfactualExplanations.jl - a Julia package for Counterfactual Explanations and Algorithmic Recourse}},\n  url = {https://github.com/juliatrustworthyai/CounterfactualExplanations.jl},\n  year = {2022}\n}\n```\n\n## üìö References \n\n",
    "supporting": [
      "index_files"
    ],
    "filters": []
  }
}